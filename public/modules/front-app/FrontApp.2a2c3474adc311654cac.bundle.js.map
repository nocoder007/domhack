{"version":3,"sources":["webpack:///./resources/modules/front-app/src/js/components/AreaComponent.js","webpack:///./resources/modules/front-app/src/js/classes/PageLoader.js","webpack:///./resources/modules/front-app/src/js/classes/modules/DatastorageUpdater.js","webpack:///./resources/modules/front-app/src/js/components/RouteContent.js","webpack:///./resources/modules/front-app/src/js/components/EmailTemplatesRenderer.js","webpack:///./resources/modules/front-app/src/js/components/AppContent.js","webpack:///./resources/modules/front-app/src/js/components/FontsManager.js","webpack:///./resources/modules/front-app/src/js/components/GlobalStyles.js","webpack:///./resources/modules/editor/src/js/components/widgets/styled-components/DiagramComponent.js","webpack:///./resources/modules/front-app/src/FrontApp.js","webpack:///./resources/modules/front-app/src/js/helpers/styles.js"],"names":["AreaComponent","props","area","component","window","pageUpdater","startUpdating","stylesModule","removeStyleById","this","rootElement","id","classes","getTemplates","length","SSR","className","join","map","template","FrontPopup","key","data","lastElement","frontElementsFabric","parseData","page","models","scrollPosition","top","children","forEach","section","lazySection","filter","child","isCustomArea","concat","getAreaClasses","React","componentClass","element","Component","connect","state","PageLoader","resource","Resource","route","pageId","_","isObject","pageStorage","get","pageLoader","altrpHelpers","isJSON","mbParseJSON","replaceContentWithData","DataStorageUpdater","onStoreUpdate","formsStore","appStore","getState","isEqual","getProperty","setProperty","onFormsUpdate","subscribe","dataSources","initialUpdate","ds","Datasource","currentUser","isEmpty","getAll","dispatch","changeCurrentUser","dataSource","parameters","find","param","paramValue","toString","indexOf","params","getParams","currentRouterMatch","subscribeToFormsUpdate","required","value","groupedDataSources","push","currentDataStorageLoading","groupPriority","hasOwnProperty","requests","getWebUrl","defaultParams","cloneDeep","needUpdateFromForms","each","paramName","replace","res","preloadedData","altrpPreloadedDatasources","getAlias","unset","getType","getQueried","Promise","then","console","error","changeCurrentDataStorage","log","performance","now","all","currentDataStorageLoaded","unsetProperty","clearCurrentDataStorage","findIndex","sortBy","data_source","priority","updating","oldParams","undefined","pendingParameters","AltrpModel","dataStorageUpdater","global","ssr","AdminBar","lazy","RouteContent","title","changeCurrentTitle","areas","Area","admin","hasRoles","scrollbar","createRef","isReport","location","href","includes","clearElements","match","currentPageId","currentRouteComponent","altrpHistory","history","updateAppData","nextProps","queryCache","changeRouteCurrentModel","changeCurrentPageProperty","setState","mainScrollbars","current","allowed","setAreas","clearAllResponseData","formsManager","clearFieldsStorage","renderEvent","Event","dispatchEvent","clearFormsStore","data_sources","clearPageState","model","modelName","oldModel","currentModel","getData","altrpModelUpdated","changeCurrentModel","prevProps","Fragment","Suspense","fallback","idPage","idx","to","redirect","withRouter","EmailTemplatesRenderer","baseEmailRender","emailTemplate","emailTemplatesRenderer","currentEmailTemplate","templateType","content","createElement","baseRender","style","width","display","ref","reactRedux","altrpresponses","currentDataStorage","altrpMeta","altrpPageState","AppContent","mainScroller","router","frontAppRouter","addEventListener","e","setScrollValue","target","scrollTop","isAltrpTestMode","routes","path","exact","StylesComponent","appRoutes","FontsManager","fonts","helmetRef","delay","renderFonts","prevState","Set","toPairs","altrpFonts","add","toArray","Helmet","renderFontLink","isEditor","GlobalStyles","createGlobalStyle","elementsSettings","styles","getRouteStyles","prefix","item","name","ImageLightboxComponent","settings","styledString","TabsSwitcherComponent","ButtonComponent","CarouselComponent","GalleryComponent","DividerComponent","VideoComponent","ListComponent","AccordionComponent","SectionWidgetComponent","childrenLength","ColumnComponent","DropbarWidgetComponent","DashboardComponent","getImageStyles","getTabsStyles","getMenuStyles","getBreadcrumbsStyles","getHeadingTypeHeadingStyles","getHeadingTypeAnimatingStyles","getTableStyles","getTextStyles","getPostsStyles","FormComponent","InputDateComponent","DatePickerComponent","InputCheckboxComponent","InputSliderComponent","InputRangeSliderComponent","getInputTextCommonStyles","getInputSelectStyles","getInputSelectPopoverStyles","getInputMultiSelectStyles","getInputMultiSelectPopoverStyles","InputRadioComponent","getInputFileStyles","getInputGalleryStyles","getTemplateStyles","MapComponent","MapConstructorComponent","AdvancedComponent","tooltip_show_type","TooltipComponent","element_css_editor","getResponsiveSetting","isString","globalDefaults","currentScreen","getRoutes","FrontApp","frontApp","default","pusherKey","websocketsPort","websocketsHost","pusher_app_key","websockets_port","pusher_host","Pusher","require","Echo","broadcaster","wsHost","wsPort","forceTLS","disableStats","private","notification","setUserNotice","presenceChannel","activeUsers","here","users","setUsersOnline","joining","user","leaving","splice","Provider","store","DndProvider","backend","HTML5Backend","__hot","module","ALIGN_ITEMS","verticalAlignValues","alignItemsValue","verticalAlignToAlignItems","verticalAlignValue","items","dimensionsControllerToStyles","styleProperty","left","right","bottom","unit","shadowControllerToStyles","declaration","type","offsetX","horizontal","offsetY","vertical","blurRadius","blur","spread","spreadRadius","color","returnShadow","elem","textShadowControllerToStyles","colorPickedHex","opacity","backgroundColorControllerToStyles","pseudoClass","backgroundImageControllerToStyles","url","filtersControllerToStyles","brightness","contrast","hue","saturate","saturation","simplePropertyStyled","colorPropertyStyled","backgroundCreativeLinkStyled","backgroundPickedHex","columnGapStyled","size","iconSizeStyled","sizeStyled","property","heightCalcStyled","translateStyled","isNaN","function","transformRotateStyled","opacityStyled","typographicControllerToStyles","family","lineHeight","spacing","transform","weight","decoration","sizeUnit","lineHeightUnit","colorStyled","controller","colorStyledSecond","borderWidthStyled","marginTopLeftStyled","position","borderRadiusStyled","dimensionsStyled","important","gradientStyled","isWithGradient","defaultStyled","sliderStyled","shadowStyled","textShadowStyled","creativeLinkStyled","mediaStyled","stringStyles","keys","split","styleModify","shift","isArray","settingName","variable","isFunction"],"mappings":"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","file":"FrontApp.2a2c3474adc311654cac.bundle.js","sourcesContent":["import React, { Component } from \"react\";\nimport FrontPopup from \"./FrontPopup\";\nimport { connect } from \"react-redux\";\n\nclass AreaComponent extends Component {\n  constructor(props) {\n    super(props);\n    // console.log(\"AreaComponent: \", performance.now());\n    props.area.component = this;\n  }\n  componentWillUnmount() {\n    /**\n     * Перенесем все секции для ленивой подгрузки в хранилище страниц (текущая стрнаца)\n     */\n    // if( _.isArray(window.lazySections)){\n    //   if(window.pageStorage.hasOwnProperty(page_id) ){\n    //     let page = window.pageStorage[page_id];\n    //\n    //     window.lazySections.forEach(section => {\n    //       let area = page.areas.find(area => area.id === section.area_name);\n    //       if(area){\n    //         section.element.lazySection = true;\n    //         area.template.data.children.push(section.element)\n    //       }\n    //     });\n    //   }\n    //   window.lazySections = null;\n    // }\n\n    if (window.pageUpdater) {\n      window.pageUpdater.startUpdating();\n    }\n    window.stylesModule.removeStyleById(this.rootElement?.id);\n  }\n\n  render() {\n    let classes = [`app-area`, `app-area_${this.props.id}`];\n    /**\n     * Если это попап\n     */\n    if (\n      typeof this.props.area.getTemplates !== \"undefined\" &&\n      this.props.area.getTemplates().length\n    ) {\n      if(window.SSR){\n        return null\n      }\n      let popups = (\n        <div className={classes.join(\" \")}>\n          {this.props.area.getTemplates().map(template => {\n            return <FrontPopup key={template.id} template={template} />;\n          })}\n        </div>\n      );\n      return popups;\n    }\n    /**\n     * Если шаблон привязанный к странице удалили, то ничего не отрисовываем\n     */\n    if (! this.props?.template?.data) {\n      return <div className={classes.join(\" \")} />;\n    }\n    if(this.props.id === 'footer'){\n      this.props.template.data.lastElement = true;\n    }\n    let rootElement = this.rootElement\n      ? this.rootElement\n      : window.frontElementsFabric.parseData(\n          this.props.template.data,\n          null,\n          this.props.page,\n          this.props.models\n        );\n    this.rootElement = rootElement;\n    window[`${this.props.id}_root_element`] = this.rootElement;\n    if (this.props.scrollPosition.top > 0) {\n      this.rootElement.children.forEach(section => {\n        section.lazySection = false;\n      });\n    }\n    let { children } = this.rootElement;\n    children = children.filter(child => ! child.lazySection);\n\n    if(this.props.area.isCustomArea()){\n      classes = classes.concat(this.props.area.getAreaClasses())\n    }\n\n    return React.createElement('div', {\n      className:classes.join(\" \"),\n    }, React.createElement(this.rootElement.componentClass, {\n      element: this.rootElement,\n      children\n    }));\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    scrollPosition: state.scrollPosition\n  };\n}\n\nexport default connect(mapStateToProps)(AreaComponent);\n","/**\r\n * Загружает и хранит страницы с шаблонами\r\n * @class PageLoader\r\n */\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\n\r\nclass PageLoader {\r\n  constructor() {\r\n    this.resource = new Resource({\r\n      route: \"/ajax/pages\"\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @param {int} pageId\r\n   * @return {Promise}\r\n   */\r\n  async loadPage(pageId) {\r\n    if (_.isObject(window.pageStorage[pageId])) {\r\n      // return new Promise((resolve, reject)=>{\r\n      //   resolve(this.pagesStorage[pageId]);\r\n      // });\r\n      return window.pageStorage[pageId];\r\n    }\r\n    let page = await this.resource.get(pageId);\r\n    window.pageStorage[pageId] = page;\r\n    return page;\r\n  }\r\n}\r\n\r\nwindow.pageLoader = new PageLoader();\r\nexport default window.pageLoader;\r\n","import {\r\n  changeCurrentDataStorage,\r\n  clearCurrentDataStorage,\r\n  currentDataStorageLoaded, currentDataStorageLoading\r\n} from \"../../store/current-data-storage/actions\";\r\nimport {changeCurrentUser} from \"../../store/current-user/actions\";\r\nimport Datasource from \"../Datasource\";\r\nconst { Resource, isJSON, mbParseJSON, replaceContentWithData} = window.altrpHelpers;\r\n\r\n/**\r\n * @class DataStorageUpdater\r\n */\r\nclass DataStorageUpdater extends AltrpModel {\r\n\r\n  constructor(data) {    super(data);\r\n    this.setProperty('dataSourcesFormsDependent', []);\r\n    this.setProperty('formsStore', appStore.getState().formsStore);\r\n    appStore.subscribe(this.onStoreUpdate)\r\n  }\r\n\r\n  /**\r\n   *  обновление currentDataStorage\r\n   *  @param {Datasource[]} dataSources\r\n   *  @param {boolean} initialUpdate\r\n   */\r\n  async updateCurrent(dataSources = null, initialUpdate = true) {\r\n    dataSources = dataSources.map(ds => {\r\n      if(ds instanceof Datasource){\r\n        return ds;\r\n      }\r\n      return new Datasource(ds)\r\n    });\r\n    if(appStore.getState().currentUser.isEmpty()){\r\n      let currentUser = await new Resource({ route: \"/ajax/current-user\" }).getAll();\r\n      currentUser = currentUser.data;\r\n      appStore.dispatch(changeCurrentUser(currentUser));\r\n    }\r\n    if(!initialUpdate && !_.get(dataSources, 'length')){\r\n      dataSources = this.getProperty('currentDataSources');\r\n    }\r\n    if(! dataSources){\r\n      dataSources = [];\r\n    }\r\n    if(initialUpdate){\r\n      this.setProperty('currentDataSources', dataSources);\r\n      this.setProperty('updated', false);\r\n      dataSources = dataSources.filter(dataSource => dataSource.getProperty('autoload'));\r\n    }\r\n\r\n    /**\r\n     * Фильтруем проверяя на наличие обязательных параметров\r\n     */\r\n    dataSources = dataSources.filter(dataSource => {\r\n      let parameters = dataSource.getProperty('parameters');\r\n      if(! isJSON(parameters)){\r\n        return true;\r\n      }\r\n      parameters = mbParseJSON(parameters, []);\r\n      /**\r\n       * Находим хотя бы один обязательный параметр, который не имеет значения\r\n       */\r\n      return ! (parameters && parameters.find(param=>{\r\n        if (param.paramValue.toString().indexOf('altrpforms.') !== -1) {\r\n          let params = dataSource.getParams(window.currentRouterMatch.data.params, 'altrpforms.');\r\n          initialUpdate && this.subscribeToFormsUpdate(dataSource, params);\r\n        } else {\r\n          return false;\r\n        }\r\n        if(! param.required){\r\n          return false;\r\n        }\r\n        let value = param.paramValue || '';\r\n        if(value.indexOf('{{') !== -1){\r\n          value = replaceContentWithData(value);\r\n        }\r\n        return ! value;\r\n      }));\r\n    });\r\n    // dataSources = _.sortBy(dataSources, ['data.priority']);\r\n    /**\r\n     * @member {Datasource} dataSource\r\n     */\r\n    const groupedDataSources = {};\r\n    dataSources.forEach(dataSource => {\r\n      groupedDataSources[dataSource.getProperty('priority')] = groupedDataSources[dataSource.getProperty('priority')] || [];\r\n      groupedDataSources[dataSource.getProperty('priority')].push(dataSource);\r\n    });\r\n    initialUpdate && appStore.dispatch(currentDataStorageLoading());\r\n    for (let groupPriority in groupedDataSources){\r\n      if(! groupedDataSources.hasOwnProperty(groupPriority)){\r\n        continue;\r\n      }\r\n      initialUpdate && appStore.dispatch(currentDataStorageLoading());\r\n      let requests = groupedDataSources[groupPriority].map(async dataSource => {\r\n\r\n        if (dataSource.getWebUrl()) {\r\n          let params = dataSource.getParams(window.currentRouterMatch.params, 'altrpforms.');\r\n          let defaultParams = _.cloneDeep(params);\r\n          let needUpdateFromForms = false;\r\n          _.each(params, (paramValue, paramName) => {\r\n            if (paramValue.toString().indexOf('altrpforms.') === 0) {\r\n              params[paramName] = _.get(appStore.getState().formsStore, paramValue.toString().replace('altrpforms.', ''), '');\r\n              needUpdateFromForms = true;\r\n            }\r\n          });\r\n          /**\r\n           * Если нужно взять параметры из формы, то подписываемся на изменения полeй формы\r\n           * и сохраняем параметры, с которыми уже получили данные\r\n           */\r\n          if (needUpdateFromForms) {\r\n            initialUpdate && this.subscribeToFormsUpdate(dataSource, _.cloneDeep(defaultParams));\r\n          }\r\n          let res = {};\r\n          try {\r\n            const preloadedData = _.get(window.altrpPreloadedDatasources, dataSource.getAlias());\r\n            if(preloadedData){\r\n              res = preloadedData;\r\n              _.unset(window.altrpPreloadedDatasources, dataSource.getAlias());\r\n            } else\r\n              if (dataSource.getType() === 'show') {\r\n              let id = _.get(params, 'id', _.get(this.props, 'match.params.id'));\r\n              if (id) {\r\n                res = await (new Resource({ route: dataSource.getWebUrl() })).get(id);\r\n              }\r\n            } else if (!_.isEmpty(params)) {\r\n              res = await (new Resource({ route: dataSource.getWebUrl() })).getQueried(params);\r\n              dataSource.params = _.cloneDeep(params);\r\n            } else {\r\n              res = await (new Resource({ route: dataSource.getWebUrl() })).getAll();\r\n            }\r\n          } catch (err) {\r\n            if(err instanceof Promise){\r\n              err = await err.then();\r\n            }\r\n            console.error(err);\r\n          }\r\n          res = _.get(res, 'data', res);\r\n          dataSources = dataSources.filter(ds => ds !== dataSource);\r\n          if(! dataSources.length){\r\n            this.setProperty('updated', true);\r\n          }\r\n          appStore.dispatch(changeCurrentDataStorage(dataSource.getAlias(), res));\r\n          return res;\r\n        }\r\n      });\r\n      console.log('Update Datasource Start: ',performance.now());\r\n      let responses = await Promise.all(requests);\r\n      console.log('Update Datasource End: ',performance.now());\r\n      initialUpdate && appStore.dispatch(currentDataStorageLoaded());\r\n    }\r\n    if(! dataSources.length){\r\n      appStore.dispatch(currentDataStorageLoaded());\r\n    }\r\n\r\n  }\r\n  /**\r\n   * Обнуляем текущее хранилище dataStorage\r\n   */\r\n  clearCurrent() {\r\n    this.unsetProperty('currentDataSources');\r\n    this.setProperty('dataSourcesFormsDependent', []);\r\n    appStore.dispatch(clearCurrentDataStorage())\r\n  }\r\n  /**\r\n    * подписывает какой либо источник данных на обновление от формы\r\n   * @param {Datasource} dataSource\r\n   * @param {{}} params\r\n   */\r\n  subscribeToFormsUpdate(dataSource, params) {\r\n    let dataSources = this.getProperty('dataSourcesFormsDependent');\r\n    // if(dataSources.indexOf(dataSource) === -1){\r\n    //   dataSources.push(dataSource);\r\n    // }\r\n    if (_.findIndex(dataSources, ds => {\r\n      return ds.dataSource === dataSource;\r\n    }) === -1) {\r\n      dataSources.push({\r\n        dataSource,\r\n        params\r\n      });\r\n    }\r\n  }\r\n  /**\r\n   * Вызывается, когда обновляется redux-хранилище\r\n   */\r\n  onStoreUpdate = async () => {\r\n    /**\r\n     * Проверяем обновились ли формы\r\n     * @type {formsStore}\r\n     */\r\n    let formsStore = appStore.getState().formsStore;\r\n\r\n    if (! _.isEqual(this.getProperty('formsStore'), formsStore) && this.getProperty('updated')) {\r\n      this.setProperty('formsStore', formsStore);\r\n      await this.onFormsUpdate();\r\n    }\r\n  };\r\n  /**\r\n   * Вызывается, когда обновляется поле формы для того,\r\n   * чтобы сделать новый запрос по тем dataSource,\r\n   * которые зависят от полей формы\r\n   */\r\n  async onFormsUpdate() {\r\n    let dataSources = this.getProperty('dataSourcesFormsDependent', []);\r\n\r\n    /**\r\n     * Фильтруем, проверяя на наличие обязательных параметров\r\n     */\r\n    dataSources = dataSources.filter(ds => {\r\n      const {dataSource} = ds;\r\n      let parameters = dataSource.getProperty('parameters');\r\n      if(! isJSON(parameters)){\r\n        return true;\r\n      }\r\n      parameters = mbParseJSON(parameters, []);\r\n      /**\r\n       * Находим хотя бы один обзяательный параметр, который имеет пустое значения\r\n       */\r\n      return ! parameters.find(param=>{\r\n        if(! param.required){\r\n          return false;\r\n        }\r\n        let value = param.paramValue || '';\r\n        if(value.indexOf('{{') !== -1){\r\n          value = replaceContentWithData(value);\r\n        }\r\n        return ! value;\r\n      });\r\n    });\r\n    // console.log(dataSources);\r\n    dataSources = _.sortBy(dataSources, data_source => data_source.priority);\r\n    let formsStore = appStore.getState().formsStore;\r\n    for (let ds of dataSources) {\r\n      let { dataSource, updating } = ds;\r\n      let oldParams = _.cloneDeep(dataSource.params);\r\n      /**\r\n       * @member {Datasource} dataSource\r\n       */\r\n      let params = dataSource.getParams(window.currentRouterMatch.params, 'altrpforms.');\r\n      _.forEach(params, (paramValue, paramName) => {\r\n        if (paramValue.toString().indexOf('altrpforms.') === 0) {\r\n          params[paramName] = _.get(formsStore, paramValue.replace('altrpforms.', ''));\r\n          // if(_.isArray(params[paramName])){\r\n          //   params[paramName] = JSON.stringify(params[paramName]);\r\n          // }\r\n        }\r\n      });\r\n      if(updating){\r\n        // console.error(params);\r\n        // console.error(ds);\r\n      }\r\n      if (! _.isEqual(params, oldParams) && ! updating) {\r\n        dataSource.params = _.cloneDeep(params);\r\n        ds.updating = true;\r\n        let res = {};\r\n        try{\r\n          res = await (new Resource({ route: dataSource.getWebUrl() })).getQueried(params);\r\n          res = _.get(res, 'data', res);\r\n          appStore.dispatch(changeCurrentDataStorage(dataSource.getAlias(), res));\r\n        } catch (err) {\r\n          if(err instanceof Promise){\r\n            err = await err.then();\r\n            err = mbParseJSON(err);\r\n          }\r\n          console.error(err);\r\n        } finally {\r\n          /**\r\n           * В случае, если во время запроса возникла необходимость обновления с новыми параметрами,\r\n           * сделаем новый запрос\r\n           */\r\n          if((ds.pendingParameters !== undefined) && ! _.isEqual(ds.pendingParameters, params)){\r\n            try{\r\n              res = await (new Resource({ route: dataSource.getWebUrl() })).getQueried(ds.pendingParameters);\r\n              res = _.get(res, 'data', res);\r\n              appStore.dispatch(changeCurrentDataStorage(dataSource.getAlias(), res));\r\n              dataSource.params = _.cloneDeep(ds.pendingParameters);\r\n            } catch (err) {\r\n              if(err instanceof Promise){\r\n                err = await err.then();\r\n                err = mbParseJSON(err);\r\n              }\r\n              console.error(err);\r\n            } finally {\r\n              _.unset(ds, 'pendingParameters');\r\n            }\r\n          }\r\n          ds.updating = false;\r\n        }\r\n        /**\r\n         * В случае, если во время запроса возникла необходимость обновления с новыми параметрами,\r\n         * сохраним эти параметры\r\n         */\r\n      } else if((! _.isEqual(params, oldParams)) && updating){\r\n        ds.pendingParameters = _.cloneDeep(params);\r\n      }\r\n    }\r\n  }\r\n}\r\nwindow.dataStorageUpdater = window.dataStorageUpdater || new DataStorageUpdater();\r\nexport default window.dataStorageUpdater\r\n","import {setAreas} from \"../store/areas/actions\";\r\n\r\nif (typeof window === \"undefined\") {\r\n  global.window = {};\r\n  global.window.ssr = true;\r\n}\r\nif (typeof document === \"undefined\") {\r\n  global.document = {};\r\n}\r\nimport AreaComponent from \"./AreaComponent\";\r\nconst AdminBar = React.lazy(() => import(/* webpackChunkName: 'AdminBar' */\"./AdminBar\"));\r\nimport { Redirect, withRouter } from \"react-router-dom\";\r\nimport pageLoader from \"./../classes/PageLoader\";\r\nimport Area from \"../classes/Area\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport appStore from \"../store/store\";\r\nimport { changeCurrentModel } from \"../store/current-model/actions\";\r\nimport { queryCache } from \"react-query\";\r\nimport { connect } from \"react-redux\";\r\nimport AltrpModel from \"../../../../editor/src/js/classes/AltrpModel\";\r\nimport dataStorageUpdater from \"../classes/modules/DatastorageUpdater\";\r\nimport { clearElements } from \"../store/elements-storage/actions\";\r\nimport { clearAllResponseData } from \"../store/responses-storage/actions\";\r\nimport { clearPageState } from \"../store/altrp-page-state-storage/actions\";\r\nimport { changeCurrentTitle } from \"../store/current-title/actions\";\r\nimport { changeCurrentPageProperty } from \"../store/current-page/actions\";\r\n\r\nclass RouteContent extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    let title = this.props.title;\r\n    appStore.dispatch(changeCurrentTitle(title));\r\n    this.state = {\r\n      areas:\r\n        window.ssr === true\r\n          ? this.props.areas.map(area => Area.areaFactory(area))\r\n          : this.props.areas || [],\r\n      admin: this.props.currentUser.hasRoles(\"admin\")\r\n    };\r\n    this.scrollbar = React.createRef();\r\n    this.isReport = window.location?.href.includes(\"reports\") || false;\r\n    appStore.dispatch(clearElements());\r\n    window.currentRouterMatch = new AltrpModel(props.match);\r\n    window.currentPageId = props.id;\r\n    window.currentRouteComponent = this;\r\n    window.altrpHistory = this.props.history;\r\n    console.log('Route constructor: ', performance.now());\r\n    this.updateAppData();\r\n  }\r\n\r\n  async componentWillReceiveProps(nextProps) {\r\n    queryCache.clear();\r\n    if (\r\n      _.get(this.props, \"model.modelName\") !==\r\n      _.get(nextProps, \"model.modelName\") ||\r\n      _.get(this.props, \"match.params.id\") !==\r\n      _.get(nextProps, \"match.params.id\")\r\n    ) {\r\n      await this.changeRouteCurrentModel(nextProps);\r\n      appStore.dispatch(changeCurrentPageProperty(\"url\", location.href));\r\n    }\r\n    /**\r\n     * При изменении страницы без изменения текущего роута\r\n     * отправляем запросы на обновление данных и altrpPageState\r\n     */\r\n    if (\r\n      !_.isEqual(\r\n        _.get(this.props, \"match.params\"),\r\n        _.get(nextProps, \"match.params\")\r\n      )\r\n    ) {\r\n      this.updateAppData();\r\n    }\r\n    this.setState(state => ({\r\n      ...state,\r\n      admin: nextProps.currentUser.hasRoles(\"admin\")\r\n    }));\r\n  }\r\n  /**\r\n   * Меняем заголовок страницы\r\n   * лениво подгружаем области, если необходимо и страница доступна к просмотру\r\n   * главный скролбар сохраняем в глобальной области видимости\r\n   * @return {Promise<void>}\r\n   */\r\n  async componentDidMount() {\r\n    window.mainScrollbars = this.scrollbar.current;\r\n\r\n    /**\r\n     * Запускаем обновление списка страниц\r\n     */\r\n    appStore.dispatch(changeCurrentPageProperty(\"url\", location.href));\r\n    if (this.props.lazy && this.props.allowed) {\r\n      let page = await pageLoader.loadPage(this.props.id);\r\n      let areas = page.areas.map(area => Area.areaFactory(area));\r\n      appStore.dispatch(setAreas(areas))\r\n      this.setState(state => ({\r\n        ...state,\r\n        areas\r\n      }));\r\n    }\r\n\r\n    /**\r\n     * Меняем текущую модель\r\n     */\r\n    this.changeRouteCurrentModel();\r\n    /**\r\n     * Обнуляем хранилище ответов на отправленные формы\r\n     */\r\n    appStore.dispatch(clearAllResponseData());\r\n    /**\r\n     * затем отправляем запросы на обновление данных и altrpPageState\r\n     */\r\n    window.formsManager.clearFieldsStorage();\r\n    console.log('Route Mounted: ', performance.now());\r\n    const renderEvent = new Event('render-altrp');\r\n    window.dispatchEvent(renderEvent);\r\n\r\n  }\r\n\r\n  /**\r\n   * Очистим currentDataSource после удаления компонента\r\n   * todo: отключили очищение так как componentWillUnmount вызывается после загрузки другого RouteContent\r\n   */\r\n  componentWillUnmount() {\r\n    // dataStorageUpdater.clearCurrent();\r\n  }\r\n  /**\r\n   *  обновление currentDataStorage\r\n   *  Сброс altrpPageState\r\n   */\r\n  async updateAppData() {\r\n    dataStorageUpdater.clearCurrent();\r\n    if (window.formsManager) {\r\n      formsManager.clearFormsStore();\r\n    }\r\n    /**\r\n     * @member {array} data_sources\r\n     */\r\n    let { data_sources } = this.props;\r\n    dataStorageUpdater.updateCurrent(data_sources);\r\n    appStore.dispatch(clearPageState());\r\n  }\r\n  /**\r\n   * Меняем текущую модель\r\n   */\r\n  async changeRouteCurrentModel(nextProps) {\r\n    if (\r\n      _.get(this.props, \"model.modelName\") &&\r\n      _.get(this.props, \"match.params.id\")\r\n    ) {\r\n      let props = nextProps ? nextProps : this.props\r\n      try {\r\n        let model = await new Resource({\r\n          route: `/ajax/models/${props.model.modelName}`\r\n        }).get(props.match.params.id);\r\n        let oldModel = appStore.getState().currentModel.getData();\r\n        model.altrpModelUpdated = true;\r\n        if(! _.isEqual(model, oldModel)){\r\n          appStore.dispatch(changeCurrentModel({ altrpModelUpdated: false }));\r\n          appStore.dispatch(changeCurrentModel(model));\r\n        }\r\n      } catch (e) {\r\n        console.error(e);\r\n        appStore.dispatch(changeCurrentModel({ altrpModelUpdated: true }));\r\n      }\r\n    } else {\r\n      appStore.dispatch(changeCurrentModel({ altrpModelUpdated: true }));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Если меняется роут\r\n   * @params {{}} prevProps\r\n   * @return {Promise<void>}\r\n   */\r\n  async componentDidUpdate(prevProps) {\r\n\r\n    if (!_.isEqual(_.get(this.props, \"match\"), _.get(prevProps, \"match\"))) {\r\n      window.currentRouterMatch = new AltrpModel(this.props.match);\r\n      // appStore.dispatch(clearFormStorage());\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.allowed) {\r\n      return <Redirect to={this.props.redirect || \"/\"} />;\r\n    }\r\n    return (\r\n      <React.Fragment>\r\n        <Suspense fallback={<div />}>\r\n          {this.state.admin && (\r\n            <AdminBar\r\n              areas={this.state.areas}\r\n              data={this.props.currentUser.data}\r\n              idPage={this.props.id}\r\n            />\r\n          )}{\" \"}\r\n        </Suspense>\r\n\r\n        {/*<Scrollbars*/}\r\n        {/*  className=\"main-content\"*/}\r\n        {/*  universal={true}*/}\r\n        {/*  ref={this.scrollbar}*/}\r\n        {/*  onUpdate={this.props.setScrollValue}*/}\r\n        {/*  // style={{ zIndex: 99999 }}*/}\r\n        {/*  autoHide*/}\r\n        {/*  autoHideTimeout={500}*/}\r\n        {/*  autoHideDuration={200}*/}\r\n        {/*  renderTrackVertical={({ style, ...props }) => {*/}\r\n        {/*    return (*/}\r\n        {/*      <div*/}\r\n        {/*        className=\"altrp-scroll__vertical-track\"*/}\r\n        {/*        style={style}*/}\r\n        {/*        {...props}*/}\r\n        {/*      />*/}\r\n        {/*    );*/}\r\n        {/*  }}*/}\r\n        {/*>*/}\r\n          <div className=\"route-content\" id=\"route-content\">\r\n            {this.state.areas.map((area, idx) => {\r\n              return (\r\n                <AreaComponent\r\n                  {...area}\r\n                  area={area}\r\n                  areas={this.state.areas}\r\n                  page={this.props.id}\r\n                  models={[this.props.model]}\r\n                  key={\"appArea_\" + area.id}\r\n                />\r\n              );\r\n            })}\r\n          </div>\r\n        {/*</Scrollbars>*/}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  currentUser: state.currentUser\r\n});\r\n//\r\n// const mapDispatchToProps = dispatch => {\r\n//   return {\r\n//     setScrollValue: topPosition => dispatch(setScrollValue(topPosition))\r\n//   };\r\n// };\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  // mapDispatchToProps\r\n)(withRouter(RouteContent));\r\n","\r\n\r\nclass EmailTemplatesRenderer extends window.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      baseEmailRender: window.baseEmailRender\r\n    };\r\n    this.emailTemplate = React.createRef();\r\n    window.emailTemplatesRenderer = this;\r\n  }\r\n\r\n\r\n  /**\r\n   *\r\n   * @return {*}\r\n   */\r\n  render() {\r\n    if (! this.props.currentEmailTemplate || ! this.state.baseEmailRender) {\r\n      return null\r\n    }\r\n    let rootElement = window.altrpHelpers.mbParseJSON(this.props.currentEmailTemplate.data);\r\n    rootElement = window.frontElementsFabric.parseData(rootElement);\r\n    rootElement.templateType = 'email';\r\n    let content = React.createElement(rootElement.componentClass, {\r\n      element: rootElement,\r\n      children: rootElement.children,\r\n      baseRender: this.state.baseEmailRender,\r\n    });\r\n    const wrapperStyles = {\r\n      width: '100%',\r\n      display: 'none',\r\n    };\r\n    return <table id=\"altrp-email-renderer\"\r\n                  style={wrapperStyles}\r\n                  ref={this.emailTemplate}>\r\n        <tbody>\r\n        <tr>\r\n          <td>\r\n            {content}\r\n          </td>\r\n        </tr>\r\n        </tbody>\r\n      </table>\r\n\r\n  }\r\n}\r\n\r\n/**\r\n *\r\n * @param state\r\n * @return {{altrpresponses: *, formsStore: *, currentDataStorage: *, currentModel: *, currentUser: *, altrpMeta: *, altrpPageState: *, currentEmailTemplate: currentEmailTemplate}}\r\n */\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    altrpresponses: state.altrpresponses,\r\n    formsStore: state.formsStore,\r\n    currentDataStorage: state.currentDataStorage,\r\n    currentModel: state.currentModel,\r\n    currentUser: state.currentUser,\r\n    altrpMeta: state.altrpMeta,\r\n    altrpPageState: state.altrpPageState,\r\n    currentEmailTemplate: state.currentEmailTemplate,\r\n  };\r\n}\r\n\r\nexport default window.reactRedux.connect(mapStateToProps)(EmailTemplatesRenderer)\r\n","\r\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport RouteContent from \"./RouteContent\";\r\nimport {isAltrpTestMode} from \"../helpers\";\r\nimport EmailTemplatesRenderer from \"./EmailTemplatesRenderer\";\r\nimport appStore from \"../store/store\";\r\nimport {setScrollValue} from \"../store/scroll-position/actions\";\r\nclass AppContent extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.mainScroller = React.createRef();\r\n    this.router = React.createRef();\r\n  }\r\n  componentDidMount() {\r\n    if (this.router.current) {\r\n      window.frontAppRouter = this.router.current;\r\n    }\r\n\r\n    /**\r\n     * todo: изменить подписку на скролл при необходимости\r\n     */\r\n    if(this.mainScroller.current){\r\n      this.mainScroller.current.addEventListener('scroll', e=>{\r\n        appStore.dispatch(setScrollValue({top: e.target.scrollTop}))\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Router ref={this.router}>\r\n        <EmailTemplatesRenderer/>\r\n        <div ref={this.mainScroller} className={`front-app-content ${isAltrpTestMode() ? 'front-app-content_test' : ''}`}>\r\n          <Switch>\r\n            {this.props.routes.map(route => (\r\n              <Route\r\n                key={route.id}\r\n                children={<RouteContent {...route} />}\r\n                path={route.path}\r\n                exact\r\n              />\r\n            ))}\r\n          </Switch>\r\n        </div>\r\n        <window.StylesComponent />\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    routes: state.appRoutes.routes\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(AppContent);\r\n","import {Helmet} from \"react-helmet\";\r\nimport {renderFontLink, delay} from \"../helpers\";\r\n\r\n\r\nclass FontsManager extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      fonts: [],\r\n    };\r\n    this.helmetRef = React.createRef();\r\n    window.helmetRef = this.helmetRef;\r\n  }\r\n\r\n  async componentDidMount() {\r\n    await delay(1000);\r\n    this.setState(state=>({...state, renderFonts: true}));\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {{}} prevProps\r\n   * @param {{}} prevState\r\n   */\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if(!this.state.renderFonts){\r\n      return;\r\n    }\r\n    let fonts = new Set();\r\n    const fontsPairs = _.toPairs(this.props.altrpFonts.getData());\r\n    fontsPairs.forEach(([key, value]) => {\r\n      fonts.add(value);\r\n    });\r\n    fonts = _.toArray(fonts);\r\n    if (_.isEqual(fonts, this.state.fonts)) {\r\n      return;\r\n    }\r\n    this.setState(state => ({...state, fonts}));\r\n  }\r\n\r\n  render() {\r\n    const {fonts} = this.state;\r\n\r\n    return <Helmet ref={this.helmetRef}>\r\n      {fonts.map(renderFontLink)}\r\n    </Helmet>\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    altrpFonts: state.altrpFonts,\r\n  };\r\n}\r\n\r\nexport default window.reactRedux.connect(mapStateToProps)(FontsManager);\r\n\r\n\r\n","import { getHeadingTypeHeadingStyles } from \"./helpers/stylesForTheHeadingTypeHeading\";\nimport { getHeadingTypeAnimatingStyles } from \"./helpers/stylesForTheHeadingTypeAnimating\";\nimport {getTextStyles} from \"./helpers/stylesForTheText\";\nimport {getTableStyles} from \"./helpers/stylesForTheTable\";\nimport {getPostsStyles} from \"./helpers/stylesForThePosts\";\nimport getImageStyles from \"./helpers/stylesForTheImage\";\nimport getTabsStyles from \"./helpers/stylesForTheTabs\";\nimport getMenuStyles from \"./helpers/getMenuStyles\";\nimport getBreadcrumbsStyles from \"./helpers/stylesForTheBreadcrumbs\";\nimport ButtonComponent from \"../../../../editor/src/js/components/widgets/styled-components/ButtonComponent\";\nimport CarouselComponent from \"../../../../editor/src/js/components/widgets/styled-components/CarouselComponent\";\nimport GalleryComponent from \"../../../../editor/src/js/components/widgets/styled-components/GalleryComponent\";\nimport DividerComponent from \"../../../../editor/src/js/components/widgets/styled-components/DividerComponent\";\nimport VideoComponent from \"../../../../editor/src/js/components/widgets/styled-components/VideoComponent\";\nimport ListComponent from \"../../../../editor/src/js/components/widgets/styled-components/ListComponent\";\nimport DashboardComponent from \"../../../../editor/src/js/components/widgets/styled-components/DashboardComponent\";\nimport AdvancedComponent from \"../../../../editor/src/js/components/widgets/styled-components/AdvancedComponent\";\nimport SectionWidgetComponent\n  from \"../../../../editor/src/js/components/widgets/styled-components/SectionWidgetComponent\";\nimport ColumnComponent from \"../../../../editor/src/js/components/widgets/styled-components/ColumnComponents\";\nimport DropbarWidgetComponent\n  from \"../../../../editor/src/js/components/widgets/styled-components/DropbarWidgetComponent\";\nimport FormComponent from \"../../../../editor/src/js/components/widgets/styled-components/FormComponent\";\nimport AccordionComponent from \"../../../../editor/src/js/components/widgets/styled-components/AccordionComponent\";\nimport getRouteStyles from \"../functions/get-route-styles\";\nimport MapComponent from \"../../../../editor/src/js/components/widgets/styled-components/MapComponent\";\nimport MapConstructorComponent\n  from \"../../../../editor/src/js/components/widgets/styled-components/MapConstructorComponent\";\nimport TabsSwitcherComponent\n  from \"../../../../editor/src/js/components/widgets/styled-components/TabsSwitcherComponent\";\nimport DiagramComponent from \"../../../../editor/src/js/components/widgets/styled-components/DiagramComponent\";\nimport ImageLightboxComponent\n  from \"../../../../editor/src/js/components/widgets/styled-components/ImageLightboxComponent\";\nimport InputDateComponent from \"../../../../editor/src/js/components/widgets/styled-components/InputDateComponent\";\nimport DatePickerComponent from \"../../../../editor/src/js/components/widgets/styled-components/DatePickerComponent\";\nimport InputCheckboxComponent\n  from \"../../../../editor/src/js/components/widgets/styled-components/InputCheckboxComponent\";\nimport getInputTextCommonStyles from \"./helpers/getInputTextCommonStyles\";\nimport getInputSelectStyles, {getInputSelectPopoverStyles} from \"./helpers/getInputSelectStyles\";\nimport InputRadioComponent from \"../../../../editor/src/js/components/widgets/styled-components/InputRadioComponent\";\nimport InputSliderComponent from \"../../../../editor/src/js/components/widgets/styled-components/InputSliderComponent\";\nimport getInputFileStyles from \"./helpers/getInputFileStyles\";\nimport getInputGalleryStyles from \"./helpers/getInputGalleryStyles\";\nimport {getResponsiveSetting} from \"../helpers\";\nimport InputRangeSliderComponent\n  from \"../../../../editor/src/js/components/widgets/styled-components/InputRangeSliderComponent\";\nimport getTemplateStyles from \"./helpers/getTemplateStyles\";\nimport TooltipComponent from \"../../../../editor/src/js/components/widgets/styled-components/TooltipComponent\";\nimport getInputMultiSelectStyles, {getInputMultiSelectPopoverStyles} from \"./helpers/getInputMultiSelectStyles\";\n\nconst {isEditor} = window.altrpHelpers;\n\nconst GlobalStyles = createGlobalStyle`${({ elementsSettings, areas }) => {\n  let styles = \"\";\n  if(areas){\n    styles += getRouteStyles(areas);\n  }\n  let prefix = \"altrp-element\";\n\n  _.each(elementsSettings, (item, id) => {\n    if (item) {\n      switch (item.name) {\n        case \"image-lightbox\":\n          styles+=ImageLightboxComponent(item.settings,id);\n          break;\n        case \"diagram\":\n          styles += `.${prefix}${id} {${DiagramComponent(item.settings)}}`;\n          break;\n        case \"tabs-switcher\":\n          styles += `.${prefix}${id} {${TabsSwitcherComponent(item.settings)}}`;\n          break;\n        case \"button\":\n          styles += `.${prefix}${id} {${ButtonComponent(item.settings)}}`;\n          break;\n        case \"carousel\":\n          styles += `.${prefix}${id} {${CarouselComponent(item.settings)}}`;\n          break;\n        case \"gallery\":\n          styles += `.${prefix}${id} {${GalleryComponent(item.settings)}}`;\n          break;\n        case \"divider\":\n          styles += `.${prefix}${id} {${DividerComponent(item.settings)}}`;\n          break;\n        case \"video\":\n          styles += `.${prefix}${id} {${VideoComponent(item.settings)}}`;\n          break;\n        case \"list\":\n          styles += `.${prefix}${id} {${ListComponent(item.settings)}}`;\n          break;\n        case \"accordion\":\n          styles += `.${prefix}${id} {${AccordionComponent(item.settings)}}`;\n          break;\n        case \"section\":\n          styles += `.${prefix}${id} {${SectionWidgetComponent(item.settings, item.childrenLength || 1)}}`;\n          break;\n        case \"section_widget\":\n          styles += `.${prefix}${id} {${SectionWidgetComponent(item.settings, item.childrenLength || 1)}}`;\n          break;\n        case \"column\":\n          styles += `.${prefix}${id} {${ColumnComponent(item.settings)}}`;\n          break;\n        case \"dropbar\":\n          styles += `.${prefix}${id} {${DropbarWidgetComponent(item.settings)}}`;\n          break;\n        case \"dashboard\":\n          styles+=`.${prefix}${id} {${DashboardComponent(item.settings)}}`;\n          break;\n        case \"image\":\n          styles+=getImageStyles(item.settings,id);\n          break;\n        case \"tabs\":\n          styles+=getTabsStyles(item.settings, id);\n          break;\n        case \"menu\":\n          styles+=getMenuStyles(item.settings,id);\n          break;\n        case \"breadcrumbs\":\n          styles+=getBreadcrumbsStyles(item.settings,id);\n          break;\n        case 'heading': {\n          styles += getHeadingTypeHeadingStyles(item.settings, id);\n        }\n          break;\n        case 'heading-type-animating': {\n          styles += getHeadingTypeAnimatingStyles(item.settings, id);\n        }\n          break;\n        case 'table': {\n          styles += getTableStyles(item.settings, id);\n        }\n          break;\n        case 'text': {\n          styles += getTextStyles(item.settings, id);\n        }\n          break;\n        case 'posts': {\n          styles += getPostsStyles(item.settings, id);\n        }\n          break;\n        case \"input-select2\": {\n          styles += `.${prefix}${id} {${FormComponent.FormComponent(\n            item.settings,\n            id\n          )}}`;\n          //select2 options style\n          styles += `${FormComponent.select2Options(item.settings, id)}}`;\n        }\n          break;\n        case \"input-date\": {\n          styles += InputDateComponent(\n            item.settings,\n            id,\n            prefix\n          );\n          styles += `${DatePickerComponent(\n            item.settings,\n            id,\n          )}`;\n        }\n          break\n        case \"input-checkbox\": {\n          styles += `.${prefix}${id} {${InputCheckboxComponent(\n            item.settings,\n            id\n          )}}`;\n        }\n          break\n        case \"input-slider\": {\n          styles += `.${prefix}${id} {${InputSliderComponent(\n            item.settings,\n          )}}`;\n        }\n          break\n        case \"input-range-slider\": {\n          styles += `.${prefix}${id} {${InputRangeSliderComponent(\n            item.settings,\n          )}}`;\n        }\n          break\n        case \"input-text-common\":{\n          styles += `.${prefix}${id} {${getInputTextCommonStyles(item.settings, id)}}`\n        }\n          break;\n        case \"input-select\":{\n          styles += `.${prefix}${id} {${getInputSelectStyles(item.settings, id)}}`\n          styles += `${getInputSelectPopoverStyles(item.settings, id)}`\n        }\n          break;\n        case \"input-multi-select\":{\n          styles += `.${prefix}${id} {${getInputMultiSelectStyles(item.settings, id)}}`\n          styles += `${getInputMultiSelectPopoverStyles(item.settings, id)}`\n        }\n          break;\n        case \"input-radio\": {\n          styles += InputRadioComponent(\n            item.settings,\n            id,\n            prefix\n          )\n        }break;\n        case \"input-text\":\n        case \"input-password\":\n        case \"input-number\":\n        case \"input-email\":\n        case \"input-tel\":\n        case \"input-file\":{\n          styles += `.${prefix}${id} {${getInputFileStyles(\n            item.settings,\n            id\n          )}}`;\n        }break\n        case \"input-gallery\":{\n          styles += `.${prefix}${id} {${getInputGalleryStyles(\n            item.settings,\n            id\n          )}}`;\n        }break\n        case \"template\":{\n          styles += `.${prefix}${id} {${getTemplateStyles(\n            item.settings,\n            id\n          )}}`;\n        }break\n        case \"input-image-select\":\n        case \"input-accept\":\n        case \"input-textarea\":\n        case \"input-wysiwyg\": {\n          styles += `.${prefix}${id} {${FormComponent.FormComponent(\n            item.settings,\n            id\n          )}}`;\n        }\n          break;\n        case \"map\":\n          styles += `.${prefix}${id} {${MapComponent(item.settings)}}`;\n          break;\n        case \"map_builder\":\n          styles += `.${prefix}${id} {${MapConstructorComponent(item.settings)}}`;\n          break;\n      }\n      styles += `div.${prefix}${id}.${prefix}${id} {${AdvancedComponent(\n        item.settings\n      )}}`;\n\n      const tooltip_show_type = item.settings.tooltip_show_type || \"never\";\n\n      if(tooltip_show_type !== \"never\") {\n        styles += `.altrp-tooltip${id} {${TooltipComponent(item.settings)}}`\n      }\n\n      let element_css_editor = getResponsiveSetting(item.settings, \"element_css_editor\");\n      if(_.isString(element_css_editor)){\n        styles+=element_css_editor.replace(/__selector__/g, `${prefix}${id}`)\n      }\n    }\n  });\n\n  styles += `} `;\n  window.globalDefaults && (styles += window.globalDefaults.join(''));\n  return styles;\n}}`\n\nfunction mapStateToProps(state) {\n  if(isEditor()){\n    return {};\n  }\n  return {\n    elementsSettings: state.elementsSettings,\n    areas: state.areas,\n    currentScreen: state.currentScreen,\n  };\n}\n\nexport default window.reactRedux.connect(mapStateToProps)(GlobalStyles)\n\n","import {getResponsiveSetting} from \"../../../../../../front-app/src/js/helpers\";\r\nimport {defaultStyled, sliderStyled, styledString} from \"../../../../../../front-app/src/js/helpers/styles\";\r\n\r\nexport default function DiagramComponent(settings) {\r\n  const styles = [\r\n    \"altrp-dashboard__tooltip--margin\",\r\n      [\"margin\", \"style_margin_tooltip\", \"dimensions\"],\r\n      [\"padding\", \"style_padding_tooltip\", \"dimensions\"],\r\n    \"}\",\r\n\r\n    \"altrp-dashboard__tooltip--width\",\r\n      [\"padding-top\", \"style_width_tooltip\"],\r\n    \"}\",\r\n\r\n    \"altrp-dashboard__tooltip--font\",\r\n      [\"\", \"style_font_tooltip\", \"typographic\"],\r\n    \"}\",\r\n\r\n    \"altrp-dashboard__tooltip--font-color\",\r\n      [\"color\", \"style_font_color_tooltip\", \"color\"],\r\n    \"}\",\r\n\r\n    \"altrp-dashboard__tooltip--label-background\",\r\n      [\"background-color\", \"style_background_color_tooltip\", \"color\"],\r\n    \"}\",\r\n\r\n    \"altrp-dashboard__tooltip--label-background-shadow\",\r\n      [\"background-color\", \"style_background_tooltip_shadow\", \"shadow\"],\r\n    \"}\",\r\n\r\n    \"altrp-dashboard__tooltip--border-type\",\r\n      [\"border-style\", \"border_type_tooltip\"],\r\n    \"}\",\r\n\r\n    \"altrp-dashboard__tooltip--border-width\",\r\n      [\"border-width\", \"border_width_tooltip\", \"dimensions\"],\r\n    \"}\",\r\n\r\n    \"altrp-dashboard__tooltip--border-color\",\r\n      [\"border-color\", \"border_color_tooltip\", \"color\"],\r\n    \"}\",\r\n\r\n    \"altrp-diagram\",\r\n      [\"width\", \"width\", \"slider\"],\r\n      [\"height\", \"height\", \"slider\"],\r\n    \"}\",\r\n\r\n    \"altrp-btn\",\r\n      [\"margin\", \"margin\", \"dimensions\"],\r\n    \"}\",\r\n  ];\r\n  return styledString(styles, settings)\r\n}\r\n","import appStore from \"./js/store/store\";\r\nimport AppContent from \"./js/components/AppContent\";\r\nimport { Provider } from \"react-redux\";\r\nimport {changeCurrentUser, setUserNotice, setUsersOnline} from \"./js/store/current-user/actions\";\r\nimport FontsManager from \"./js/components/FontsManager\";\r\nimport Echo from \"laravel-echo\";\r\nimport { HTML5Backend } from 'react-dnd-html5-backend'\r\nimport { DndProvider, } from 'react-dnd'\r\nconst {getRoutes, Resource} = window.altrpHelpers;\r\nimport GlobalStyles from \"./js/components/GlobalStyles\";\r\n\r\nclass FrontApp extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    window.frontApp = this;\r\n    this.getRoutes();\r\n    // this.onWidgetMount();\r\n    console.log('FRONT APP: ',performance.now());\r\n  }\r\n  getRoutes() {\r\n    return window.altrpHelpers.getRoutes().then(res => {\r\n      this.routes = res.default;\r\n    });\r\n  }\r\n\r\n  onWidgetMount(){\r\n    console.log(performance.now());\r\n    // if(this.timeoutId){\r\n    //   clearTimeout(this.timeoutId);\r\n    // }\r\n    // this.timeoutId = setTimeout(() =>{\r\n    // }, 100);\r\n  }\r\n\r\n  /**\r\n   * Обновляем текущего пользователя\r\n   */\r\n  async componentDidMount() {\r\n    new Resource({ route: '/ajax/' }).get('current-user').then(res=>{\r\n      if(! _.isEqual(appStore.getState().currentUser.getData(), res.data)){\r\n        appStore.dispatch(changeCurrentUser(res.data));\r\n      }\r\n    })\r\n    let pusherKey = await new Resource({ route: \"/admin/ajax/settings\" }).get(\"pusher_app_key\");\r\n    let websocketsPort = await new Resource({ route: \"/admin/ajax/settings\" }).get(\"websockets_port\");\r\n    let websocketsHost = await new Resource({ route: \"/admin/ajax/settings\" }).get(\"pusher_host\");\r\n\r\n    pusherKey = pusherKey?.pusher_app_key;\r\n    websocketsPort = websocketsPort?.websockets_port;\r\n    websocketsHost = websocketsHost?.pusher_host;\r\n\r\n    // Проверка наличия ключа и порта\r\n    if(pusherKey && websocketsPort){\r\n      try {\r\n        window.Pusher = require(\"pusher-js\");\r\n        window.Echo = new Echo({\r\n          broadcaster: \"pusher\",\r\n          key: pusherKey,\r\n          wsHost: websocketsHost,\r\n          wsPort: websocketsPort,\r\n          forceTLS: false,\r\n          disableStats: true,\r\n        });\r\n\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n      const {currentUser} = appStore.getState();\r\n      // Подключение слушателя канала\r\n      window.Echo.private(\"App.User.\" + currentUser.id)\r\n      .notification((notification) => {\r\n        // Запись пришедших по каналу уведомлений в appStore\r\n        appStore.dispatch(setUserNotice(notification));\r\n        console.log(appStore.getState().currentUser, 'STORE NOTICE');\r\n      });\r\n\r\n      // Подключение слушателя для получения users online\r\n      let presenceChannel = window.Echo.join(\"online\");\r\n      let activeUsers = [];\r\n      presenceChannel.here((users) => {\r\n        activeUsers = users;\r\n        appStore.dispatch(setUsersOnline(activeUsers));\r\n      })\r\n      .joining((user) => {\r\n        activeUsers.push(user);\r\n        appStore.dispatch(setUsersOnline(activeUsers));\r\n      })\r\n      .leaving((user) => {\r\n        activeUsers.splice(activeUsers.indexOf(user), 1);\r\n        appStore.dispatch(setUsersOnline(activeUsers));\r\n      });\r\n\r\n    } else {\r\n     console.log(\"Вебсокеты выключены\");\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Provider store={appStore}>\r\n        <DndProvider backend={HTML5Backend}>\r\n          <AppContent />\r\n        </DndProvider>\r\n        <FontsManager />\r\n        <GlobalStyles/>\r\n      </Provider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default window.__hot(module)(FrontApp);\r\n","import { getResponsiveSetting } from \"../helpers\";\n\nconst ALIGN_ITEMS = [\n  {\n    verticalAlignValues: [\"super\", \"top\", \"text-top\"],\n    alignItemsValue: \"flex-start\"\n  },\n  {\n    verticalAlignValues: [\"middle\"],\n    alignItemsValue: \"center\"\n  },\n  {\n    verticalAlignValues: [\"baseline\"],\n    alignItemsValue: \"baseline\"\n  },\n  {\n    verticalAlignValues: [\"sub\", \"bottom\", \"text-bottom\"],\n    alignItemsValue: \"flex-end\"\n  }\n];\n\n/**\n * Преобразейт значение css-свойства vertical-align в align-items\n * @param {string} verticalAlignValue\n * @return {string}\n */\nexport function verticalAlignToAlignItems(verticalAlignValue) {\n  let alignItemsValue = \"\";\n  ALIGN_ITEMS.forEach(items => {\n    if (items.verticalAlignValues.indexOf(verticalAlignValue) !== -1) {\n      alignItemsValue = items.alignItemsValue;\n    }\n  });\n  return alignItemsValue;\n}\n\n/**\n * Преобразует объект, который сохраняет контроллер dimension, в строку css  для вставки в styled-компонент\n * @param {{}} data - settings\n * @param {string} styleProperty - padding|margin|border-radius\n * @return {string}\n */\nexport function dimensionsControllerToStyles(\n  data = {},\n  styleProperty = \"padding\"\n) {\n  let styles = \"\";\n\n  if (_.isEmpty(data)) {\n    return styles;\n  }\n  const { left, top, right, bottom, unit } = data;\n  switch (styleProperty) {\n    case \"border-width\":\n      {\n        if (left) {\n          styles += `border-left-width: ${left}${unit}; `;\n        }\n        if (right) {\n          styles += `border-right-width: ${right}${unit}; `;\n        }\n        if (top) {\n          styles += `border-top-width: ${top}${unit}; `;\n        }\n        if (bottom) {\n          styles += `border-bottom-width: ${bottom}${unit}; `;\n        }\n      }\n      break;\n    case \"border-radius\":\n      {\n        if (top) {\n          styles += `border-top-left-radius: ${top}${unit}; `;\n        }\n        if (right) {\n          styles += `border-top-right-radius: ${right}${unit}; `;\n        }\n        if (bottom) {\n          styles += `border-bottom-right-radius: ${bottom}${unit}; `;\n        }\n        if (left) {\n          styles += `border-bottom-left-radius: ${left}${unit}; `;\n        }\n      }\n      break;\n    default:\n      {\n        if (left) {\n          styles += `${styleProperty}-left: ${left}${unit}; `;\n        }\n        if (right) {\n          styles += `${styleProperty}-right: ${right}${unit}; `;\n        }\n        if (top) {\n          styles += `${styleProperty}-top: ${top}${unit}; `;\n        }\n        if (bottom) {\n          styles += `${styleProperty}-bottom: ${bottom}${unit}; `;\n        }\n      }\n      break;\n  }\n\n  return styles;\n}\n\n/**\n * Преобразует объект, который сохраняет контроллер box-shadow, в строку css для вставки в styled-компонент\n * @param {{}} data\n * @param {string} declaration\n * @return {string}\n */\nexport function shadowControllerToStyles(data, declaration=\"\") {\n  let styles = \"\";\n\n  if (_.isEmpty(data)) {\n    return styles;\n  }\n\n  if(data) {\n    let {type = 'outline', offsetX,horizontal, offsetY, vertical, blurRadius,blur,spread, spreadRadius, color } = data;\n    let returnShadow = [offsetX, horizontal, offsetY, vertical, blurRadius, blur, spread, spreadRadius].filter(elem => (\n      (elem && elem !== 0)\n    ));\n    if(returnShadow.length !== 0) {\n      styles += `box-shadow: ${type || ' '} ${offsetX || horizontal || 0}px ${offsetY || vertical || 0}px ${blurRadius || blur || 0}px ${spreadRadius || spread || 0}px ${color} ${declaration}; `;\n    }\n  }\n  return styles;\n}\n\n/**\n * Преобразует объект, который сохраняет контроллер text-shadow, в строку css для вставки в styled-компонент\n * @param {{}} data\n * @return {string}\n */\nexport function textShadowControllerToStyles(data) {\n  if (data) {\n    const { blur, colorPickedHex, horizontal, opacity, vertical } = data;\n\n    return `text-shadow: ${horizontal}px ${vertical}px ${blur}px ${colorPickedHex}; `;\n  }\n\n  return \"\";\n}\n\n/**\n * Преобразует объект, который сохраняет контроллер Color, в строку css для вставки в styled-компонент\n * @param {{}} data\n * @param {string} pseudoClass\n * @return {string}\n */\nexport function backgroundColorControllerToStyles(data, pseudoClass) {\n  let styles = \"\";\n  if (_.isEmpty(data)) {\n    return styles;\n  }\n\n  if (data) {\n    let { colorPickedHex } = data;\n\n    if (pseudoClass !== undefined) {\n      return `&:${pseudoClass} {background-color: ${colorPickedHex};} `;\n    }\n\n    return `background-color: ${colorPickedHex}; `;\n  }\n\n  return styles;\n}\n\n/**\n * Преобразует объект, который сохраняет контроллер background-image, в строку css для вставки в styled-компонент\n * @param {{}} data\n * @return {string}\n */\nexport function backgroundImageControllerToStyles(data) {\n  let styles = \"\";\n\n  if (_.isEmpty(data) || data.url === null) {\n    return styles;\n  }\n\n  const { url } = data;\n\n  if(url) {\n    return `background-image: url('${url}'); `;\n  } else {\n    return \"\"\n  }\n}\n\n/**\n * Преобразует объект, который сохраняет контроллер Filters, в строку css сразу с селектором '& .altrp-image' для вставки в styled-компонент\n * @param {{}} data\n * @return {string}\n */\n\nexport function filtersControllerToStyles(data) {\n  let styles = \"\";\n  if (_.isEmpty(data)) {\n    return styles;\n  }\n\n  let {\n    blur = \"0\",\n    brightness = \"100\",\n    contrast = \"100\",\n    hue = \"0\",\n    saturate,\n    saturation\n  } = data;\n\n  return `filter: blur(${blur}px) brightness(${brightness}%) contrast(${contrast}%) saturate(${saturate ||\n    saturation ||\n    \"100\"}%) hue-rotate(${hue}deg); `;\n}\n\n/**\n * Преобразует значение одного из свойств, перечисленных ниже, в строку css для вставки в styled-компонент\n * Варианты принимаемых свойств: column-count, z-index, border-style\n * @param {string} style\n * @param {string} styleProperty\n * @param {string} declaration\n * @return {string}\n */\n\nexport function simplePropertyStyled(style, styleProperty, declaration = \"\") {\n  if (style) {\n\n    return `${styleProperty}: ${style + declaration}; `;\n  }\n\n  return \"\";\n}\n\n/**\n * Преобразует значение одного из свойств, перечисленных ниже, в строку css для вставки в styled-компонент\n * Варианты принимаемых свойств: color, background-color, border-color\n * @param {{}} data\n * @param {string} styleProperty\n * @param {string} declaration\n * @return {string}\n */\n\nexport function colorPropertyStyled(data, styleProperty, declaration = \"\") {\n  const { color } = data;\n\n  if (color) {\n    return `${styleProperty}: ${color + declaration}; `;\n  }\n\n  return \"\";\n}\n\n/**\n * Преобразует объект, который сохраняет значение background-color из контроллера creative_link_controller, в строку css для вставки в styled-компонент\n * @param {{}} data\n * @param {string} styleProperty\n * @return {string}\n */\n\nexport function backgroundCreativeLinkStyled(data) {\n  const { backgroundPickedHex } = data;\n\n  if (backgroundPickedHex) {\n    return `background-color: ${backgroundPickedHex}; `;\n  }\n\n  return \"\";\n}\n\n/**\n * Преобразует объект, который сохраняет контроллер column-gap, в строку css для вставки в styled-компонент\n * @param {{}} data\n * @return {string}\n */\n\nexport function columnGapStyled(data = {}) {\n  let styles = \"\";\n\n  if (_.isEmpty(data)) {\n    return styles;\n  }\n\n  const { size, unit } = data;\n\n  styles = `column-gap: ${size + unit}; `;\n\n  return styles;\n}\n\n/**\n * Преобразует объект, который сохраняет контроллер icon-size, в строку css для вставки в styled-компонент\n * @param {{}} data\n * @return {string}\n */\n\nexport function iconSizeStyled(data = {}) {\n  let styles = \"\";\n\n  if (_.isEmpty(data)) {\n    return styles;\n  }\n\n  const { size, unit } = data;\n\n  styles = `width: ${size + unit}; height: ${size + unit}; `;\n\n  return styles;\n}\n\n/**\n * Преобразует объект, который сохраняет контроллер Size | Icon Left Spacing | Icon Right Spacing | Top Translate | Left Translate,\n * в строку css для вставки в styled-компонент\n * @param {{}} data\n * @param {string} property\n * @return {string}\n */\n\nexport function sizeStyled(data = {}, property) {\n  let styles = \"\";\n\n  if (_.isEmpty(data) || data.size === undefined) {\n    return styles;\n  }\n\n  const { size, unit } = data;\n\n  if (\n    property === \"transition-duration\" ||\n    property === \"animation-duration\" ||\n    property === \"transition-delay\"\n  ) {\n    styles = `${property}: ${size}s; `;\n\n    return styles;\n  }\n\n  if(size) {\n    styles = `${property}: ${size + (unit || '')}; `;\n  }\n\n  return styles;\n}\n\n/**\n * Преобразует объект, который сохраняет контроллер height в строку css для вставки в styled-компонент\n * @param {{}} data\n * @return {string}\n */\n\nexport function heightCalcStyled(data = {}) {\n  let styles = \"\";\n\n  if (_.isEmpty(data) || data.size === undefined) {\n    return styles;\n  }\n\n  const { size, unit } = data;\n\n  styles = `height: calc${size + unit} * 2; `;\n\n  return styles;\n}\n\n/**\n * Преобразует объект, который сохраняет контроллер Translate, в строку css для вставки в styled-компонент\n * @param {{}} data\n * @return {string}\n */\n\nexport function translateStyled(data = {}) {\n  let styles = \"\";\n\n  if (_.isEmpty(data) || isNaN(data.size) || !data.size) {\n    return styles;\n  }\n\n  const { size, unit } = data;\n\n  styles = `transform: ${data.function}(${size + unit}); `;\n\n  return styles;\n}\n\n/**\n * Преобразует объект, который сохраняет контроллер transform rotate, в строку css для вставки в styled-компонент\n * @param {{}} data\n * @return {string}\n */\n\nexport function transformRotateStyled(data = {}) {\n  let styles = \"\";\n\n  if (_.isEmpty(data) || isNaN(data.size) || !data.size) {\n    return styles;\n  }\n\n  const { size } = data;\n\n  styles = `transform: rotate(${size}deg); `;\n\n  return styles;\n}\n\n/**\n * Преобразует объект, который сохраняет контроллер opacity, в строку css для вставки в styled-компонент\n * @param {string} style\n * @return {string}\n */\n\nexport function opacityStyled(style) {\n  if (style) {\n    return `opacity: ${style.size}; `;\n  } else return \"\";\n}\n\n/**\n * Преобразует объект, который сохраняет контроллер typographic, в строку css для вставки в styled-компонент\n * @param {{}} data\n * @return {string}\n */\nexport function typographicControllerToStyles(data = {}) {\n  let styles = \"\";\n\n  if (_.isEmpty(data)) {\n    return styles;\n  }\n\n  const {\n    family,\n    size,\n    lineHeight,\n    spacing,\n    style,\n    transform,\n    weight,\n    decoration,\n    sizeUnit,\n    lineHeightUnit\n  } = data;\n\n  if (decoration) {\n    styles += `text-decoration: ${decoration}; `;\n  }\n  if (transform) {\n    styles += `text-transform: ${transform}; `;\n  }\n  if (spacing) {\n    styles += `letter-spacing: ${spacing}px; `;\n  }\n  if (lineHeight) {\n    styles += `line-height: ${\n      lineHeightUnit ? lineHeight + lineHeightUnit : lineHeight\n    }; `;\n  }\n  if (weight) {\n    styles += `font-weight: ${weight}; `;\n  }\n  if (style) {\n    styles += `font-style: ${style}; `;\n  }\n  if (size) {\n    styles += `font-size: ${size ? size + (sizeUnit || \"px\") : \"\"}; `;\n  }\n  if (!_.isEmpty(family)) {\n    styles += `font-family: ${family}; `;\n  }\n  return styles;\n}\n\n/**\n * Преобразует объект, который сохраняет контроллер color, в строку css для вставки в styled-компонент\n * @return {string}\n * @param {{}} controller\n * @param {string} style\n * @param {string} important\n */\nexport function colorStyled(controller, style) {\n  if (controller) {\n    if (controller.color) {\n      return `${style}: ${controller.color};`;\n    } else return \"\";\n  } else return \"\";\n}\n\n/**\n * Преобразует объект, который сохраняет контроллер color, в строку css для вставки в styled-компонент\n * @return {string}\n * @param {{}} controller\n */\nexport function colorStyledSecond(controller) {\n  if (controller) {\n    if (controller.color) {\n      return `${controller.color}`;\n    } else return \"\";\n  } else return \"\";\n}\n\n/**\n * Преобразует объект, который сохраняет контроллер border-width, в строку css для вставки в styled-компонент\n * @param {{}} data\n * @param {string} declaration\n * @return {string}\n */\n\nexport function borderWidthStyled(data = {}, declaration = \"\") {\n  let styles = \"\";\n\n  if (_.isEmpty(data)) {\n    return styles;\n  }\n\n  const { bottom, left, right, top, unit = \"px\" } = data;\n\n  if (top && top !== \"\") {\n    styles += `border-top-width: ${top + unit + declaration}; `;\n  }\n\n  if (right && right !== \"\") {\n    styles += `border-right-width: ${right + unit + declaration}; `;\n  }\n\n  if (bottom && bottom !== \"\") {\n    styles += `border-bottom-width: ${bottom + unit + declaration}; `;\n  }\n\n  if (left && left !== \"\") {\n    styles += `border-left-width: ${left + unit + declaration}; `;\n  }\n\n  return styles;\n}\n\n/**\n * Преобразует объект, который сохраняет контроллер border-width, в строку css со свойством margin-top или margin-left с таким же значением, но отритцательным\n * @param {{}} data\n * @param {string} position\n * @return {string}\n */\n\nexport function marginTopLeftStyled(data = {}, position) {\n  let styles = \"\";\n\n  if (_.isEmpty(data)) {\n    return styles;\n  }\n\n  const { top, left, unit } = data;\n\n  if (top && top !== \"\" && position === \"top\") {\n    styles += `margin-top: -${top + unit}; `;\n  }\n\n  if (top && top !== \"\" && position === \"left\") {\n    styles += `margin-left: -${left + unit}; `;\n  }\n\n  return styles;\n}\n\n/**\n * Преобразует объект, который сохраняет контроллер border-radius, в строку css для вставки в styled-компонент\n * @param {{}} data\n * @return {string}\n */\n\n export function borderRadiusStyled(data = {},declaration=\"\") {\n  let styles = \"\";\n\n  if (_.isEmpty(data)) {\n    return styles;\n  }\n\n  const { size, unit } = data;\n\n  styles = `border-radius: ${size + unit + declaration}; `;\n\n  return styles;\n}\n\n/**\n * Преобразует объект, который сохраняет контроллер dimensions, в строку css для вставки в styled-компонент\n * @return {string}\n * @param {{}} controller\n * @param {string} style\n * @param {string} important\n */\n export function dimensionsStyled(controller, style, important = '') {\n  if (controller) {\n    const unit = controller.unit || \"px\";\n    const left = controller.left;\n    const right = controller.right;\n    const bottom = controller.bottom;\n    const top = controller.top;\n\n    let styles = \"\";\n\n    if(controller.left) {\n      switch (style) {\n        case \"padding\":\n          styles += `padding-left: ${left + unit + important};`\n          break;\n        case \"margin\":\n          styles += `margin-left: ${left + unit + important};`\n          break;\n        case \"border-radius\":\n          styles += `border-bottom-right-radius: ${left + unit + important};`\n          break;\n        case \"border-width\":\n          styles += `border-left-width: ${left + unit + important};`\n      }\n    }\n\n    if(controller.right) {\n      switch (style) {\n        case \"padding\":\n          styles += `padding-right: ${right + unit + important};`\n          break;\n        case \"margin\":\n          styles += `margin-right: ${right + unit + important};`\n          break;\n        case \"border-radius\":\n          styles += `border-top-right-radius: ${right + unit + important};`\n          break;\n        case \"border-width\":\n          styles += `border-right-width: ${right + unit + important};`\n      }\n    }\n\n    if(controller.top) {\n      switch (style) {\n        case \"padding\":\n          styles += `padding-top: ${top + unit + important};`\n          break;\n        case \"margin\":\n          styles += `margin-top: ${top + unit + important};`\n          break;\n        case \"border-radius\":\n          styles += `border-top-left-radius: ${top + unit + important};`\n          break;\n        case \"border-width\":\n          styles += `border-top-width: ${top + unit + important};`\n      }\n    }\n\n    if(controller.bottom) {\n      switch (style) {\n        case \"padding\":\n          styles += `padding-bottom: ${bottom + unit + important};`\n          break;\n        case \"margin\":\n          styles += `margin-bottom: ${bottom + unit + important};`\n          break;\n        case \"border-radius\":\n          styles += `border-bottom-left-radius: ${bottom + unit + important};`\n          break;\n        case \"border-width\":\n          styles += `border-bottom-width: ${bottom + unit + important};`\n      }\n    }\n\n    return styles\n  } else {\n    return \"\";\n  }\n}\n\n/**\n * Преобразует объект, который сохраняет контроллер gradient, в строку css для вставки в styled-компонент\n * @return {string}\n * @param {{}} controller\n */\nexport function gradientStyled(controller) {\n  if (controller && controller.isWithGradient) {\n    return `background-image: ${controller.value} `;\n  } else {\n    return \"\";\n  }\n}\n\n/**\n * проверяет наличичие значения select или number\n * @return {string}\n * @param {string} controller\n */\nexport function defaultStyled(controller) {\n  if (controller) {\n    return controller;\n  } else {\n    return \"\";\n  }\n}\n\n/**\n * проверяет наличичие значения slider\n * @return {string}\n * @param {{}} controller\n */\nexport function sliderStyled(controller) {\n  if (controller) {\n    if (controller.size) {\n      const unit = controller.unit || \"px\";\n      return controller.size + unit;\n    } else return \"\";\n  } else return \"\";\n}\n\n/**\n * проверяет наличичие значения shadow\n * @return {string}\n * @param {{}} controller\n * @param {string} important\n */\nexport function shadowStyled(controller = {}, important = '') {\n  if (controller) {\n    const type = controller.type || \"\";\n    const horizontal = controller.horizontal || 0;\n    const vertical = controller.vertical || 0;\n    const blur = controller.blur || 0;\n    const spread = controller.spread || 0;\n    const color = controller.color || \"\";\n\n    if(horizontal !== 0 || vertical !== 0 || blur !== 0 || spread !== 0) {\n      return `box-shadow: ${type} ${horizontal}px ${vertical}px ${blur}px ${spread}px ${color} ${important};`;\n    } else return \"\"\n  } else return \"\"\n}\n\n/**\n * проверяет наличичие значения text shadow\n * @return {string}\n * @param {{}} controller\n * @param {string} important\n */\nexport function textShadowStyled(controller = {}, important = '') {\n  if (controller) {\n    const horizontal = controller.horizontal || 0;\n    const vertical = controller.vertical || 0;\n    const blur = controller.blur || 0;\n    const color = controller.color || \"\";\n    if (horizontal || vertical || blur || color) {\n      return `text-shadow: ${horizontal}px ${vertical}px ${blur}px ${color} ${important};`;\n    } else {\n      return \"\";\n    }\n  } else {\n    return \"\";\n  }\n}\n\n/**\n * проверяет наличичие значения creative_media\n * @return {string}\n * @param {{}} controller\n */\nexport function creativeLinkStyled(controller = {}) {\n  if (controller) {\n    return ``;\n  } else {\n    return \"\";\n  }\n}\n\n/**\n * проверяет наличичие значения media, в основном используется для background-image\n * @return {string}\n * @param {{}} controller\n */\nexport function mediaStyled(controller = {}) {\n  if (controller?.url) {\n    return `background-image: url(\"${controller.url}\");`;\n  } else {\n    return \"\";\n  }\n}\n\n/**\n * принимает настройки виджета settings и принимает массив стилей для преобразования в строку css для styled-components\n * @return {string}\n * @param {[]} styles - массив стилей\n * @param {{}} settings - настройки виджета\n */\nexport function styledString(styles, settings) {\n  let stringStyles = \"\";\n  if(_.keys(settings).length !== 0) {\n    styles.forEach((style, idx) => {\n      if(_.isString(style)) {\n        if(style !== \"}\") {\n          if(style.split('')[0] === \".\" || style.split('')[0] === \"&\") {\n            stringStyles += `${style} {`;\n          } else if(style.split(\"\")[0] === \"!\") {\n            let styleModify = style.split(\"\");\n            styleModify.shift();\n            stringStyles += `${_.join(styleModify, \"\")}{`\n          } else {\n            stringStyles += `& .${style}{`;\n          }\n        } else {\n          stringStyles += `}`;\n        }\n      } else {\n        if (_.isArray(style)) {\n          const settingName = style[1];\n          const state = style[3] || \"\";\n          const variable = getResponsiveSetting(\n            settings,\n            settingName,\n            state,\n          );\n          switch (style[2]) {\n            case \"dimensions\":\n              stringStyles += dimensionsStyled(variable, style[0]);\n              break;\n            case \"color\":\n              stringStyles += colorStyled(variable, style[0]);\n              break;\n            case \"gradient\":\n              stringStyles += gradientStyled(variable);\n              break;\n            case \"typographic\":\n              stringStyles += typographicControllerToStyles(variable);\n              break;\n            case \"slider\":\n              if(sliderStyled(variable)) {\n                stringStyles += `${style[0]}:${sliderStyled(variable)};`;\n              }\n              break;\n            case \"shadow\":\n              stringStyles += shadowStyled(variable);\n              break;\n            case \"text-shadow\":\n              stringStyles += textShadowStyled(variable);\n              break;\n            case \"media\":\n              stringStyles += mediaStyled(variable);\n              break;\n            case \"creative-link\":\n              stringStyles += creativeLinkStyled(variable);\n              break;\n            default:\n              if (defaultStyled(variable)) {\n                stringStyles += `${style[0]}:${defaultStyled(\n                  variable\n                )};`;\n              }\n          }\n        }\n\n        if (_.isFunction(style)) {\n          if(style()) {\n            stringStyles += style();\n          }\n        }\n      }\n    });\n  }\n\n  return stringStyles;\n}\n"],"sourceRoot":""}