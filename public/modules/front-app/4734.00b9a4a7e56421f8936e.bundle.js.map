{"version":3,"sources":["webpack:///./resources/modules/editor/src/js/components/altrp-image/Skeleton.js","webpack:///./resources/modules/editor/src/js/components/altrp-image/ImagePlaceholder.js","webpack:///./resources/modules/editor/src/js/components/altrp-image/AltrpImage.js","webpack:///./resources/modules/front-app/src/js/components/FrontPopupWrapper.js","webpack:///./resources/modules/front-app/src/js/components/FrontPopup.js"],"names":["defaultBaseColor","SkeletonSpan","styled","duration","delay","keyframes","Math","floor","undefined","color","highlightColor","props","className","_","isNumber","width","settings","aspect_ratio_size","getResponsiveSetting","Number","height","indexOf","style","custom_aspect","isString","mediaWidth","mediaHeight","window","altrpHelpers","isEditor","isSSR","renderAsset","AltrpImage","imageRef","React","createRef","visible","element","lazy","altrpImageLazy","state","update","timeoutId","setTimeout","setState","clearTimeout","this","prevProps","prevState","current","getRoot","popupGUID","popupTrigger","popupID","scrollPosition","scroller","mainScrollbars","document","querySelector","checkElementInViewBox","media","image","noDefault","placeholderStyles","File","default","Object","keys","length","url","name","assetType","background","placeholder","main_color","ref","getSettings","altrpSkeletonColor","altrpSkeletonHighlightColor","cloneElement","id","Fragment","Component","reactRedux","connect","div","styles","layout_bg","get","width_popup_layout","size","unit","content_position_popup_layout","timeout","type_popup","height_custom_popup_layout","sliderStyled","popup_bg","popup_pa","dimensionsControllerToStyles","popup_border","popup_border_width","popup_radius","popup_border_color","animations_offcanvas","vertical_position_popup_layout","horizontal_position_popup_layout","topOffset","leftOffset","leftOffsetEnd","topOffsetEnd","top","left","right","bottom","close_pa","close_right","close_top","close_c","colorPropertyStyled","icon_fill","time_offcanvas","iconsManager","FrontPopup","close","isVisible","isShownOnScroll","closePopup","onExited","body","classList","remove","dispatchEvent","Event","onExit","rootElement","appContainer","getElementById","onEntered","onExiting","onEntering","transitionDuration","onEnter","add","ElementWrapper","frontElementsFabric","parseData","template","data","page","models","bind","classes","rootElementSettings","popup_close_icon","popup_close_icon_width_size","popup_close_icon_height_size","push","rootElementId","getId","close_context","overlayCondition","height_popup_layout","closeButtonCondition","popup_close_icon_alignment","closeButton","onClick","renderIcon","CSSTransition","in","unmountOnExit","classNames","join","e","stopPropagation","autoHide","renderThumbHorizontal","renderTrackHorizontal","renderTrackVertical","autoHideTimeout","autoHideDuration","createElement","componentClass","children","dispatch","togglePopup"],"mappings":"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","file":"4734.00b9a4a7e56421f8936e.bundle.js","sourcesContent":["import styled, { keyframes} from 'styled-components';\r\n\r\nexport const defaultBaseColor = \"#eee\";\r\n\r\nexport const defaultHighlightColor = \"#f5f5f5\";\r\n\r\nexport const skeletonKeyframes = (duration, delay) => keyframes`\r\n  0% {\r\n    background-position: -200px 0;\r\n  }\r\n  ${\r\n  delay > 0\r\n    ? `${Math.floor((1 / (duration + delay)) * duration * 100)}% {\r\n    background-position: calc(200px + 100%) 0;\r\n  }`\r\n    : undefined\r\n}\r\n  100% {\r\n    background-position: calc(200px + 100%) 0;\r\n  }\r\n`;\r\nconst SkeletonSpan = styled.span`\r\n  animation: ${skeletonKeyframes} 1.2s ease-in-out infinite;\r\n  background-color: ${({color})=>`${color || defaultBaseColor}`};\r\n  background-size: 200px 100%;\r\n  background-repeat: no-repeat;\r\n  background-image: linear-gradient(90deg, ${({highlightColor, color})=>{\r\n    return `${color || defaultBaseColor}, ${highlightColor || defaultHighlightColor}, ${color || defaultBaseColor}`;\r\n  }});\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  height: 100%;\r\n`;\r\nconst Skeleton = (props) => <div className={props.className}><SkeletonSpan {...props} className=\"altrp-skeleton__span\"/></div>\r\nexport default Skeleton;\r\n","import styled from 'styled-components';\r\nimport {getResponsiveSetting} from \"../../../../../front-app/src/js/helpers\";\r\n\r\nconst ImagePlaceholder = styled.div`& {\r\n  position: relative;\r\n  max-width: 100%;\r\n  overflow: hidden;\r\n  width:${props => {\r\n  if (_.isNumber(props.width)) {\r\n    return props.width + 'px';\r\n  }\r\n  return props.width ? props.width : '100%'\r\n}};\r\n${(props) => {\r\n  const {settings} = props;\r\n  const aspect_ratio_size = getResponsiveSetting(settings, 'aspect_ratio_size');\r\n  if(Number(aspect_ratio_size) !== 0 && aspect_ratio_size === 'custom'|| Number(aspect_ratio_size)){\r\n    return 'height:auto;'\r\n  }\r\n  if(! props.height || props.height.indexOf('%') !== -1) {\r\n    return 'height:auto;'\r\n  }\r\n  return `height:${props.height ? props.height : 'auto'};`;\r\n}}\r\n\r\n  background-color: ${props => props.color ? props.color : '#fff'};\r\n}\r\n&::before{\r\n  display: block;\r\n  content: '';\r\n  width: 100%;\r\n${(props) => {\r\n  const {settings, height} = props;\r\n  let style = '';\r\n  const aspect_ratio_size = getResponsiveSetting(settings, 'aspect_ratio_size');\r\n  if(Number(aspect_ratio_size) !== 0) {\r\n    if(aspect_ratio_size === 'custom') {\r\n      let custom_aspect = getResponsiveSetting(settings, 'custom_aspect');\r\n      custom_aspect = Number(custom_aspect) || 100;\r\n      style += `padding-top:${custom_aspect}%;`;\r\n    } else if(Number(aspect_ratio_size)){\r\n      style += `padding-top:${aspect_ratio_size}%;`;\r\n    }\r\n    return style;\r\n  }\r\n  if (height && _.isString(height) && height.indexOf('%') === -1) {\r\n    return style;\r\n  }\r\n  if (Number(props.mediaWidth) && Number(props.mediaHeight)) {\r\n    style += `padding-top:${(props.mediaHeight / props.mediaWidth) * 100}%;`\r\n  }\r\n  return style;\r\n}};\r\n}\r\n&& .altrp-skeleton,\r\n&& .altrp-image{\r\n  position:absolute;\r\n  top:0;\r\n  left:0;\r\n  right:0;\r\n  bottom:0;\r\n  height:100%;\r\n  width:100%;\r\n}\r\n`;\r\n\r\nexport default ImagePlaceholder;\r\n","import Skeleton from './Skeleton';\nimport ImagePlaceholder from \"./ImagePlaceholder\";\nimport {checkElementInViewBox} from \"../../../../../front-app/src/js/helpers/elements\";\nconst {isEditor, isSSR, renderAsset} = window.altrpHelpers;\n\nclass AltrpImage extends Component {\n  constructor(props) {\n    super(props);\n    this.imageRef = React.createRef();\n    let visible = true;\n    if(isSSR() && ! props.element?.getResponsiveSetting('lazyload_disable')){\n      visible = false;\n    } else if (isEditor() || props.lazy === false) {\n\n    } else if (window.altrpImageLazy\n        && window.altrpImageLazy !== 'none'\n        && props.element\n        && ! props.element?.getResponsiveSetting('lazyload_disable')) {\n      visible = false;\n    }\n    this.state = {\n      visible,\n      update: 0,\n    };\n    this.timeoutId = setTimeout(() => this.setState(state => ({...state, update: state.update++})), 500);\n  }\n\n  /**\n   * очищаем обновление\n   */\n  componentWillUnmount() {\n    clearTimeout(this.timeoutId);\n  }\n\n  /**\n   * Проверим нужно ли обновить видимость\n   * @param {{}} prevProps\n   * @param {{}} prevState\n   */\n\n  componentDidUpdate(prevProps, prevState) {\n    if(this.state.visible){\n      clearTimeout(this.timeoutId);\n    }\n    if (this.state.visible || ! this.imageRef.current) {\n      return;\n    }\n    if(this.props?.element?.getRoot()?.popupGUID && this.props.element.getRoot().popupGUID === this.props.popupTrigger.popupID){\n      this.setState(state => ({...state, visible: true}));\n    }\n    if (prevProps.scrollPosition === this.props.scrollPosition && prevState.update === this.state.update) {\n      return;\n    }\n    let scroller = window.mainScrollbars;\n    if(! scroller){\n      scroller = document.querySelector('.front-app-content');\n    }\n    if(! scroller){\n      scroller = document.querySelector('.front-app');\n    }\n    if (this.imageRef.current && checkElementInViewBox(this.imageRef.current, scroller)) {\n      clearTimeout(this.timeoutId);\n      this.setState(state => ({...state, visible: true}));\n    }\n  }\n\n  render() {\n    let media = {...this.props.image};\n    const {visible} = this.state;\n    const noDefault = this.props.noDefault || false;\n    const placeholderStyles = {};\n\n    let width = this.props.width;\n\n    let height = this.props.height;\n    if (! isSSR() && this.props.image instanceof File) {\n      media = this.props.image\n    } else {\n      if (this.props.default) {\n        if ((Object.keys(media).length === 0)) {\n          media = this.props.default;\n        }\n      } else if (noDefault) {\n        return \"\"\n      } else {\n        media.url = media.url || '/img/nullImage.png';\n        media.name = media.name || 'null';\n        media.assetType = media.assetType || undefined;\n      }\n    }\n    let image = renderAsset(media);\n    if(visible || window.altrpImageLazy === 'skeleton'){\n      placeholderStyles.background = 'transparent';\n    }\n\n    let placeholder = <ImagePlaceholder color={media.main_color}\n                                        className={'altrp-image-placeholder '}\n                                        ref={this.imageRef}\n                                        settings={this.props.element?.getSettings() || {}}\n                                        height={height}\n                                        width={width}\n                                        style={placeholderStyles}\n                                        mediaWidth={media.width || 100}\n                                        mediaHeight={media.height || 75}>\n      {window.altrpImageLazy === 'skeleton'\n        && ! visible\n        &&\n          <Skeleton className=\"altrp-skeleton\"\n                    color={window.altrpSkeletonColor}\n                    highlightColor={window.altrpSkeletonHighlightColor}/>\n\n      }\n      {visible && React.cloneElement(image, {\n        className: this.props.className,\n        id: this.props.id || null,\n        style: this.props.style,\n      })}\n      </ImagePlaceholder>;\n\n    return <React.Fragment>\n      {placeholder}\n    </React.Fragment>\n  }\n}\n\nlet _export;\nif (isEditor()) {\n  _export = AltrpImage;\n} else {\n\n  function mapStateToProps(state) {\n    return {\n      scrollPosition: state.scrollPosition,\n      popupTrigger: state.popupTrigger,\n    };\n  }\n\n  _export = window.reactRedux.connect(mapStateToProps)(AltrpImage)\n}\nexport default _export;\n","const {getResponsiveSetting} = window.altrpHelpers;\nimport {\n  shadowControllerToStyles,\n  dimensionsControllerToStyles,\n  sliderStyled,\n  colorPropertyStyled\n} from '../helpers/styles';\n\n\nconst FrontPopupWrapper = window.styled.div`\n&{\n  overflow: hidden;\n${({settings}) => {\n  let styles = \"\";\n  const layout_bg = getResponsiveSetting(settings, 'layout_bg')\n  styles += `background-color:${_.get(layout_bg, 'color', 'rgba(0,0,0,0.7)')};`\n  return styles\n}\n}\n& .popup-content {\n  ${({settings}) => {\n  let styles = \"\";\n  const height_custom_popup_layout = getResponsiveSetting(settings, 'height_custom_popup_layout')\n  if (height_custom_popup_layout) {\n\n  }\n  if (settings.width_popup_layout && settings.width_popup_layout.size)\n    styles += `width: ${settings.width_popup_layout.size} ${settings.width_popup_layout.unit};`;\n\n  return styles;\n}}\n}\n& .popup-window > .popup-scrollbar > div{\n  ${({settings}) => {\n  let styles = \"\";\n  const content_position_popup_layout = getResponsiveSetting(settings, 'content_position_popup_layout')\n  if (content_position_popup_layout && content_position_popup_layout !== 'flex-start') {\n    styles += `align-items:${content_position_popup_layout};`\n    styles += `display:flex;`\n  }\n  return styles;\n}}\n}\n&& .popup-window{\n  ${({settings}) => {\n  let styles = \"\";\n\n  let timeout = _.get(getResponsiveSetting(settings, 'time'), 'size', 0)\n  const type_popup = getResponsiveSetting(settings, 'type_popup')\n  if (type_popup === 'popup') {\n    timeout = 0\n  }\n  if (timeout != 0) {\n    styles += `transition-duration: ${timeout}ms;`\n  }\n  const height_custom_popup_layout = getResponsiveSetting(settings, 'height_custom_popup_layout')\n  if (height_custom_popup_layout) {\n    styles += `height:${sliderStyled(height_custom_popup_layout)};`\n  }\n  const content_position_popup_layout = getResponsiveSetting(settings, 'content_position_popup_layout')\n  if (content_position_popup_layout) {\n    styles += `justify-content:${content_position_popup_layout};`\n  }\n  const width_popup_layout = getResponsiveSetting(settings, 'width_popup_layout')\n  if (width_popup_layout) {\n    styles += `width:${sliderStyled(width_popup_layout)};`\n  }\n\n  const popup_bg = getResponsiveSetting(settings, 'popup_bg')\n  if (popup_bg) {\n    styles += `background-color:${popup_bg.color};`\n  }\n  const popup_pa = getResponsiveSetting(settings, 'popup_pa')\n  if (popup_pa) {\n    styles += dimensionsControllerToStyles(popup_pa, 'padding')\n  }\n  const popup_border = getResponsiveSetting(settings, 'popup_border')\n  if (popup_border) {\n    styles += `border-style:${popup_border};`\n  }\n  const popup_border_width = getResponsiveSetting(settings, 'popup_border_width')\n  if (popup_border_width) {\n    styles += dimensionsControllerToStyles(popup_border_width, 'border-width')\n  }\n  const popup_radius = getResponsiveSetting(settings, 'popup_radius')\n  if (popup_radius) {\n    styles += dimensionsControllerToStyles(popup_radius, 'border-radius')\n  }\n  const popup_border_color = getResponsiveSetting(settings, 'popup_border_color')\n  if (popup_border_color) {\n    styles += `border-color:${popup_border_color.color};`\n  }\n  const animations_offcanvas = getResponsiveSetting(settings, 'animations_offcanvas')\n  timeout = _.get(getResponsiveSetting(settings, 'time'), 'size', 0)\n  if (timeout && type_popup === 'popup' && animations_offcanvas === 'slide') {\n    styles += `transition-duration:${timeout}ms;`\n  }\n  return styles;\n}}\n  max-height: 100%;\n  max-width: 100%;\n}\n& .popup-close-button .altrp-image-placeholder svg{\n  width: 100%;\n  height: 100%;\n  display: block;\n}\n&.popup-transition-state{\n${({settings}) => {\n  let styles = '';\n  const vertical_position_popup_layout = getResponsiveSetting(settings, 'vertical_position_popup_layout')\n  const horizontal_position_popup_layout = getResponsiveSetting(settings, 'horizontal_position_popup_layout')\n  /**\n   * @var s_direction\n   * @type {string}\n   */\n  const s_direction = getResponsiveSetting(settings, 's_direction') || 'left'\n  let topOffset = '0';\n  let leftOffset = '0';\n  let leftOffsetEnd = '0';\n  let topOffsetEnd = '0';\n  // if(vertical_position_popup_layout === 'top' || vertical_position_popup_layout === 'bottom') {\n  //   topOffset = '0'\n  // } else {\n  //   topOffset = '-50%'\n  // }\n\n  if(horizontal_position_popup_layout === 'center') {\n    leftOffsetEnd = '-50%'\n  }\n  if(vertical_position_popup_layout === 'center') {\n    topOffsetEnd = '-50%'\n  }\n  switch (s_direction) {\n    case 'left': {\n      if(horizontal_position_popup_layout === 'center') {\n        leftOffset = '-100%'\n      } else {\n        leftOffset = '-50%'\n      }\n      topOffset = topOffsetEnd\n    } break;\n    case 'top': {\n      topOffset = '-50%'\n      leftOffset = leftOffsetEnd\n    } break;\n    case 'right': {\n      if(horizontal_position_popup_layout === 'center') {\n        leftOffset = '0'\n      } else {\n        leftOffset = '50%'\n      }\n      topOffset = topOffsetEnd\n    } break;\n    case 'bottom': {\n      topOffset = '50%'\n      leftOffset = leftOffsetEnd\n    } break;\n  }\n\n  styles += `&-exit-active .popup-window.popup-window.popup-window.popup-window{\n      opacity: 0;\n      transform: translate(${leftOffset}, ${topOffset});\n    }\n    &-enter .popup-window.popup-window.popup-window.popup-window{\n      opacity: 0;\n      transform: translate(${leftOffset}, ${topOffset});\n    }\n    &-enter-active .popup-window.popup-window.popup-window.popup-window{\n      opacity: 1;\n      transform: translate(${leftOffsetEnd}, ${topOffsetEnd});\n    }`/*\n    `\n    &-enter-done .popup-window.popup-window.popup-window{\n      transform: translate(${leftOffsetEnd}, ${topOffsetEnd});\n    }`*/\n  return styles\n}}\n}\n&.app-popup_offcanvas .popup-window{\n${({settings}) => {\n  let styles = ''\n  const type_popup = getResponsiveSetting(settings, 'type_popup')\n  if (type_popup !== 'offcanvas') {\n    return styles\n  }\n  let top = 0, left = 0, right = 'auto', bottom = 'auto';\n  const horizontal_position_popup_layout = getResponsiveSetting(settings, 'horizontal_position_popup_layout')\n  const vertical_position_popup_layout = getResponsiveSetting(settings, 'vertical_position_popup_layout')\n\n  switch (vertical_position_popup_layout) {\n    case 'bottom': {\n      bottom = 0\n      top = 'auto'\n    }\n      break;\n    case 'center': {\n      styles += 'height:100%;';\n    }\n      break;\n  }\n  switch (horizontal_position_popup_layout) {\n    case 'right': {\n      right = 0\n      left = 'auto'\n    }\n      break;\n    case 'center': {\n      styles += 'width:100%;';\n    }\n      break;\n  }\n  styles += `top:${top};left:${left};right:${right};bottom:${bottom};`\n  return styles\n}}\n}\n&&& .popup-close-button{\n  padding: 0;\n  ${({settings}) => {\n  let styles = ''\n  const close_pa = getResponsiveSetting(settings, 'close_pa')\n  if (close_pa) {\n    styles += dimensionsControllerToStyles(close_pa, 'padding')\n  }\n  const close_right = getResponsiveSetting(settings, 'close_right')\n  if (close_right) {\n    styles += `right:${sliderStyled(close_right)};`\n  }\n  const close_top = getResponsiveSetting(settings, 'close_top')\n  if (close_top) {\n    styles += `top:${sliderStyled(close_top)};`\n  }\n  let close_c = getResponsiveSetting(settings, 'close_c');\n  if (close_c) {\n    styles += colorPropertyStyled(close_c, 'background-color')\n  }\n  close_c = getResponsiveSetting(settings, 'close_c', '.active');\n  if (close_c) {\n    styles += `&:active{${colorPropertyStyled(close_c, 'background-color')}}`\n  }\n  close_c = getResponsiveSetting(settings, 'close_c', ':hover');\n  if (close_c) {\n    styles += `&:hover{${colorPropertyStyled(close_c, 'background-color')}}`\n  }\n  let icon_fill = getResponsiveSetting(settings, 'icon_fill');\n  if (icon_fill) {\n    styles += `& svg *{${colorPropertyStyled(icon_fill, 'fill')}}`\n  }\n  icon_fill = getResponsiveSetting(settings, 'icon_fill', ':hover');\n  if (icon_fill) {\n    styles += `&:hover svg *{${colorPropertyStyled(icon_fill, 'fill')}}`\n  }\n  icon_fill = getResponsiveSetting(settings, 'icon_fill', '.active');\n  if (icon_fill) {\n    styles += `&:active svg *{${colorPropertyStyled(icon_fill, 'fill')}}`\n  }\n  return styles;\n}\n}\n& .altrp-offcanvas {\n  ${({settings}) => {\n  let styles = '';\n  if (settings.time_offcanvas && settings.time_offcanvas.size) {\n    styles += `animation-duration: ${settings.time_offcanvas.size}${settings.time_offcanvas.unit} !important;`\n  }\n  return styles;\n}}\n}\n`\n\nexport default FrontPopupWrapper;\n","import {CSSTransition} from \"react-transition-group\";\n\nconst {iconsManager} = window.altrpHelpers\nimport { Scrollbars } from \"react-custom-scrollbars\";\nimport { togglePopup } from \"../store/popup-trigger/actions\";\nimport AltrpImage from \"../../../../editor/src/js/components/altrp-image/AltrpImage\";\nimport FrontPopupWrapper from \"./FrontPopupWrapper\";\nimport '../../sass/altrp-popup.scss'\n\nclass FrontPopup extends Component {\n  constructor(props) {\n    super(props);\n    this.ElementWrapper = props.ElementWrapper || window.ElementWrapper;\n    this.state = {\n      isVisible: false,\n      rootElement: window.frontElementsFabric.parseData(\n        this.props.template.data,\n        null,\n        this.props.page,\n        this.props.models\n      ),\n      isShownOnScroll: false\n    };\n    this.close = this.close.bind(this);\n  }\n\n\n\n  componentDidUpdate(prevProps) {\n    let { popupTrigger } = this.props;\n    switch (this.state.rootElement.getSettings(\"type_popup\", \"popup\")) {\n      case \"popup\":\n        if (popupTrigger !== prevProps.popupTrigger) {\n          this.setState({\n            isVisible:\n              popupTrigger.popupID === _.get(this.props, \"template.guid\")\n          });\n        }\n        break;\n      case \"offcanvas\":\n        if (popupTrigger !== prevProps.popupTrigger) {\n          this.setState({\n            isVisible:\n              popupTrigger.popupID === _.get(this.props, \"template.guid\")\n          });\n        }\n        break;\n    }\n  }\n\n  close = ()=> {\n    this.setState({ isVisible: false, isShownOnScroll: false });\n    this.props.closePopup();\n  }\n  onExited = ()=> {\n    document.body.classList.remove('overflow-hidden');\n    window.dispatchEvent(new Event('resize'));\n  }\n  onExit = ()=>{\n    const rootElement = this.state.rootElement;\n    const type_popup = rootElement.getResponsiveSetting('type_popup')\n    const animations_offcanvas = rootElement.getResponsiveSetting('animations_offcanvas')\n    const appContainer = document.getElementById('front-app')\n    const vertical_position_popup_layout = rootElement.getResponsiveSetting('vertical_position_popup_layout')\n    const horizontal_position_popup_layout = rootElement.getResponsiveSetting('horizontal_position_popup_layout')\n    if(type_popup === 'offcanvas' && animations_offcanvas === 'push' ) {\n      switch (vertical_position_popup_layout) {\n        case 'top':{\n          appContainer.style.top = 0\n          appContainer.style.bottom = 'auto'\n        }break;\n        case 'bottom':{\n          appContainer.style.bottom = 0\n          appContainer.style.top = 'auto'\n        }break;\n      }\n      switch (horizontal_position_popup_layout) {\n        case 'left':{\n          appContainer.style.left = 0\n          appContainer.style.right = 'auto'\n        }break;\n        case 'right':{\n          appContainer.style.right = 0\n          appContainer.style.left = 'auto'\n        }break;\n      }\n    }\n  }\n  onEntered = ()=>{\n  }\n  onExiting = ()=>{\n  }\n  onEntering = ()=>{\n    const rootElement = this.state.rootElement;\n    const type_popup = rootElement.getResponsiveSetting('type_popup')\n    const animations_offcanvas = rootElement.getResponsiveSetting('animations_offcanvas')\n    const vertical_position_popup_layout = rootElement.getResponsiveSetting('vertical_position_popup_layout')\n    const width_popup_layout = rootElement.getResponsiveSetting('width_popup_layout')\n    const height_custom_popup_layout = rootElement.getResponsiveSetting('height_custom_popup_layout')\n    const appContainer = document.getElementById('front-app')\n    const horizontal_position_popup_layout = rootElement.getResponsiveSetting('horizontal_position_popup_layout')\n    if(type_popup === 'offcanvas' && animations_offcanvas === 'push'){\n      appContainer.style.transitionDuration =  _.get(rootElement.getResponsiveSetting('time'), 'size', 0) + 'ms'\n      switch (vertical_position_popup_layout) {\n        case 'top':{\n          appContainer.style.top = height_custom_popup_layout?.size + (height_custom_popup_layout?.unit || 'px')\n          appContainer.style.bottom = 'auto'\n        }break;\n        case 'bottom':{\n          appContainer.style.bottom = height_custom_popup_layout?.size + (height_custom_popup_layout?.unit || 'px')\n          appContainer.style.top = 'auto'\n        }break;\n      }\n      switch (horizontal_position_popup_layout) {\n        case 'left':{\n          appContainer.style.left = width_popup_layout?.size + (width_popup_layout?.unit || 'px')\n          appContainer.style.right = 'auto'\n        }break;\n        case 'right':{\n          appContainer.style.right = width_popup_layout?.size + (width_popup_layout?.unit || 'px')\n          appContainer.style.left = 'auto'\n        }break;\n      }\n    }\n  }\n  onEnter = ()=> {\n    document.body.classList.add('overflow-hidden');\n    window.dispatchEvent(new Event('resize'));\n    const rootElement = this.state.rootElement;\n    const type_popup = rootElement.getResponsiveSetting('type_popup')\n    const animations_offcanvas = rootElement.getResponsiveSetting('animations_offcanvas')\n    const vertical_position_popup_layout = rootElement.getResponsiveSetting('vertical_position_popup_layout')\n    const appContainer = document.getElementById('front-app')\n    const horizontal_position_popup_layout = rootElement.getResponsiveSetting('horizontal_position_popup_layout')\n    if(type_popup === 'offcanvas' && animations_offcanvas === 'push' ) {\n      switch (vertical_position_popup_layout) {\n        case 'top':{\n          appContainer.style.top = 0\n          appContainer.style.bottom = 0\n        }break;\n        case 'bottom':{\n          appContainer.style.bottom = 0\n          appContainer.style.top = 0\n        }break;\n      }\n      switch (horizontal_position_popup_layout) {\n        case 'left':{\n          appContainer.style.left = 0\n          appContainer.style.right = 0\n        }break;\n        case 'right':{\n          appContainer.style.right = 0\n          appContainer.style.left = 0\n        }break;\n      }\n    }\n  }\n\n  render() {\n    const { isVisible } = this.state;\n    let classes = [`app-popup`];\n    const rootElement = this.state.rootElement;\n    rootElement.popupGUID = _.get(this.props, \"template.guid\");\n    const rootElementSettings = rootElement.getSettings(\"\");\n    let  popup_close_icon =  rootElement.getResponsiveSetting('popup_close_icon')\n    let  popup_close_icon_width_size =  rootElement.getResponsiveSetting('popup_close_icon_width_size')\n    let  popup_close_icon_height_size =  rootElement.getResponsiveSetting('popup_close_icon_height_size')\n    if(! popup_close_icon_height_size){\n      popup_close_icon_height_size = '50px'\n    } else {\n      popup_close_icon_height_size = `${popup_close_icon_height_size.size || '0'}${popup_close_icon_height_size.unit}`\n    }\n\n    if(! popup_close_icon_width_size){\n      popup_close_icon_width_size = '50px'\n    } else {\n      popup_close_icon_width_size = `${popup_close_icon_width_size.size || '0'}${popup_close_icon_width_size.unit}`\n    }\n    const type_popup = rootElement.getResponsiveSetting('type_popup')\n    if(type_popup === 'offcanvas'){\n      classes.push(\"app-popup_offcanvas\")\n    }\n    const rootElementId = rootElement.getId();\n    const close_context = rootElement.getResponsiveSetting( 'close_context')\n\n    classes.push(`${rootElementId}-app-popup`);\n    const overlayCondition =\n      rootElement.getResponsiveSetting('overlay_close_popup_layout');\n\n    if (overlayCondition) {\n      classes.push(\"app-popup-overlay\");\n    }\n\n    //height popup\n    switch (rootElementSettings.height_popup_layout) {\n      case \"fitToScreen\":\n        classes.push(\"app-popup-height-fit-to-screen\");\n        break;\n      case \"custom\":\n        classes.push(\"app-popup-height-custom\");\n        break;\n    }\n\n    //horizontal position horizontal_position_popup_layout\n    switch (rootElementSettings.horizontal_position_popup_layout) {\n      case \"left\":\n        classes.push(\"app-popup-horizontal-left\");\n        break;\n      case \"center\":\n        classes.push(\"app-popup-horizontal-center\");\n        break;\n      case \"right\":\n        classes.push(\"app-popup-horizontal-right\");\n        break;\n      default:\n        classes.push(\"app-popup-horizontal-center\");\n    }\n\n    //vertical position vertical_position_popup_layout\n    switch (rootElementSettings.vertical_position_popup_layout) {\n      case \"top\":\n        classes.push(\"app-popup-vertical-top\");\n        break;\n      case \"center\":\n        classes.push(\"app-popup-vertical-center\");\n        break;\n      case \"bottom\":\n        classes.push(\"app-popup-vertical-bottom\");\n        break;\n      default:\n        classes.push(\"app-popup-vertical-center\");\n    }\n\n    const closeButtonCondition =\n      rootElement.getResponsiveSetting('switcher_close_button_popup_layout');\n    let { popup_close_icon_alignment } = rootElementSettings;\n    popup_close_icon_alignment = popup_close_icon_alignment || \"right\";\n    const closeButton = closeButtonCondition ? (\n      <button\n        className={\n          \"popup-close-button\" +\n          (popup_close_icon_alignment === \"right\"\n            ? \" popup-close-button-right\"\n            : \" popup-close-button-left\")\n        }\n        onClick={() => {\n          this.setState({ isVisible: false });\n          this.props.closePopup();\n        }}\n      >\n        <AltrpImage\n          image={popup_close_icon}\n          lazy={false}\n          width={popup_close_icon_width_size}\n          height={popup_close_icon_height_size}\n          default={{\n            assetType: \"icon\",\n            name: \"deleteOne\",\n            url: \"/img/nullImage.png\"\n          }}\n          className=\"popup-close-button-icon\"\n        />\n      </button>\n    ) : (\n      <button\n        className={\n          \"popup-close-button\" +\n          (popup_close_icon_alignment === \"right\"\n            ? \" popup-close-button-right\"\n            : \" popup-close-button-left\")\n        }\n        onClick={() => {\n          this.setState({ isVisible: false });\n          this.props.closePopup();\n        }}\n      >\n        {iconsManager().renderIcon('times' ,{\n          width:popup_close_icon_width_size,\n          height:popup_close_icon_height_size,\n          className: \"popup-close-button-icon\"\n        })}\n      </button>\n    );\n    classes.push(\n      `${type_popup || 'popup'}-${rootElement.getResponsiveSetting('horizontal_position_popup_layout') || 'center'}-${rootElement.getResponsiveSetting('vertical_position_popup_layout') || 'center'}-${rootElement.getResponsiveSetting('animations_offcanvas') || 'animations_offcanvas'}`\n    );\n    const animations_offcanvas = rootElement.getResponsiveSetting('animations_offcanvas')\n\n    let timeout = _.get(rootElement.getResponsiveSetting('time'), 'size', 0)\n    if(type_popup === 'popup' && timeout && animations_offcanvas === 'slide'){\n      classes.push(`popup-slide-direction_${rootElement.getResponsiveSetting('s_direction') || 'left'}`);\n    }\n\n    return (\n    <CSSTransition\n      in={isVisible}\n      timeout={Number(timeout)}\n      onEnter={this.onEnter}\n      onEntering={this.onEntering}\n      onEntered={this.onEntered}\n      onExit={this.onExit}\n      onExiting={this.onExiting}\n      onExited={this.onExited}\n      unmountOnExit={true}\n      classNames=\"popup-transition-state\">\n      <FrontPopupWrapper\n        settings={rootElementSettings}\n        className={classes.join(\" \")}\n        onClick={() => {\n          if (\n            overlayCondition\n          ) {\n            this.setState({ isVisible: false });\n            this.props.closePopup();\n          }\n        }}\n      >\n        {close_context === 'window' && closeButton}\n        <div\n          className=\"popup-window\"\n          // style={{ top: positioning_custom_top.size + positioning_custom_top.unit}}\n          onClick={e => e.stopPropagation()}\n        >\n          {close_context !== 'window' && closeButton}\n          <Scrollbars\n            autoHide\n            renderThumbHorizontal={props => (\n              <div {...props} className=\"popup-scrollbar-vertical\" />\n            )}\n            renderTrackHorizontal={() => (\n              <div className=\"popup-scrollbar-track-horizontal\" />\n            )}\n            renderTrackVertical={props => (\n              <div {...props} className=\"popup-scrollbar-track-vertical\" />\n            )}\n            className=\"popup-scrollbar\"\n            autoHideTimeout={1000}\n            autoHideDuration={200}\n          >\n            <div className=\"popup-content\">\n              {React.createElement(rootElement.componentClass, {\n                element: rootElement,\n                ElementWrapper :this.ElementWrapper,\n                children: rootElement.children\n              })}\n            </div>\n          </Scrollbars>\n        </div>\n      </FrontPopupWrapper>\n    </CSSTransition>\n  );\n\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    scrollPosition: state.scrollPosition,\n    popupTrigger: state.popupTrigger\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    closePopup: () => dispatch(togglePopup(null))\n  };\n};\n\nexport default window.reactRedux.connect(mapStateToProps, mapDispatchToProps)(FrontPopup);\n"],"sourceRoot":""}