{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/@babel/runtime/helpers/esm/get.js","webpack:///./node_modules/@babel/runtime/helpers/esm/superPropBase.js","webpack:///./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack:///./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack:///./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack:///./resources/modules/front-app/src/js/helpers.js","webpack:///./resources/modules/front-app/src/js/store/altrp-page-state-storage/actions.js","webpack:///./resources/modules/front-app/src/js/store/current-user/actions.js","webpack:///./resources/modules/front-app/src/js/store/responses-storage/actions.js","webpack:///./node_modules/dot-prop-immutable/lib/index.js"],"names":["_arrayLikeToArray","arr","len","length","i","arr2","Array","_arrayWithHoles","isArray","_assertThisInitialized","self","ReferenceError","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","_get","target","property","receiver","Reflect","get","base","object","prototype","hasOwnProperty","call","getPrototypeOf","desc","getOwnPropertyDescriptor","_getPrototypeOf","o","setPrototypeOf","__proto__","_inherits","subClass","superClass","TypeError","create","constructor","_iterableToArray","iter","Symbol","iterator","from","_nonIterableRest","_possibleConstructorReturn","_setPrototypeOf","p","_slicedToArray","arrayWithHoles","_i","_s","_e","_arr","_n","_d","next","done","push","err","unsupportedIterableToArray","nonIterableRest","_toArray","_toConsumableArray","arrayLikeToArray","iterableToArray","_typeof","_unsupportedIterableToArray","minLen","n","toString","slice","name","test","defaultTitle","getRoutes","isSSR","window","SSR","e","iconsManager","setTitle","title","titleElement","document","innerHTML","isEditor","path","location","pathname","includes","parseOptionsFromSettings","string","options","split","_optionsFromData","getDataByPath","extractPathFromString","_","map","option","valuePath","trim","label","isString","labelPath","getMediaQueryByName","screenSettingName","mediaQuery","CONSTANTS","screen","getMediaSettingsByName","_screen","getCurrentBreakpoint","currentWidth","getWindowWidth","item","size","Number","width","breakpoint","parseURLTemplate","URLTemplate","url","protocol","assign","cloneDeep","currentRouterMatch","getProperty","indexOf","replaceContentWithData","replace","idTemplates","match","forEach","idTemplate","RegExp","getElementById","offsetWidth","renderAssetIcon","asset","props","type","assetType","renderIcon","React","createElement","src","renderAsset","isEmpty","dataUrl","rawSVG","File","refImg","createRef","fr","FileReader","readAsDataURL","onload","current","result","alt","ref","style","backgroundImage","undefined","parseParamsFromString","context","allowObject","replaceRight","AltrpModel","params","urlParams","lines","line","left","right","isObject","conditionsChecker","conditions","AND","model","dataByPath","each","c","conditionChecker","operator","modelField","altrpCompare","setDataByPath","dispatch","oldValue","appStore","getState","altrpPageState","isEqual","isFunction","changePageState","altrpMeta","changeAltrpMeta","currentUser","changeCurrentUserProperty","formId","fieldName","formsStore","changeFormFieldValue","pathElements","elementId","updateType","propName","component","getComponentByElementId","join","element","updateSetting","settings","mutate","addSettings","getId","getName","areaName","area","page_areas","find","id","Area","setSetting","currentStorage","getDataFromLocalStorage","set","saveDataToLocalStorage","trueValue","falseValue","_default","altrpCheck","_path","_right","currentModel","currentDataStorage","altrpresponses","altrpPage","queryData","queryString","href","query","getData","getTimeValue","getSettings","getSetting","getObjectByPrefix","prefix","mbParseJSON","JSON","parse","leftValue","rightValue","CONDITIONS_OPTIONS","isElementTopInViewport","top","scrollTop","clientHeight","getTopPosition","offsetTop","offsetParent","defaultValue","now","startOfMonth","Date","startOfYear","getPrevWeekStart","getNextWeekStart","getWeekStart","moment","altrpHelpers","format","date","monthShift","getFullYear","getMonth","yearShift","startOfWeek","weekShift","getDate","firstDayOfWeek","getCurrentStoreState","scrollToElement","scrollbars","container","HTMLElement","scroll","getOffsetTopInElement","parent","getHTMLElementById","elements","el","elementWrapperRef","getWrapperHTMLElementByElement","today","daystoMonday","isoWeekday","add","subtract","daystoLastMonday","clearEmptyProps","content","modelContext","paths","escapeRegExp","printElements","myWindow","open","write","headContent","bodyContent","HTMLHeadElement","outerHTML","close","head","body","focus","delay","then","print","elementsToPdf","filename","html2pdf","default","success","Promise","resolve","reject","save","dataFromTable","data","headers","querySelectorAll","table","querySelector","ths","th","innerText","rows","row","cells","part","header","idx","dataToCSV","toPairs","csvContent","h","stringify","blob","Blob","charset","link","setAttribute","URL","createObjectURL","appendChild","click","removeChild","dataToXLS","templateName","formData","FormData","append","fetch","method","response","dataToXML","altrpLogin","Resource","route","post","res","status","__status","addResponseData","_token","getAll","changeCurrentUser","routes","routesData","pages","_data","Route","changeAppRoutes","console","error","altrpLogout","cutString","maxLength","sortOptions","sortDirection","sort","a","b","toLowerCase","reverse","recurseCount","count","array","getAppContext","currentModelData","setProperty","storeWidgetState","widgetId","state","getWidgetState","localStorage","setItem","getItem","scrollbarWidth","scrollDiv","clientWidth","setAltrpIndex","altrpIndex","renderFontLink","font","altrpFontsSet","GOOGLE_FONT","fontUrl","encodeURI","rel","isAltrpTestMode","altrpRandomId","Math","random","substr","generateButtonsArray","pageIndex","pageCount","first_last_buttons_count","middle_buttons_count","buttonsSum","lastButtons","middleButtons","floor","keys","isValueMatchMask","mask","every","char","index","getConverter","data_type","ArrayConverter","DataConverter","convertData","converter","isHidden","icon","defaultIcon","className","redirect","linkSettings","frontAppRouter","history","goBack","back","preventDefault","stopPropagation","openInNew","tag","validateEmail","email","String","getResponsiveSetting","settingName","currentScreen","elementState","trace","_settingName","setting","suffix","valueReplacement","ms","setTimeout","prepareURLForEmail","origin","parseIDFromYoutubeURL","youtubeURL","startIndex","endIndex","substring","prepareContext","altrpdata","altrpmodel","altrpuser","altrppagestate","altrpmeta","isJSON","JSONString","parseStringValue","getBreadcrumbsItems","breadcrumbsItems","items","currentId","page_id","currentPageId","appRoutes","breadcrumbsClone","idCurrent","parent_page_id","getParent","parentId","altrphelpers","sumFields","sum","this","CHANGE_PAGE_STATE","CLEAR_PAGE_STATE","stateName","stateValue","CHANGE_CURRENT_USER","SET_NOTICE_FOR_USER","SET_USERS_ONLINE","CHANGE_CURRENT_USER_PROPERTY","user","ADD_RESPONSE_DATA","CLEAR_ALL_RESPONSE_DATA","prop","propToArray","setPropImmutableRec","clone","getArrayIndex","max","Error","parseInt","reduce","ret","list","last","prev","pop","module","exports","delete","deletePropImmutableRec","concat","toggle","curVal","Boolean","merge","val"],"mappings":"gGAAe,SAASA,EAAkBC,EAAKC,IAClC,MAAPA,GAAeA,EAAMD,EAAIE,UAAQD,EAAMD,EAAIE,QAE/C,IAAK,IAAIC,EAAI,EAAGC,EAAO,IAAIC,MAAMJ,GAAME,EAAIF,EAAKE,IAC9CC,EAAKD,GAAKH,EAAIG,GAGhB,OAAOC,E,oECPM,SAASE,EAAgBN,GACtC,GAAIK,MAAME,QAAQP,GAAM,OAAOA,E,oECDlB,SAASQ,EAAuBC,GAC7C,QAAa,IAATA,EACF,MAAM,IAAIC,eAAe,6DAG3B,OAAOD,E,oECLM,SAASE,EAAgBC,EAAKC,EAAKC,GAYhD,OAXID,KAAOD,EACTG,OAAOC,eAAeJ,EAAKC,EAAK,CAC9BC,MAAOA,EACPG,YAAY,EACZC,cAAc,EACdC,UAAU,IAGZP,EAAIC,GAAOC,EAGNF,E,mHCXM,SAASQ,EAAKC,EAAQC,EAAUC,GAiB7C,OAfEH,EADqB,oBAAZI,SAA2BA,QAAQC,IACrCD,QAAQC,IAER,SAAcJ,EAAQC,EAAUC,GACrC,IAAIG,ECLK,SAAwBC,EAAQL,GAC7C,MAAQP,OAAOa,UAAUC,eAAeC,KAAKH,EAAQL,IAEpC,QADfK,GAAS,EAAAI,EAAA,GAAeJ,MAI1B,OAAOA,EDDQ,CAAcN,EAAQC,GACjC,GAAKI,EAAL,CACA,IAAIM,EAAOjB,OAAOkB,yBAAyBP,EAAMJ,GAEjD,OAAIU,EAAKP,IACAO,EAAKP,IAAIK,KAAKP,GAGhBS,EAAKlB,SAIJO,EAAQC,EAAUC,GAAYF,K,mCElB7B,SAASa,EAAgBC,GAItC,OAHAD,EAAkBnB,OAAOqB,eAAiBrB,OAAOgB,eAAiB,SAAyBI,GACzF,OAAOA,EAAEE,WAAatB,OAAOgB,eAAeI,KAEvBA,G,mHCHV,SAASG,EAAUC,EAAUC,GAC1C,GAA0B,mBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIC,UAAU,sDAGtBF,EAASX,UAAYb,OAAO2B,OAAOF,GAAcA,EAAWZ,UAAW,CACrEe,YAAa,CACX7B,MAAOyB,EACPpB,UAAU,EACVD,cAAc,KAGdsB,IAAY,OAAeD,EAAUC,K,mCCb5B,SAASI,EAAiBC,GACvC,GAAsB,oBAAXC,QAAmD,MAAzBD,EAAKC,OAAOC,WAA2C,MAAtBF,EAAK,cAAuB,OAAOxC,MAAM2C,KAAKH,G,oECDvG,SAASI,IACtB,MAAM,IAAIR,UAAU,6I,8HCCP,SAASS,EAA2BzC,EAAMqB,GACvD,OAAIA,GAA2B,YAAlB,OAAQA,IAAsC,mBAATA,GAI3C,OAAsBrB,GAHpBqB,I,mCCJI,SAASqB,EAAgBhB,EAAGiB,GAMzC,OALAD,EAAkBpC,OAAOqB,gBAAkB,SAAyBD,EAAGiB,GAErE,OADAjB,EAAEE,UAAYe,EACPjB,IAGcA,EAAGiB,G,yICFb,SAASC,EAAerD,EAAKG,GAC1C,OAAO,EAAAmD,EAAA,GAAetD,ICLT,SAA+BA,EAAKG,GACjD,IAAIoD,EAAY,MAAPvD,EAAc,KAAyB,oBAAX8C,QAA0B9C,EAAI8C,OAAOC,WAAa/C,EAAI,cAE3F,GAAU,MAANuD,EAAJ,CACA,IAIIC,EAAIC,EAJJC,EAAO,GACPC,GAAK,EACLC,GAAK,EAIT,IACE,IAAKL,EAAKA,EAAGzB,KAAK9B,KAAQ2D,GAAMH,EAAKD,EAAGM,QAAQC,QAC9CJ,EAAKK,KAAKP,EAAG1C,QAETX,GAAKuD,EAAKxD,SAAWC,GAH4BwD,GAAK,IAK5D,MAAOK,GACPJ,GAAK,EACLH,EAAKO,EACL,QACA,IACOL,GAAsB,MAAhBJ,EAAW,QAAWA,EAAW,SAC5C,QACA,GAAIK,EAAI,MAAMH,GAIlB,OAAOC,GDtBuB,CAAqB1D,EAAKG,KAAM,EAAA8D,EAAA,GAA2BjE,EAAKG,KAAM,EAAA+D,EAAA,O,mHEDvF,SAASC,EAASnE,GAC/B,OAAO,OAAeA,KAAQ,OAAgBA,KAAQ,OAA2BA,KAAQ,W,wGCD5E,SAASoE,EAAmBpE,GACzC,OCJa,SAA4BA,GACzC,GAAIK,MAAME,QAAQP,GAAM,OAAO,EAAAqE,EAAA,GAAiBrE,GDGzC,CAAkBA,KAAQ,EAAAsE,EAAA,GAAgBtE,KAAQ,EAAAiE,EAAA,GAA2BjE,IELvE,WACb,MAAM,IAAIyC,UAAU,wIFIwE,K,mCGL/E,SAAS8B,EAAQ3D,GAa9B,OATE2D,EADoB,mBAAXzB,QAAoD,iBAApBA,OAAOC,SACtC,SAAiBnC,GACzB,cAAcA,GAGN,SAAiBA,GACzB,OAAOA,GAAyB,mBAAXkC,QAAyBlC,EAAI+B,cAAgBG,QAAUlC,IAAQkC,OAAOlB,UAAY,gBAAkBhB,IAI9GA,G,mHCZF,SAAS4D,EAA4BrC,EAAGsC,GACrD,GAAKtC,EAAL,CACA,GAAiB,iBAANA,EAAgB,OAAO,OAAiBA,EAAGsC,GACtD,IAAIC,EAAI3D,OAAOa,UAAU+C,SAAS7C,KAAKK,GAAGyC,MAAM,GAAI,GAEpD,MADU,WAANF,GAAkBvC,EAAEQ,cAAa+B,EAAIvC,EAAEQ,YAAYkC,MAC7C,QAANH,GAAqB,QAANA,EAAoBrE,MAAM2C,KAAKb,GACxC,cAANuC,GAAqB,2CAA2CI,KAAKJ,IAAW,OAAiBvC,EAAGsC,QAAxG,K,2rFC6DEM,E,43DAhDG,SAASC,IAEd,OAAO,6EAGF,SAASC,IACd,IACE,OAAOC,OAAOC,IACd,MAAOC,GACP,OAAO,GAMJ,SAASC,IACd,OAAOH,OAAOG,aAOT,SAASC,EAASC,GACvB,IAAIC,EAAeC,SAASF,MACvBR,IACHA,EAAeS,EAAaE,WAEzBH,IACHA,EAAQR,GAENU,SAASF,QAAUA,IACrBE,SAASF,MAAQA,GAOd,SAASI,IAAW,MACnBC,EAAI,UAAGV,OAAOW,gBAAV,aAAG,EAAiBC,SAC9B,OAAOF,aAAA,EAAAA,EAAMG,SAAS,oBAAoB,EAarC,SAASC,EAAyBC,GACvC,IAAKA,EACH,MAAO,GAET,IAAIC,EAAUD,EAAOE,MAAM,MAEvBC,EAAmBC,GADZC,GAAsBL,IAEjC,OAAIM,EAAEhG,QAAQ6F,GACLA,EAETF,EAAUA,EAAQM,KAAI,SAAAC,GACpB,IAAI3F,EAAQ2F,EAAON,MAAM,KAAK,GAE1BO,EAAYJ,GADhBxF,EAAQA,EAAM6F,QAEVD,IACF5F,EAAQuF,GAAcK,IAExB,IAAIE,EAAQH,EAAON,MAAM,KAAK,IAAMrF,GAAS,IAC5CyF,EAAEM,SAASD,KAAWA,EAAQ,IAE/B,IAAIE,EAAYR,GADhBM,EAAQA,EAAMD,QAKd,OAHIG,IACFF,EAAQP,GAAcS,IAEjB,CACLhG,QACA8F,YAWC,SAASG,EAAoBC,GAClC,IAAIC,EAAa,GAMjB,OALAC,2BAA0B,SAAAC,GACpBA,EAAOtC,OAASmC,IAClBC,EAAaE,EAAOF,eAGjBA,EAOF,SAASG,EAAuBJ,GACrC,IAAIG,EAASD,qBAMb,OALAA,2BAA0B,SAAAG,GACpBA,EAAQxC,OAASmC,IACnBG,EAASE,MAGNF,EAMF,SAASG,IACd,IADqC,EAC/BC,EAAeC,IADgB,IAEjBN,kBACiBV,KAAI,SAAAiB,GAAI,MAAK,CAChD5C,KAAM4C,EAAK5C,KACX6C,KAAMC,OAAOF,EAAKG,MAAMzB,MAAM,MAAM,SALD,IAOrC,2BAAyC,KAAhC0B,EAAgC,QACvC,GAAIA,EAAWH,KAAOH,EACpB,OAAOM,EAAWhD,MATe,+BAiBhC,SAASiD,IAAkD,IAAjCC,EAAiC,uDAAnB,GAAIpG,EAAe,uDAAN,KACtDqG,EAAMD,EACNE,EAAW,GACVtC,MACHhE,EAAS4E,EAAE2B,OACT3B,EAAE4B,UAAUC,mBAAmBC,YAAY,WAC3C1G,KAIuB,KAD3BqG,EAAMA,EAAIrB,QACF2B,QAAQ,QACdN,EAAMO,GAAuBP,EAAKrG,IAEJ,IAA5BqG,EAAIM,QAAQ,cACdL,EAAW,WACXD,EAAMA,EAAIQ,QAAQ,WAAY,KAED,IAA3BR,EAAIM,QAAQ,aACdL,EAAW,UACXD,EAAMA,EAAIQ,QAAQ,UAAW,KAEA,IAA3BR,EAAIM,QAAQ,aACdL,EAAW,UACXD,EAAMA,EAAIQ,QAAQ,UAAW,KAEH,IAAxBR,EAAIM,QAAQ,UACdL,EAAW,OACXD,EAAMA,EAAIQ,QAAQ,OAAQ,KAG5B,IAAIC,EAAcT,EAAIU,MAAM,sBAC5B,OAAKD,GAGLA,EAAYE,SAAQ,SAAAC,GAClB,IAAIJ,EAAU7G,EAAOiH,EAAWJ,QAAQ,QAAS,MAAQ,GACzDI,EAAaA,EAAWJ,QAAQ,IAAK,IACrCR,EAAMA,EAAIQ,QAAQ,IAAIK,OAAOD,EAAY,KAAMJ,MAE1CP,EAAWD,GAPTC,EAAWD,EAUf,SAASR,IAOd,OALI7B,IACOF,SAASqD,eAAe,gBAAgBC,YAExCtD,SAASqD,eAAe,aAAaC,YAK3C,SAASC,EAAgBC,GAAqB,IAAdC,EAAc,uDAAN,KAC7C,GAAID,EAAO,CACT,GAAIA,EAAMjB,KAAsB,QAAfiB,EAAME,KACrB,OAAO,oBAAC,KAAD,UAAcD,EAAd,CAAqBlB,IAAKiB,EAAMjB,OAEzC,OAAQiB,EAAMG,WACZ,IAAK,OACH,OAAO/D,IAAegE,WAAWJ,EAAMpE,MAEzC,IAAK,QAGL,IAAK,QACH,OAAOyE,MAAMC,cAAc,MAApB,OAAgCL,GAAhC,IAAuCM,IAAKP,EAAMjB,QAI/D,MAAO,GASF,SAASyB,EAAYR,GAAqB,IAAdC,EAAc,uDAAN,KACzC,GAAG3C,EAAEmD,QAAQT,GACX,MAAQ,GAEV,GAAkB,UAAfA,EAAME,MAAoBF,EAAMU,QACjC,OAAOL,MAAMC,cAAc,MAApB,OACFL,GADE,IAELM,IAAKP,EAAMU,WAGf,GAAIV,EAAMjB,KAAsB,QAAfiB,EAAME,KACrB,OAAO,oBAAC,KAAD,UAAcD,EAAd,CAAqBlB,IAAKiB,EAAMjB,IAAK4B,OAAQX,EAAMW,UAE5D,IAAM3E,KAAWgE,aAAiBY,KAAM,CACtC,IAAIC,EAASR,MAAMS,YACfC,EAAK,IAAIC,WAQb,OAPAD,EAAGE,cAAcjB,GACjBe,EAAGG,OAAS,WACNL,EAAOM,UACTN,EAAOM,QAAQZ,IAAMQ,EAAGK,OACxBP,EAAOM,QAAQE,IAAMrB,EAAMpE,OAGxByE,MAAMC,cAAc,MAApB,OACFL,GADE,IAELM,IAAKP,EAAMjB,IACXuC,IAAKT,KAGT,OAAQb,EAAMG,WACZ,IAAK,OACH,OAAO/D,IAAegE,WAAWJ,EAAMpE,KAAMqE,GAE/C,IAAK,QAGL,IAAK,QACH,OAAOI,MAAMC,cAAc,MAApB,OAAgCL,GAAhC,IAAuCM,IAAKP,EAAMjB,OAE3D,IAAK,kBACH,OAAOsB,MAAMC,cAAc,MAApB,OACFL,GADE,IAELsB,MAAO,CAAEC,gBAAiB,OAAF,OAASxB,EAAMjB,IAAf,SAG5B,UAAK0C,EACH,OAAOpB,MAAMC,cAAc,MAApB,OACFL,GADE,IAELM,IAAK,wBAIX,MAAO,GAaF,SAASmB,EACd1E,GAKA,IAJA2E,EAIA,uDAJU,GACVC,EAGA,wDAFAC,IAEA,yDADAtC,IACA,yDACMoC,aAAmBG,MACvBH,EAAU,IAAIG,IAAWH,IAE3B,IAAMI,EAAS,GACTC,EACJ/F,OAAOkD,8BAA8B2C,IACjC7F,OAAOkD,mBAAmBC,YAAY,UACtC,GAEN,IAAKpC,EACH,OAAO+E,EAET,IAAME,EAAQjF,EAAOE,MAAM,MA6C3B,OA5CA+E,EAAMvC,SAAQ,SAAAwC,GACZ,MAAoBA,EAAKhF,MAAM,KAA/B,eAAKiF,EAAL,KAAWC,EAAX,KACKD,GAASC,IAGdD,EAAOA,EAAKzE,OACZ0E,EAAQA,EAAM1E,OACV6B,IAAmC,IAAxB4C,EAAK9C,QAAQ,QAC1B8C,EAAO7C,GAAuB6C,IAE5B5C,GAAW6C,EAAM3C,MAAM,uBAEvBkC,EAAQvC,YACNgD,EAAM3C,MAAM,uBAAuB,GAAGF,QAAQ,KAAM,MAEtDnC,GAAcgF,EAAM3C,MAAM,uBAAuB,GAAGF,QAAQ,KAAM,KAGlEwC,EAAOI,GACLR,EAAQvC,YACNgD,EAAM3C,MAAM,uBAAuB,GAAGF,QAAQ,KAAM,MAEtDnC,GACEgF,EAAM3C,MAAM,uBAAuB,GAAGF,QAAQ,KAAM,MAEtD,GAGGwC,EAAOI,GADZN,EACoBG,EACdI,EAAM3C,MAAM,uBAAuB,GAAGF,QAAQ,KAAM,KAElDyC,EACEI,EAAM3C,MAAM,uBAAuB,GAAGF,QAAQ,KAAM,KAEtD,GACY6C,EAGtBL,EAAOI,GAAQC,GAEZR,GAAetE,EAAE+E,SAASN,EAAOI,YAC7BJ,EAAOI,OAGXJ,EAWF,SAASO,IAKd,IAJAC,EAIA,uDAJa,GACbC,IAGA,yDAFAC,EAEA,uCADAC,IACA,yDACA,IAAKH,EAAWtL,OACd,OAAO,EAET,IAAImK,EAASoB,EAQb,OAPAlF,EAAEqF,KAAKJ,GAAY,SAAAK,GACbJ,EACFpB,GAAUyB,EAAiBD,EAAGH,EAAOC,GAErCtB,GAAUyB,EAAiBD,EAAGH,EAAOC,QAGhCtB,EAUX,SAASyB,EAAiBD,EAAGH,GAA0B,IAAnBC,IAAmB,yDAE7CI,EAAaF,EAAbE,SACUX,EAAgBS,EAA5BG,WAAkBlL,EAAU+K,EAAV/K,MACxB,OAAI6K,GACF7K,EAAQuF,GAAcvF,EAAO,GAAI4K,GAAO,GAEjCO,GADPb,EAAO/E,GAAc+E,EAAM,GAAIM,GACL5K,EAAOiL,IAE5BE,GAAaP,EAAMrD,YAAY+C,GAAOtK,EAAOiL,GAqC/C,SAASG,IAAiD,IAAnCtG,EAAmC,uDAA5B,GAAI9E,EAAwB,uCAAjBqL,EAAiB,uDAAN,KACzD,IAAKvG,EACH,OAAO,EAET,IAA2B,IAAvBA,EAAK0C,QAAQ,KAIf,OAHa1C,EACVO,MAAM,KACNK,KAAI,SAAAZ,GAAI,OAAIsG,EAActG,EAAM9E,EAAOqL,OACnC,EAIT,OADAvG,GADAA,EAAOA,EAAK4C,QAAQ,KAAM,IAAIA,QAAQ,KAAM,KAChC7B,OACJ7F,GACN,IAAK,OACHA,GAAQ,EACR,MACF,IAAK,QACHA,GAAQ,EACR,MACF,IAAK,OACHA,EAAQ,KACR,MACF,IAAK,YACHA,OAAQ4J,EAIZ,GAAwC,IAApC9E,EAAK0C,QAAQ,mBAA0B,CAEzC,KADA1C,EAAOA,EAAK4C,QAAQ,kBAAmB,KAErC,OAAO,EAET,IAAM4D,EAAWC,SAASC,WAAWC,eAAelE,YAAYzC,GAChE,OAAIW,EAAEiG,QAAQJ,EAAUtL,KAGpByF,EAAEkG,WAAWN,GACfA,GAASO,QAAgB9G,EAAM9E,IAE/BuL,SAASF,UAASO,QAAgB9G,EAAM9E,MALjC,EASX,GAAmC,IAA/B8E,EAAK0C,QAAQ,cAAqB,CAEpC,KADA1C,EAAOA,EAAK4C,QAAQ,aAAc,KAEhC,OAAO,EAET,IAAM4D,EAAWC,SAASC,WAAWK,UAAUtE,YAAYzC,GAC3D,OAAIW,EAAEiG,QAAQJ,EAAUtL,KAGpByF,EAAEkG,WAAWN,GACfA,GAASS,QAAgBhH,EAAM9E,IAE/BuL,SAASF,UAASS,QAAgBhH,EAAM9E,MALjC,EASX,GAAiD,IAA7C8E,EAAK0C,QAAQ,4BAAmC,CAElD,KADA1C,EAAOA,EAAK4C,QAAQ,aAAc,KAEhC,OAAO,EAET,IAAM4D,EAAWC,SAASC,WAAWO,YAAYxE,YAAYzC,GAC7D,OAAIW,EAAEiG,QAAQJ,EAAUtL,KAGpByF,EAAEkG,WAAWN,GACfA,GAASW,QAA0BlH,EAAM9E,IAEzCuL,SAASF,UAASW,QAA0BlH,EAAM9E,MAL3C,EASX,GAAoC,IAAhC8E,EAAK0C,QAAQ,eAAsB,CAErC,KADA1C,EAAOA,EAAK4C,QAAQ,cAAe,KAEjC,OAAO,EAET,MAA4B5C,EAAKO,MAAM,KAAvC,eAAO4G,EAAP,KAAeC,EAAf,KACA,EAAuBX,SAASC,WAAxBW,EAAR,EAAQA,WAEFb,EAAW7F,EAAE9E,IAAIwL,EAAYrH,GACnC,GAAIW,EAAEiG,QAAQJ,EAAUtL,GACtB,OAAO,EAELyF,EAAEkG,WAAWN,GACfA,GAASe,QAAqBtH,EAAM9E,IAEpCuL,SAASF,UAASe,QAAqBF,EAAWlM,EAAOiM,GAAQ,SAGrE,GAAuC,IAAnCnH,EAAK0C,QAAQ,kBAAyB,CACxC,IAAM6E,EAAevH,EAAKO,MAAM,KAChC,UAAmDgH,GAAtCC,GAAb,WAAwBC,EAAxB,KAAuCC,EAAvC,WACMC,EAAYC,GAAwBJ,GAC1C,IAAKG,EACH,OAAO,EAGT,OADAD,EAAYA,EAASG,KAAK,KAClBJ,GACN,IAAK,WAEH,GADAE,EAAUrE,MAAMwE,QAAQC,cAAc7M,EAAOwM,GAC1CpI,OAAO,WAAW,CACnB,IAAI0I,EAAWL,EAAUrE,MAAMwE,QAAQE,SACvCA,EAAWC,QAAWD,EAAUN,EAAUxM,GAC1CuL,SAASF,UAAS2B,QAAYP,EAAUrE,MAAMwE,QAAQK,QAASR,EAAUrE,MAAMwE,QAAQM,UAAWJ,IAEpG,OAAO,EAET,QACE,OAAO,QAIb,GAAoC,IAAhChI,EAAK0C,QAAQ,eAAsB,CACrC,IAAM6E,EAAevH,EAAKO,MAAM,KAChC,UAAmDgH,EAAnD,GAAgBc,GAAhB,WAA2BZ,EAA3B,KAAuCC,EAAvC,KACIY,EAAOhJ,OAAOiJ,WAAWC,MAAK,SAAAF,GAAI,OAAIA,EAAKG,KAAOJ,KACnDC,GAAuB,aAAfb,IACHa,aAAgBI,MACpBJ,EAAOI,gBAAiBJ,IAE1BA,EAAKK,WAAWjB,EAAUxM,SAG9B,GAAsC,IAAlC8E,EAAK0C,QAAQ,iBAAwB,CACvC1C,EAAOA,EAAK4C,QAAQ,gBAAiB,IACrC,IAAMgG,EAAiBC,GAAwB,eAAgB,IAG/D,OAFAlI,EAAEmI,IAAIF,EAAgB5I,EAAM9E,GAC5B6N,GAAuB,eAAgBH,IAChC,EAET,OAAO,EAWF,SAASnI,KAKd,IAcIuI,EAAWC,EAlBfjJ,EAIA,uDAJO,GACPkJ,EAGA,uDAHW,KACXlE,EAEA,uDAFU,KACVmE,EACA,wDACA,IAAKnJ,EACH,OAAOkJ,EAQT,IAN4B,IAAxBlJ,EAAK0C,QAAQ,QACf1C,EAAO2C,GAAuB3C,EAAMgF,IAKlCmE,GAA+C,IAAjCnJ,EAAKe,OAAO2B,QAAQ,SACpC,OAAO1C,EAIT,IAA2B,KAF3BA,EAAOA,EAAKe,QAEH2B,QAAQ,OAAsC,IAAvB1C,EAAK0C,QAAQ,KAAa,CACxD,MAAsB1C,EAAKO,MAAM,KAAjC,eAAK6I,EAAL,KAAYC,EAAZ,KADwD,EAE9BA,EAAO9I,MAAM,KAFiB,eAEvDyI,EAFuD,KAE5CC,EAF4C,MAIxB,KADhCD,EAAYA,EAAUjI,QACR2B,QAAQ,OACpBsG,EAAYvI,GAAcuI,EAAWE,EAAUlE,KAIhB,KADjCiE,EAAaA,EAAWlI,QACT2B,QAAQ,OACrBuG,EAAaxI,GAAcwI,EAAYC,EAAUlE,IAEnDhF,EAAOoJ,EAAMrI,OAKf,MASI0F,SAASC,WARX4C,EADF,EACEA,aACAC,EAFF,EAEEA,mBACAC,EAHF,EAGEA,eACAnC,EAJF,EAIEA,WACAV,EALF,EAKEA,eACA8C,EANF,EAMEA,UACAxC,EAPF,EAOEA,YACAF,EARF,EAQEA,UAEE/B,IACFsE,EACEtE,aAAmBG,IAAaH,EAAU,IAAIG,IAAWH,IAE7D,IAAIK,EACF/F,OAAOkD,8BAA8B2C,IACjC7F,OAAOkD,mBAAmBC,YAAY,UACtC,GAEFiH,EAAYC,WAAqBrK,OAAOW,SAAS2J,MAAMC,MAE3DxE,EAAY1E,EAAE2B,OAAOoH,EAAWrE,GAEhC,IAAInK,EAAQgO,EACZ,IAAKvI,EAAEM,SAASjB,GACd,OAAO9E,EAET,GAAmC,IAA/B8E,EAAK0C,QAAQ,cACf1C,EAAOA,EAAK4C,QAAQ,aAAc,IAClC1H,EAAQqO,EACJA,EAAmB9G,YAAYzC,EAAMkJ,GACrC,QACC,GAAwC,IAApClJ,EAAK0C,QAAQ,mBACtB1C,EAAOA,EAAK4C,QAAQ,kBAAmB,IACvC1H,EAAQsO,EAAiBA,EAAe/G,YAAYzC,EAAMkJ,GAAY,QACjE,GAAmC,IAA/BlJ,EAAK0C,QAAQ,cACtB1C,EAAOA,EAAK4C,QAAQ,aAAc,IAClC1H,EAAQ6L,EAAYA,EAAUtE,YAAYzC,EAAMkJ,GAAY,QACvD,GAAwC,IAApClJ,EAAK0C,QAAQ,mBACtB1C,EAAOA,EAAK4C,QAAQ,kBAAmB,IACvC1H,EAAQyL,EAAiBA,EAAelE,YAAYzC,EAAMkJ,GAAY,QACjE,GAAmC,IAA/BlJ,EAAK0C,QAAQ,cACtB1C,EAAOA,EAAK4C,QAAQ,aAAc,IAClC1H,EAAQ+L,EAAcA,EAAYxE,YAAYzC,EAAMkJ,GAAY,QAC3D,GAAa,cAATlJ,EACT9E,EAAQ+L,EAAY6C,eACf,GAAa,eAAT9J,EACT9E,EAAQoO,EAAaQ,eAChB,GAAmC,IAA/B9J,EAAK0C,QAAQ,cACtBxH,EAAQ6O,GAAa/J,EAAK4C,QAAQ,aAAc,UAC3C,GAAoC,IAAhC5C,EAAK0C,QAAQ,eACtBxH,EAAQyF,EAAE9E,IAAIwL,EAAYrH,EAAK4C,QAAQ,cAAe,IAAKsG,QACtD,GAAmC,IAA/BlJ,EAAK0C,QAAQ,cACtBxH,EAAQuO,EACJA,EAAUhH,YAAYzC,EAAK4C,QAAQ,aAAc,IAAKsG,GACtD,QACC,GAAuC,IAAnClJ,EAAK0C,QAAQ,kBAAyB,CAC/C,IAAM6E,EAAevH,EAAKO,MAAM,KAChC,UAAkDgH,EAAlD,GAAeC,GAAf,WAA0BC,EAA1B,KAAsCC,EAAtC,KACMC,EAAYC,GAAwBJ,GAC1C,GAAKG,EAGH,OAAQF,GACN,IAAK,WAEDvM,EAAQyM,EAAUrE,MAAMwE,QAAQkC,YAAYtC,GAE9C,MACF,QACExM,EAAQ,QATZA,EAAQ,QAaL,GAAsC,IAAlC8E,EAAK0C,QAAQ,iBACtB1C,EAAOA,EAAK4C,QAAQ,gBAAiB,IACrC1H,EAAQ2N,GAAwB,eAAgB,IAChD3N,EAAQyF,EAAE9E,IAAIX,EAAO8E,EAAMkJ,QACtB,GAAoC,IAAhClJ,EAAK0C,QAAQ,eAAsB,CAC5C,IAAM6E,EAAevH,EAAKO,MAAM,KAChC,UAAmDgH,EAAnD,GAAgBc,GAAhB,WAA2BZ,EAA3B,KAAuCC,EAAvC,KACIY,EAAOhJ,OAAOiJ,WAAWC,MAAK,SAAAF,GAAI,OAAIA,EAAKG,KAAOJ,KACnDC,GAAuB,aAAfb,IACHa,aAAgBI,MACpBJ,EAAOI,gBAAiBJ,IAE1BpN,EAAQoN,EAAK2B,WAAWvC,EAAUwB,SAGpChO,EAAQoO,EAAa7G,YAAYzC,GAC7BsJ,EAAa7G,YAAYzC,GACzBqF,EAAUrF,MAEZ9E,EAAQgO,GAMZ,OAHIF,GAAaC,KACf/N,EAAQA,EAAQ8N,EAAYC,GAEvB/N,EAQF,SAASwF,KAAmC,IAAbL,EAAa,uDAAJ,GACzCL,EAAO,GAQX,OAPIW,EAAEM,SAASZ,KAEbL,EAAOW,EAAE9E,IAAIwE,EAAOyC,MAAM,uBAAwB,IAAK,IAAIF,QACzD,KACA,KAGG5C,EAQF,SAASkK,KAA4C,IAA1BC,EAA0B,uDAAjB,GAAIpO,EAAa,uDAAJ,GAClD0I,EAAS,GACb,OAAK0F,GAGLxJ,EAAEoC,QAAQhH,GAAQ,SAACb,EAAOD,GACe,IAAnCA,EAAIyH,QAAJ,UAAeyH,EAAf,MAA2B,MAC7B1F,EAAOxJ,EAAI2H,QAAJ,UAAeuH,EAAf,MAA2B,KAAOjP,MAGtCuJ,GAPEA,EAgBJ,SAAS2F,GAAY/J,GAAyB,IAAjB6I,EAAiB,uDAAN,KAC7C,IACE,OAAOmB,KAAKC,MAAMjK,GAClB,MAAOb,GACP,OAAoB,OAAb0J,EAAoB7I,EAAS6I,GAWjC,SAAS7C,KAId,IAHAkE,EAGA,uDAHY,GACZC,EAEA,uDAFa,GACbrE,EACA,uDADW,QAEX,OAAQA,GACN,IAAK,QACH,OAAOxF,EAAEmD,QAAQyG,GAEnB,IAAK,YACH,OAAQ5J,EAAEmD,QAAQyG,GAEpB,IAAK,OACH,OAAQA,EAEV,IAAK,WACH,QAASA,EAEX,IAAK,KACH,OAAKA,IAAcC,IAGb7J,EAAE+E,SAAS6E,IAAc5J,EAAE+E,SAAS8E,GAGjC7J,EAAEiG,QAAQ2D,EAAWC,GAFrBD,GAAaC,GAKxB,IAAK,MACH,OAAO7J,EAAEiG,QAAQ2D,EAAWC,GAE9B,IAAK,KACH,OAAQ7J,EAAEiG,QAAQ2D,EAAWC,GAE/B,IAAK,IACH,OAAOzI,OAAOwI,GAAaxI,OAAOyI,GAEpC,IAAK,KACH,OAAOzI,OAAOwI,IAAcxI,OAAOyI,GAErC,IAAK,IACH,OAAOzI,OAAOwI,GAAaxI,OAAOyI,GAEpC,IAAK,KACH,OAAOzI,OAAOwI,IAAcxI,OAAOyI,GAErC,IAAK,KACH,GAAI7J,EAAEM,SAASuJ,GACb,OAA0C,IAAnCA,EAAW9H,QAAQ6H,GAE5B,IAAK5J,EAAEhG,QAAQ6P,GACb,OAAO,EAET,IAAI/F,GAAS,EAMb,OALA+F,EAAWzH,SAAQ,SAAAlB,GACZ4C,IACHA,EAAS4B,GAAakE,EAAW1I,EAAM,UAGpC4C,EAET,IAAK,SACH,OAAQ4B,GAAakE,EAAWC,EAAY,MAE9C,IAAK,UACH,GAAI7J,EAAEM,SAASsJ,GACb,OAA0C,IAAnCA,EAAU7H,QAAQ8H,GAE3B,IAAK7J,EAAEhG,QAAQ4P,GACb,OAAO,EAET,IAAI9F,GAAS,EAMb,OALA8F,EAAUxH,SAAQ,SAAAlB,GACX4C,IACHA,EAAS4B,GAAamE,EAAY3I,EAAM,eAGrC4C,EAET,IAAK,cACH,OAAQ4B,GAAakE,EAAWC,EAAY,YAK3C,IAAMC,GAAqB,CAChC,CACEvP,MAAO,QACP8F,MAAO,SAET,CACE9F,MAAO,YACP8F,MAAO,aAET,CACE9F,MAAO,OACP8F,MAAO,QAET,CACE9F,MAAO,WACP8F,MAAO,YAET,CACE9F,MAAO,KACP8F,MAAO,UAET,CACE9F,MAAO,KACP8F,MAAO,cAET,CACE9F,MAAO,UACP8F,MAAO,WAET,CACE9F,MAAO,IACP8F,MAAO,KAET,CACE9F,MAAO,KACP8F,MAAO,MAET,CACE9F,MAAO,IACP8F,MAAO,KAET,CACE9F,MAAO,KACP8F,MAAO,MAET,CACE9F,MAAO,KACP8F,MAAO,MAET,CACE9F,MAAO,SACP8F,MAAO,UAET,CACE9F,MAAO,UACP8F,MAAO,WAET,CACE9F,MAAO,cACP8F,MAAO,gBAIJ,SAAS0J,GAAuBC,EAAKC,EAAWC,GACrD,OAAOF,EAAMC,GAAaD,EAAMC,EAAYC,EAGvC,SAASC,GAAehD,GAG7B,IAFA,IAAI6C,EAAM7C,EAAQiD,UAEXjD,EAAQkD,cAEbL,IADA7C,EAAUA,EAAQkD,cACHD,UAGjB,OAAOJ,EAQF,SAASZ,GAAa/J,GAA2B,IAArBiL,EAAqB,uDAAN,KAC5C/P,EAAQ+P,EAEZ,OAAQjL,GACN,IAAK,MAED9E,EAAQyF,EAAEuK,MAEZ,MACF,IAAK,cAEDhQ,EAAQiQ,GAAa,IAAIC,MAE3B,MACF,IAAK,mBAEDlQ,EAAQiQ,GAAa,IAAIC,MAAS,GAEpC,MACF,IAAK,aAEDlQ,EAAQmQ,GAAY,IAAID,MAE1B,MACF,IAAK,kBAEDlQ,EAAQmQ,GAAY,IAAID,MAAS,GAEnC,MACF,IAAK,kBAEDlQ,EAAQoQ,KAEV,MACF,IAAK,kBAEDpQ,EAAQqQ,KAEV,MACF,IAAK,aAEDrQ,EAAQsQ,KAId,IAAOC,EAAUnM,OAAOoM,aAAjBD,OAEP,OADQA,EAAOvQ,GAAOyQ,OAAO,cAUxB,SAASR,GAAaS,GAAsB,IAAhBC,EAAgB,uDAAH,EAC9C,OAAO,IAAIT,KAAKQ,EAAKE,cAAeF,EAAKG,WAAaF,EAAY,GAQ7D,SAASR,GAAYO,GAAqB,IAAfI,EAAe,uDAAH,EAC5C,OAAO,IAAIZ,KAAKQ,EAAKE,cAAgBE,EAAW,EAAG,GAQ9C,SAASC,GAAYL,GAAqB,IAAfM,EAAe,uDAAH,EACrCT,EAAUnM,OAAOoM,aAAjBD,OACP,OAAOA,EACL,IAAIL,KACFQ,EAAKE,cACLF,EAAKG,WACLH,EAAKO,UAAwB,EAAZD,IAEnBE,iBAOG,SAASC,KACd,OAAO5F,SAASC,WAQX,SAAS4F,GAAgBC,EAAYzE,GAC1C,IAAM0E,EAAcD,EAAdC,UACN,GAAGD,aAAsBE,YAAY,CACnCD,EAAYD,EACZ,IAAIG,GAASC,QAAsB7E,EAASyE,GACzCG,IACDH,EAAW3B,UAAW8B,GAO1B,GAAKF,GAGA7L,EAAEkG,WAAW0F,EAAW3B,WAA7B,CAOA,IAHA,IAAIgC,EAAS9E,EAAQkD,aACjBL,EAAM7C,EAAQiD,UAEX6B,IAAWJ,GAAW,CAC3B,IAAMI,EAIJ,OAEFjC,GAAOiC,EAAO7B,UACd6B,EAASA,EAAO5B,aAKZL,GAGN4B,EAAW3B,UAAUD,IAQhB,SAASkC,KAAmC,IAAhBrF,EAAgB,uDAAJ,GACzCiF,EAAc,KAClB,OAAKjF,GAAcA,EAAUzG,QAG7ByG,EAAYA,EAAUzG,OACtB0F,SAASC,WAAWoG,SAAS/J,SAAQ,SAAAgK,GAC9BA,EAAGC,kBAAkBxI,SAGrBuI,EAAGC,kBAAkBxI,QAAQiE,KAOL,IAH3BsE,EAAGC,kBAAkBxI,QAAQiE,GAC1B1J,WACAwB,MAAM,KACNmC,QAAQ8E,KAEXiF,EAAcM,EAAGC,kBAAkBxI,YAGhCiI,GAnBEA,EA2BJ,SAASQ,GAA+BnF,GAC7C,IAAKA,EACH,OAAO,KAET,IAAI2E,EAAc,KAMlB,OALAhG,SAASC,WAAWoG,SAAS/J,SAAQ,SAAAgK,GAC/BjF,IAAYiF,EAAGzJ,MAAMwE,UACvB2E,EAAcM,EAAGC,kBAAkBxI,YAGhCiI,EAOF,SAAS7E,KAAwC,IAAhBJ,EAAgB,uDAAJ,GAC9CG,EAAY,KAChB,OAAKH,GAAcA,EAAUzG,QAG7ByG,EAAYA,EAAUzG,OACtB0F,SAASC,WAAWoG,SAAS/J,SAAQ,SAAAgK,GAC9BA,EAAGC,kBAAkBxI,SAGrBuI,EAAGC,kBAAkBxI,QAAQiE,KAOL,IAH3BsE,EAAGC,kBAAkBxI,QAAQiE,GAC1B1J,WACAwB,MAAM,KACNmC,QAAQ8E,KAEXG,EAAYoF,MAGTpF,GAnBEA,EA0BX,SAAS4D,KACP,IACI2B,GAAQzB,EADKnM,OAAOoM,aAAjBD,UAEH0B,EAAe,GAAKD,EAAME,aAAe,GAC7C,OAAOF,EAAMG,IAAIF,EAAc,QAOjC,SAAS3B,KACP,IACI0B,GAAQzB,EADKnM,OAAOoM,aAAjBD,UAEH0B,EAAeD,EAAME,aAAe,EACxC,OAAOF,EAAMI,SAASH,EAAc,QAgBtC,SAAS7B,KACP,IACI4B,GAAQzB,EADKnM,OAAOoM,aAAjBD,UAEH8B,EAAmBL,EAAME,aAAe,EAAI,EAChD,OAAOF,EAAMI,SAASC,EAAkB,QAenC,SAASC,MAQT,SAAS7K,KAA0D,IAAnC8K,EAAmC,uDAAzB,GAAIC,EAAqB,uDAAN,KAClE,GAAGpO,OAAOC,IACR,OAAQkO,EAEV,IAAIE,EAAQhN,EAAEM,SAASwM,GAAWA,EAAQ3K,MAAM,uBAAyB,KAYzE,OAXInC,EAAEhG,QAAQgT,IACZA,EAAM5K,SAAQ,SAAA/C,GAEZ,IAAI9E,EAAQuF,GADZT,EAAOA,EAAK4C,QAAQ,KAAM,IACM,GAAI8K,GACtB,IAAVxS,IACFA,EAAQ,KAEV8E,EAAO4N,GAAa5N,GACpByN,EAAUA,EAAQ7K,QAAQ,IAAIK,OAAJ,YAAgBjD,EAAhB,MAA0B,KAAM9E,GAAS,OAGhEuS,EAgCF,SAASI,GAAcf,GAAsB,IAAZnN,EAAY,uDAAJ,GAC1CmO,EAAWxO,OAAOyO,KAAK,GAAI,SAAU,yBACzCD,EAASjO,SAASmO,MAAlB,6BAA8CrO,EAA9C,oBACAmO,EAASjO,SAASmO,MAAM,WACxBlB,EAAWnM,EAAEhG,QAAQmS,GAAYA,EAAW,CAACA,GAC7C,IAAImB,EAAc,GAClBH,EAASjO,SAASmO,MAAM,kBACxB,IAAIE,EAAc,GAqBlB,OApBApB,EAAS/J,SAAQ,SAAA+E,GACZA,aAAmBqG,gBACpBF,EAAcnG,EAAQhI,UAGxBoO,GAAepG,EAAQsG,aAEzBN,EAASjO,SAASwO,QAClBP,EAASjO,SAASyO,KAAKxO,UAAYmO,EACnCC,EAAcA,EACXtL,QAAQ,OAAQ,mCAChBA,QAAQ,OAAQ,QAChBA,QAAQ,UAAW,UACnBA,QAAQ,UAAW,UACtBkL,EAASjO,SAAS0O,KAAKzO,UAAYoO,EACnCJ,EAASU,QACTC,GAAM,KAAKC,MAAK,WACdZ,EAASa,QACTb,EAASO,YAEJ,EAQF,SAAeO,GAAtB,mC,0CAAO,WAA6B9B,GAA7B,8FAAuC+B,EAAvC,+BAAkD,GAAlD,SACiB,qCADjB,UACDC,EADC,OAC0EC,QAC/EjC,EAAWA,EAASyB,KAAOzB,EAASyB,KAAOzB,EAFtC,yCAII,CACLkC,SAAS,IALR,cAQDlB,EAAWxO,OAAOyO,KAAK,GAAI,SAAU,0BAChClO,SAASmO,MAAlB,sCACAF,EAASjO,SAASmO,MAAM,mBACxBlB,EAAWnM,EAAEhG,QAAQmS,GAAYA,EAAW,CAACA,IACpC/J,SAAQ,SAAA+E,GACfgG,EAASjO,SAASmO,MAAMlG,EAAQsG,cAElCN,EAASjO,SAASmO,MAAM,kBAfnB,kBAgBE,IAAIiB,SAAQ,SAACC,EAASC,GAC3BL,IACG1R,KAAK0Q,EAASjO,SAAS0O,MACvBa,KAAKP,GACRf,EAASO,QACTa,EAAQ,CAAEF,SAAS,QArBhB,6C,sBA6BA,SAASK,GAAc5C,GAC5B,IAAM6C,EAAO,GACPC,EAAU,GAChB,IAAM9C,IAAeA,EAAY+C,iBAC/B,OAAOF,EAET,IAAIG,EAAQhD,EAAYiD,cAAc,gBAItC,IAHKD,GAAShD,EAAYiD,cAAc,qBACtCD,EAAQhD,IAELgD,EACH,OAAOH,EAET,IAAMK,EAAMF,EAAMD,iBAAiB,mBACnC7O,EAAEqF,KAAK2J,GAAK,SAAAC,GAEVL,EAAQpR,KAAKyR,EAAGC,WAAa,OAG/B,IAAMC,EAAOL,EAAMD,iBAAiB,sCAYpC,OAXA7O,EAAEqF,KAAK8J,GAAM,SAAAC,GACX,IAAMC,EAAQD,EAAIP,iBAAiB,mBAC7BS,EAAO,GACbV,EAAQxM,SAAQ,SAACmN,EAAQC,GAClBD,IAGLD,EAAKC,GAAUF,EAAMG,GAAKN,WAAa,OAEzCP,EAAKnR,KAAK8R,MAELX,EAQF,SAAec,KAAtB,gC,0CAAO,6GAAyBd,EAAzB,+BAAgC,GACrCT,GADyCA,EAApC,yBACkB,OAClBS,EAFA,yCAGI,CAAEN,SAAS,IAHf,UAKDrO,EAAE+E,aAAe/E,EAAEhG,QAAQ2U,KAC7BA,EAAO,CAACA,IAEL3O,EAAEhG,QAAQ2U,GARV,yCASI,CAAEN,SAAS,IATf,cAYDO,EAAU5O,EAAE0P,QAAQf,EAAK,IAAI1O,KAAI,+BAAE3B,EAAF,iBAAmBA,KACpDqR,EAGFf,EAAQ1H,KAAK,KACb,KACAyH,EACG1O,KAAI,SAAAiB,GACH,IAAI0D,EAAO,GAWX,OAVAgK,EAAQxM,SAAQ,SAACwN,EAAGJ,GAClB,IAAIjV,EAAQyF,EAAE9E,IAAIgG,EAAM0O,IAAM,GAC1B5P,EAAE+E,SAASxK,KACbA,EAAQmP,KAAKmG,UAAUtV,IAGzBqK,IACG5E,EAAEM,SAAS/F,GAASA,EAAM0H,QAAQ,MAAO,KAAO1H,IAChDqU,EAAQjV,SAAW6V,EAAM,EAAI,GAAK,QAEhC5K,KAERsC,KAAK,MACN4I,EAAO,IAAIC,KAAK,CAACJ,GAAa,CAChC/M,KAAM,WACNoN,QAAS,kBAGPC,EAAO/Q,SAAS8D,cAAc,MAC7BkN,aAAa,OAAQvR,OAAOwR,IAAIC,gBAAgBN,IACrDG,EAAKC,aAAa,WAAYhC,EAAW,QACzChP,SAAS0O,KAAKyC,YAAYJ,GAC1BA,EAAKK,QACLpR,SAAS0O,KAAK2C,YAAYN,GA5CrB,kBA6CE,CAAE5B,SAAS,IA7Cb,6C,sBAqDA,SAAemC,GAAtB,mC,0CAAO,WAAyB7B,GAAzB,gGAA+BT,EAA/B,+BAA0C,QAASuC,EAAnD,+BAAkE,IACjEC,EAAW,IAAIC,UACZC,OAAO,WAAY1C,GAC5BwC,EAASE,OAAO,OAAQlH,KAAKmG,UAAUlB,IACvC+B,EAASE,OAAO,WAAYH,GAJvB,SAMkBI,MAAM,oBAAqB,CAChDC,OAAQ,OACRlD,KAAM8C,IARH,cAMCK,EAND,iBAWQA,EAASjB,OAXjB,sF,sBAmBA,SAAekB,GAAtB,mC,0CAAO,WAAyBrC,GAAzB,8FAA+BT,EAA/B,+BAA0C,SACzCwC,EAAW,IAAIC,UACZC,OAAO,WAAY1C,GAC5BwC,EAASE,OAAO,OAAQlH,KAAKmG,UAAUlB,IAHlC,SAKkBkC,MAAM,kBAAmB,CAC9CC,OAAQ,OACRlD,KAAM8C,IAPH,cAKCK,EALD,gBAUQA,EAASjB,OAVjB,qF,sBAmBA,SAAemB,KAAtB,gC,0CAAO,yHAA0BtC,EAA1B,+BAAiC,GAAInI,EAArC,+BAA8C,QACnDmI,EAAKsC,YAAa,EADb,kBAIS,IAAIC,IAAS,CAAEC,MAAO,WAAYC,KAAKzC,GAJhD,OAIH0C,EAJG,0DAMCC,EAAS,KAAMA,SACf,KAAMD,eAAe/C,SAPtB,kCAQW,KAAM+C,IARjB,QAQDA,EARC,oBAUC,gBAAiB/C,SAVlB,+CAWD+C,EAXC,eAaHA,EAAM5H,GAAY4H,EAAK,IACvBC,IAAWD,EAAIE,SAAWD,GAdvB,WAgBLxL,SAASF,UAAS4L,QAAgBhL,EAAQ6K,IACpCA,EAAIhD,SAAWgD,EAAII,OAjBpB,0CAkBI,CACLpD,SAAS,IAnBR,eAsBLoD,OAASJ,EAAII,OAtBR,UAwBmB,IAAIP,IAAS,CACnCC,MAAO,uBACNO,SA1BE,eA2BLpL,GAHIA,EAxBC,QA2BqBqI,KAC1B7I,SAASF,UAAS+L,QAAkBrL,IAChCsL,EAAS,GA7BR,oBA+BoB,IAAIV,IAAS,CAClCC,MAAO,iBACNO,SAjCA,QA+BCG,EA/BD,WAmCeA,EAAWC,OAnC1B,IAmCH,2BAASC,EAA2B,QAClCH,EAAOpU,KAAKwU,gBAAkBD,IApC7B,8BAsCHjM,SAASF,UAASqM,OAAgBL,IAtC/B,0DAwCHM,QAAQC,MAAR,MAxCG,kBAyCI,CAAE9D,SAAS,IAzCf,iCA2CE,CAAEA,SAAS,IA3Cb,kE,sBAkDA,SAAe+D,KAAtB,gC,0CAAO,gHACW,IAAIlB,IAAS,CAAEC,MAAO,YAAaC,OAD9C,WACDC,EADC,QAEKhD,SAAWgD,EAAII,OAFpB,yCAGI,CACLpD,SAAS,IAJR,cAOLoD,OAASJ,EAAII,OAPR,SASmB,IAAIP,IAAS,CACnCC,MAAO,uBACNO,SAXE,cAYLpL,GAHIA,EATC,QAYqBqI,KAC1B7I,SAASF,UAAS+L,QAAkBrL,IAChCsL,EAAS,GAdR,oBAgBoB,IAAIV,IAAS,CAClCC,MAAO,iBACNO,SAlBA,QAgBCG,EAhBD,WAoBeA,EAAWC,OApB1B,IAoBH,2BAASC,EAA2B,QAClCH,EAAOpU,KAAKwU,gBAAkBD,IArB7B,8BAuBHjM,SAASF,UAASqM,OAAgBL,IAvB/B,0DAyBHM,QAAQC,MAAR,MAzBG,kBA0BI,CAAE9D,SAAS,IA1Bf,iCA4BE,CAAEA,SAAS,IA5Bb,4D,sBA+BA,SAASgE,GAAU3S,GAAwB,IAAhB4S,EAAgB,uDAAJ,GAC5C,OAAI5S,EAAO/F,QAAU2Y,EAAkB5S,EAChCA,EAAOrB,MAAM,EAAGiU,GAAa,MAG/B,SAASC,GAAY5S,EAAS6S,GAQnC,OAPA7S,EAAQ8S,MAAK,SAACC,EAAGC,GAAJ,OACXD,EAAErS,MAAMuS,cAAgBD,EAAEtS,MAAMuS,cAC5B,EACAD,EAAEtS,MAAMuS,cAAgBF,EAAErS,MAAMuS,eAC/B,EACD,KAEmB,QAAlBJ,EAA0B7S,EAAUA,EAAQkT,UAQ9C,SAASC,KAAqC,IAAxB1X,EAAwB,uDAAf,GAAIiE,EAAW,uDAAJ,GAC3C0T,EAAQ,EACZ,IAAK1T,EACH,OAAO0T,EAET,IAAIC,EAAQhT,EAAE9E,IAAIE,EAAQiE,EAAM,IAChC,OAAK2T,EAAMrZ,QAIXqZ,EAAM5Q,SAAQ,SAAAlB,GACZ6R,GAASD,GAAa5R,EAAM7B,MAEvB0T,KANLA,EAcG,SAASE,KAA4B,IAAd9N,EAAc,uDAAN,KACpC,EAAyBW,SAASC,WAA1B4C,EAAR,EAAQA,aACLxD,aAAiBX,MAClBW,EAAQA,EAAMgE,WAEhB,IAAM+J,EAAmB/N,GAAgBwD,EAAaQ,UAChDzE,EAAY1E,EAAE4B,UAClBjD,OAAOkD,8BAA8B2C,IACjC7F,OAAOkD,mBAAmBC,YAAY,UACtC,IAEAuC,EAAU,IAAIG,IAAWxE,EAAE2B,OAAO+C,EAAWwO,IACnD,EAQIpN,SAASC,WAPXC,EADF,EACEA,eACA8C,EAFF,EAEEA,UACA1C,EAHF,EAGEA,UACAwC,EAJF,EAIEA,mBACAtC,EALF,EAKEA,YACAuC,EANF,EAMEA,eACAnC,EAPF,EAOEA,WAUF,OAPArC,EAAQ8O,YAAY,YAAavK,GACjCvE,EAAQ8O,YAAY,iBAAkBnN,GACtC3B,EAAQ8O,YAAY,YAAa/M,GACjC/B,EAAQ8O,YAAY,YAAa7M,GACjCjC,EAAQ8O,YAAY,iBAAkBtK,GACtCxE,EAAQ8O,YAAY,aAAczM,GAClCrC,EAAQ8O,YAAY,YAAarK,GAC1BzE,EAUF,SAAS+O,GAAiBC,GAAwB,IAAdC,EAAc,uDAAN,KACjD,IAAKD,EACH,OAAO,EAET,IAAMhU,EAAO,eAAH,OAAkBgU,GAC5B,OAAOjL,GAAuB/I,EAAMiU,GAS/B,SAASC,GAAeF,GAA2B,IAAjB9K,EAAiB,uDAAN,KAClD,IAAK8K,EACH,OAAO9K,EAET,IAAMlJ,EAAO,eAAH,OAAkBgU,GAC5B,OAAOnL,GAAwB7I,EAAMkJ,GAShC,SAASH,GAAuB9J,EAAMqQ,GAC3C,IAAKrQ,EACH,OAAO,EAEL0B,EAAE+E,SAAS4J,KACbA,EAAOjF,KAAKmG,UAAUlB,IAExB,IACE6E,aAAaC,QAAQnV,EAAMqQ,GAC3B,MAAO9P,GACP,OAAO,EAET,OAAO,EAQF,SAASqJ,GAAwB5J,GAA4B,IAI9D/D,EAJwCgO,EAAsB,4DAAXpE,EACvD,IAAK7F,EACH,OAAOiK,EAGT,IAEE,KADAhO,EAAQiZ,aAAaE,QAAQpV,IAE3B,OAAOiK,EAEThO,EAAQmP,KAAKC,MAAMpP,GACnB,MAAO4X,IAKT,OAHInS,EAAEM,SAAS/F,IAAU6G,OAAO7G,KAC9BA,EAAQ6G,OAAO7G,IAEVA,GAASgO,EAEX,SAASoL,KAEd,IAAMC,EAAY1U,SAAS8D,cAAc,OACzC4Q,EAAU1D,aACR,QACA,kFAEFhR,SAAS0O,KAAKyC,YAAYuD,GAC1B,IAAMD,EAAiBC,EAAUpR,YAAcoR,EAAUC,YAEzD,OADA3U,SAAS0O,KAAK2C,YAAYqD,GACnBD,EAQF,SAASG,KAA0B,IAAZd,EAAY,uDAAJ,GAC/BhT,EAAEhG,QAAQgZ,IAGfA,EAAM5Q,SAAQ,SAAClB,EAAMsO,GACdxP,EAAE+E,SAAS7D,KAGZA,aAAgBsD,IAClBtD,EAAKiS,YAAY,aAAc3D,GAGjCtO,EAAK6S,WAAavE,MASf,SAASwE,GAAeC,GAC7B,GAAIC,KAAcD,KAAUE,KAC1B,OAAO,KAETF,EAAOA,EAAKhS,QAAQ,KAAM,KAG1B,IAAImS,EACF,4CAHFH,GACE,kIAEoD,mBAEtD,OADAG,EAAUC,UAAUD,GACb,4BAAME,IAAI,aAAaha,IAAK8Z,EAASnL,KAAMmL,IAM7C,SAASG,KACd,OAAO5V,OAAOW,SAAS2J,KAAKlH,QAAQ,mBAAqB,EAOpD,SAASyS,KACd,OAAOC,KAAKC,SACTtW,SAAS,IACTuW,OAAO,EAAG,GAWR,SAASC,GACdC,EACAC,EACAC,EACAC,GAEA,IAAMC,EAAaF,EAA2BC,EACxCE,EAAcpb,MAAM2C,KACxB,CAAE9C,OAAQob,IACV,SAAC/U,EAAGpG,GAAJ,OAAUkb,EAAYlb,EAAI,KAC1BiZ,UACIsC,EAAgBrb,MAAM2C,KAC1B,CAAE9C,OAAQqb,IACV,SAAChV,EAAGpG,GAAJ,OAAUib,EAAYJ,KAAKW,MAAMJ,EAAuB,GAAKpb,KAG/D,OAAIib,EAAY,EAAII,EAClB,kBAAWnb,MAAMmb,GAAYI,QAA7B,CAAqC,aAArC,OAAoDH,IAGpDL,GACAC,EACEC,EACA,EACAN,KAAKW,MAAMJ,EAAuB,GAEpC,kBACKlb,MAAMib,GAA0BM,QADrC,CAEE,aAFF,OAGKvb,MAAM2C,KACP,CAAE9C,OAAQob,EAA2BC,IACrC,SAAChV,EAAGpG,GAAJ,OAAUkb,EAAYlb,EAAI,KAC1BiZ,YAIN,kBACK/Y,MAAMib,GAA0BM,QADrC,CAEE,aAFF,OAGKF,GAHL,CAIE,aAJF,OAKKD,IAUA,SAASI,GAAiB/a,EAAOgb,GACtC,SAAKhb,GAASA,EAAMZ,SAAW4b,EAAK5b,SAIlCY,EAAMZ,QACNY,EACGqF,MAAM,IACN4V,OAAM,SAACC,EAAMC,GAAP,OAAiBD,IAASF,EAAKG,IAAUD,EAAKtT,MAAMoT,EAAKG,OAQ/D,SAASC,GAAahH,GAC3B,OAAQA,EAAKiH,WACX,IAAK,QACH,OAAO,IAAIC,IAAelH,GAE9B,OAAO,IAAImH,IAQN,SAASC,GAAY1O,EAAUsH,GAOpC,GANI3O,EAAEhG,QAAQqN,IACZA,EAASjF,SAAQ,SAAAlB,GACf,IAAM8U,EAAYL,GAAazU,GAC/ByN,EAAOqH,EAAUD,YAAYpH,MAG7BtH,EAASuO,UAAW,CACtB,IAAMI,EAAYL,GAAatO,GAC/BsH,EAAOqH,EAAUD,YAAYpH,GAE/B,OAAOA,EAEF,SAAS7L,GAAWmT,EAAUC,EAAMC,EAAaC,GACtD,OAAIH,EAAiB,KAGnB,4BAAMG,UAAWA,GACdF,GAAQA,EAAKrT,UAAYJ,EAAgByT,GAAQC,GAYjD,SAASE,GAASC,EAAczX,GAAiB,IAAdwF,EAAc,uDAAJ,GAClD,GAAIrE,EAAE9E,IAAIob,EAAc,cACnB3X,OAAO4X,eACRA,eAAeC,QAAQC,SAEvBD,QAAQE,YAIZ,GAAK1W,EAAE9E,IAAIob,EAAc,OAAzB,CAGAzX,EAAE8X,iBACF9X,EAAE+X,kBACF,IAAMnV,EAAQ6U,EAAR7U,IACNA,EAAMO,GAAuBP,EAAK4C,GAC9BiS,EAAaO,UACflY,OAAOyO,KAAK3L,EAAK,UAGM,MAArB6U,EAAaQ,KAAiBnY,OAAO4X,eAGvCA,eAAeC,QAAQhZ,KAAKiE,GAF5B9C,OAAOW,SAASqC,OAAOF,IAOpB,SAASsV,GAAcC,GAE5B,MADW,wJACDzY,KAAK0Y,OAAOD,GAAOpE,eAWxB,SAASsE,GACd7P,EACA8P,GAGA,IACKC,EAHLC,EAEA,uDAFe,GACf9O,EACA,uDADW,KAGX,IACE6O,EAAgBzY,OAAOsN,OAAOnG,SAASC,WAAWqR,cAClD,MAAMvY,GACNqT,QAAQoF,MAAMzY,GACduY,EAAgBzY,OAAOmH,SAASC,WAAWqR,cAE7C,IAAIG,EAAe,GAAH,OAAMJ,EAAN,YAAqBE,EAArB,KAChB,GAAID,EAAc9Y,OAASqC,6BAA8B,CACvD,IAAI6W,EAAUnQ,EAASkQ,GAEvB,QAAgBpT,IAAZqT,EAAuB,CACzB,GAAGH,EACD,OAEFG,EAAUxX,EAAE9E,IAAImM,EAAU8P,EAAa5O,GAEzC,OAAOiP,EAET,IAAIC,EAASL,EAAc9Y,KAEvBkZ,EAAUnQ,EADdkQ,EAAe,GAAH,OAAMJ,EAAN,YAAqBE,EAArB,YAAqCI,IAEjD,QAAgBtT,IAAZqT,EAAuB,YACN,OAAI7W,mBAAmBkS,WADjB,IACzB,2BAAqD,KAA5CjS,EAA4C,QACnD,KACEwW,EAActP,GAAKlH,EAAOkH,IAC1BlH,EAAOtC,OAASqC,oCAOawD,IAA3BkD,EAFJkQ,EAAe,GAAH,OAAMJ,EAAN,YAAqBE,EAArB,YAAqCzW,EAAOtC,OAEd,CACxCkZ,EAAUnQ,EAASkQ,GACnB,QAbqB,+BAoB3B,QAAgBpT,IAAZqT,EAAuB,CACzB,GAAGH,EACD,OAEFG,EAAUxX,EAAE9E,IAAImM,EAAU8P,EAAa5O,GAEzC,OAAOiP,EAQF,SAASE,GAAiBnd,GAC/B,OAAQA,GACN,IAAK,OACH,OAAO,EACT,IAAK,QACH,OAAO,EACT,IAAK,OACH,OAAO,KAEX,OAAOA,EAQF,SAASuT,GAAM6J,GAIpB,OAHI3X,EAAEM,SAASqX,KACbA,EAAKvW,OAAOuW,IAEP,IAAIrJ,SAAQ,SAACC,EAASC,GAC3BoJ,WAAWrJ,EAASoJ,MAUjB,SAASE,GAAmBpW,GAAqB,IAAhB4C,EAAgB,uDAAN,KAChD,OAAKrE,EAAEM,SAASmB,IAASA,GAIG,KAD5BA,EAAMA,EAAIrB,QACF2B,QAAQ,UACdN,EAAMnC,SAASwY,OAASrW,GAEnBF,EAAiBE,EAAK4C,IANpB5C,EASJ,SAASsW,GAAsBC,GACpC,IAAMC,EAAaD,EAAWjW,QAAQ,MAAQ,EACxCmW,EAAWF,EAAWjW,QAAQ,IAAKkW,GAEzC,OAAOD,EAAWG,UAAUF,EAAYC,GAQnC,SAASE,GAAe/T,GAO7B,OANAA,EAAQgU,UAAYvS,SAASC,WAAW6C,mBAAmBO,UAC3D9E,EAAQiU,WAAaxS,SAASC,WAAW4C,aAAaQ,UACtD9E,EAAQkU,UAAYzS,SAASC,WAAWO,YAAY6C,UACpD9E,EAAQmU,eAAiB1S,SAASC,WAAWC,eAAemD,UAC5D9E,EAAQwE,eAAiB/C,SAASC,WAAW8C,eAAeM,UAC5D9E,EAAQoU,UAAY3S,SAASC,WAAWK,UAAU+C,UAC3C9E,EASF,SAASqU,KAAwB,IAAjBC,EAAiB,uDAAJ,GAClC,IAEE,OADAjP,KAAKC,MAAMgP,IACJ,EACP,MAAOxG,GACP,OAAO,GAkDX,SAASlF,GAAavN,GACpB,OAAOA,EAAOuC,QAAQ,sBAAuB,QAOxC,SAAS2W,GAAiBlZ,GAC/B,IAAInF,EAAQmF,EAEZ,GAAI0B,OAAO7G,GACT,OAAO6G,OAAO7G,GAEhB,OAAQA,GACN,IAAK,OACH,OAAO,EAET,IAAK,QACH,OAAO,EAET,IAAK,OACH,OAAO,KAET,IAAK,YACH,OAEF,IAAK,IACH,OAAO,EAGX,OAAOA,EAOF,SAASse,KACd,GAAGla,OAAO,YAAcA,OAAOma,iBAC7B,OAAOna,OAAOma,iBAEhB,IAAIC,EAAQ,GACZ,GAAG3Z,IACD,OAAO2Z,EAET,IAAMC,EAAYra,OAAO,WAAaA,OAAOsa,QAAUta,OAAOua,cACvDtH,EAAU9L,SAASC,WAAWoT,UAA9BvH,OACHwH,EAAmB,GACnBC,EAAY,EA4BhB,OA3BAzH,EAAOxP,SAAQ,SAAC+O,EAAO3B,GAClBwJ,IAAc7H,EAAMrJ,KACrBuR,EAAY7J,MAIhB4J,EAAiB5b,KAAKoU,EAAOyH,IAa1BzH,EAAOyH,GAAWC,gBAXrB,SAASC,EAAUC,GACjB5H,EAAOxP,SAAQ,SAAA+O,GACVA,EAAMrJ,KAAO0R,IACdJ,EAAiB5b,KAAK2T,GACnBA,EAAMmI,gBACPC,EAAUpI,EAAMmI,oBAOtBC,CAAU3H,EAAOyH,GAAWC,gBAG9BP,EAAQK,EAAiBvG,UACtBlU,OAAO,aACRA,OAAOma,iBAAmBC,GAErBA,EA96BTpa,OAAO8a,aAAe,CAMpBC,UAAW,SAAmBjT,GAC5B,IAAIkT,EAAM,EACV,OAAK3Z,EAAE+E,SAAS6U,KAAKvV,UAGhBrE,EAAEhG,QAAQ4f,KAAKvV,WAClBuV,KAAKvV,QAAU,CAACuV,KAAKvV,UAEvBuV,KAAKvV,QAAQjC,SAAQ,SAAAkD,GACnBqU,GAAOvY,OAAOpB,EAAE9E,IAAIoK,EAAGmB,KAAe,KAEjCkT,GAREA,K,oHChvCN,IAAME,EAAoB,oBACpBC,EAAmB,mBAazB,SAAS3T,EAAgB4T,GAA4B,IAAjBC,EAAiB,uDAAJ,GACtD,MAAO,CACLpX,KAAMiX,EACNE,YACAC,gB,2LClBG,IAAMC,EAAsB,sBACtBC,EAAsB,sBACtBC,EAAmB,mBACnBC,EAA+B,+BAErC,SAASzI,EAAkB0I,GAChC,MAAO,CACLzX,KAAMqX,EACNI,KAAMA,GAAQ,IAYX,SAAS9T,EAA0BlH,EAAM9E,GAC9C,MAAO,CACLqI,KAAMwX,EACN/a,KAAMA,GAAQ,GACd9E,MAAOA,GAAS,M,oHCxBb,IAAM+f,EAAoB,oBACpBC,EAA0B,0BAahC,SAAS/I,EAAgBhL,GAAmB,IAAXmI,EAAW,uDAAJ,GAI7C,OAHGA,EAAKA,OACNA,EAAOA,EAAKA,MAEP,CACL/L,KAAM0X,EACN3L,OACAnI,Y,kBCfJ,SAAS2B,EAAI9N,EAAKmgB,EAAMjgB,GACvBigB,EAAuB,iBAATA,EAAoBC,EAAYD,EAAKpc,YAA8B,iBAAToc,EAAoBC,EAAYD,GAAQA,EAEhH,MAAME,EAAsB,CAACrgB,EAAKmgB,EAAMjgB,EAAOX,KAC9C,IAAI+gB,EAAOhN,EAAO6M,EAAK5gB,GAEvB,OAAI4gB,EAAK7gB,OAASC,GACbE,MAAME,QAAQK,IACjBsT,EAAOiN,EAAcjN,EAAMtT,GAC3BsgB,EAAQtgB,EAAIgE,SAEZsc,EAAQngB,OAAOmH,OAAO,GAAItH,GAE3BsgB,EAAMhN,GAAQ+M,OAAkCvW,IAAd9J,EAAIsT,GAAsBtT,EAAIsT,GAAQ,GAAI6M,EAAMjgB,EAAOX,EAAI,GACtF+gB,GAGgB,mBAAVpgB,EAAuBA,EAAMF,GAAOE,GAGnD,OAAOmgB,EAAoBrgB,EAAKmgB,EAAMjgB,EAAO,GAS9C,SAASW,EAAIb,EAAKmgB,EAAMjgB,GACvBigB,EAAuB,iBAATA,EAAoBC,EAAYD,EAAKpc,YAA8B,iBAAToc,EAAoBC,EAAYD,GAAQA,EAEhH,IAAK,IAAI5gB,EAAI,EAAGA,EAAI4gB,EAAK7gB,OAAQC,IAAK,CACrC,GAAY,OAARS,GAA+B,iBAARA,EAC1B,OAAOE,EAER,IAAIoT,EAAO6M,EAAK5gB,GACZE,MAAME,QAAQK,IAAiB,SAATsT,IACzBA,EAAOtT,EAAIV,OAAS,GAErBU,EAAMA,EAAIsT,GAGX,YAAmB,IAARtT,EACHE,EAGDF,EA0FR,SAASugB,EAAcjN,EAAMtT,GAI5B,GAHa,SAATsT,IACHA,EAAO8G,KAAKoG,IAAIxgB,EAAIV,OAAS,EAAG,KAE5B,WAAW4E,KAAKoP,GACpB,MAAM,IAAImN,MAAM,gBAAgBnN,2BAEjC,OAAOoN,SAASpN,GAGjB,SAAS8M,EAAYD,GACpB,OAAOA,EAAK5a,MAAM,KAAKob,QAAO,CAACC,EAAK7O,EAAIsJ,EAAOwF,KAC9C,MAAMC,EAAOzF,EAAQ,GAAKwF,EAAKxF,EAAQ,GACvC,GAAIyF,GAAQ,iBAAiB5c,KAAK4c,GAAO,CACxC,MAAMC,EAAOH,EAAII,MACjBJ,EAAIzd,KAAK4d,EAAK/c,MAAM,GAAI,GAAK,IAAM+N,QAEnC6O,EAAIzd,KAAK4O,GAEV,OAAO6O,IACL,IAGJK,EAAOC,QAAU,CAChBpT,MACAjN,MACAsgB,OAzGD,SAAiBnhB,EAAKmgB,GACrBA,EAAuB,iBAATA,EAAoBC,EAAYD,EAAKpc,YAA8B,iBAAToc,EAAoBC,EAAYD,GAAQA,EAEhH,MAAMiB,EAAyB,CAACphB,EAAKmgB,EAAM5gB,KAC1C,IAAI+gB,EAAOhN,EAAO6M,EAAK5gB,GAEvB,OAAY,OAARS,GAA+B,iBAARA,IACzBP,MAAME,QAAQK,SAAsB8J,IAAd9J,EAAIsT,GAEpBtT,EAGJmgB,EAAK7gB,OAAS,EAAIC,GACjBE,MAAME,QAAQK,IACjBsT,EAAOiN,EAAcjN,EAAMtT,GAC3BsgB,EAAQtgB,EAAIgE,SAEZsc,EAAQngB,OAAOmH,OAAO,GAAItH,GAG3BsgB,EAAMhN,GAAQ8N,EAAuBphB,EAAIsT,GAAO6M,EAAM5gB,EAAI,GACnD+gB,IAGJ7gB,MAAME,QAAQK,IACjBsT,EAAOiN,EAAcjN,EAAMtT,GAC3BsgB,EAAQ,GAAGe,OAAOrhB,EAAIgE,MAAM,EAAGsP,GAAOtT,EAAIgE,MAAMsP,EAAO,MAEvDgN,EAAQngB,OAAOmH,OAAO,GAAItH,UACnBsgB,EAAMhN,IAGPgN,IAGR,OAAOc,EAAuBphB,EAAKmgB,EAAM,IAuEzCmB,OA7DD,SAAgBthB,EAAKmgB,GACpB,MAAMoB,EAAS1gB,EAAIb,EAAKmgB,GACxB,OAAOrS,EAAI9N,EAAKmgB,GAAOqB,QAAQD,KA4D/BE,MAhDD,SAAezhB,EAAKmgB,EAAMuB,GACzB,MAAMH,EAAS1gB,EAAIb,EAAKmgB,GACxB,MAAsB,iBAAXoB,EACN9hB,MAAME,QAAQ4hB,GACVzT,EAAI9N,EAAKmgB,EAAMoB,EAAOF,OAAOK,IAE7B5T,EAAI9N,EAAKmgB,EADK,OAAXoB,EACYG,EAGTvhB,OAAOmH,OAAO,GAAIia,EAAQG,SAGZ,IAAXH,EACVzT,EAAI9N,EAAKmgB,EAAMuB,GAGf1hB","file":"9551.22d03a739a1c78befb87.bundle.js","sourcesContent":["export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import superPropBase from \"./superPropBase.js\";\nexport default function _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import _typeof from \"@babel/runtime/helpers/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _toArray(arr) {\n  return arrayWithHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableRest();\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import CONSTANTS from \"../../../editor/src/js/consts\";\nimport AltrpModel from \"../../../editor/src/js/classes/AltrpModel\";\nimport Resource from \"../../../editor/src/js/classes/Resource\";\nimport { changeCurrentUser } from \"./store/current-user/actions\";\nimport { changeCurrentUserProperty } from \"./store/current-user/actions\";\nimport { changeAppRoutes } from \"./store/routes/actions\";\nimport Route from \"./classes/Route\";\nimport { changePageState } from \"./store/altrp-page-state-storage/actions\";\nimport { changeAltrpMeta } from \"./store/altrp-meta-storage/actions\";\nimport queryString from \"query-string\";\nimport AltrpSVG from \"../../../editor/src/js/components/altrp-svg/AltrpSVG\";\nimport ArrayConverter from \"./classes/converters/ArrayConverter\";\nimport DataConverter from \"./classes/converters/DataConverter\";\nimport { changeFormFieldValue } from \"./store/forms-data-storage/actions\";\nimport { addResponseData } from \"./store/responses-storage/actions\";\nimport {getOffsetTopInElement} from \"./helpers/elements\";\nimport Area from \"./classes/Area\";\nimport {altrpFontsSet, GOOGLE_FONT} from \"./constants/fonts\";\nimport {addSettings} from \"./store/elements-settings/actions\";\nimport mutate from \"dot-prop-immutable\";\nexport function getRoutes() {\n\n  return import(/* webpackChunkName: 'Routes' */\"./classes/Routes.js\");\n}\n\nexport function isSSR(){\n  try {\n    return window.SSR;\n  } catch (e) {\n    return false;\n  }\n}\n/**\n * @return {IconsManager}\n * */\nexport function iconsManager() {\n  return window.iconsManager;\n}\n\n/**\n * Устанавливает заголовок страницы на фронтенде\n * @param {string} title\n */\nexport function setTitle(title) {\n  let titleElement = document.title;\n  if (!defaultTitle) {\n    defaultTitle = titleElement.innerHTML;\n  }\n  if (!title) {\n    title = defaultTitle;\n  }\n  if (document.title !== title) {\n    document.title = title;\n  }\n}\n\n/**\n * @return {boolean}\n * */\nexport function isEditor() {\n  const path = window.location?.pathname;\n  return path?.includes(\"/admin/editor\") || false;\n}\n\n/**\n * Переменная, в которой храниться изначальный заголовок\n * @let {string}\n */\nlet defaultTitle;\n\n/**\n * Парсит стрку вводимую пользователем для опций селекта\n * @param string\n */\nexport function parseOptionsFromSettings(string) {\n  if (!string) {\n    return [];\n  }\n  let options = string.split(\"\\n\");\n  let path = extractPathFromString(string);\n  let _optionsFromData = getDataByPath(path);\n  if (_.isArray(_optionsFromData)) {\n    return _optionsFromData;\n  }\n  options = options.map(option => {\n    let value = option.split(\"|\")[0];\n    value = value.trim();\n    let valuePath = extractPathFromString(value);\n    if (valuePath) {\n      value = getDataByPath(valuePath);\n    }\n    let label = option.split(\"|\")[1] || value || \"\";\n    !_.isString(label) && (label = \"\");\n    label = label.trim();\n    let labelPath = extractPathFromString(label);\n    if (labelPath) {\n      label = getDataByPath(labelPath);\n    }\n    return {\n      value,\n      label\n    };\n  });\n  return options;\n}\n\n/**\n * Получает медиа запрос для css по имени настройки\n * @param {string} screenSettingName\n * @return {string}\n */\nexport function getMediaQueryByName(screenSettingName) {\n  let mediaQuery = \"\";\n  CONSTANTS.SCREENS.forEach(screen => {\n    if (screen.name === screenSettingName) {\n      mediaQuery = screen.mediaQuery;\n    }\n  });\n  return mediaQuery;\n}\n/**\n * Получает медиа запрос для css по имени настройки\n * @param {string} screenSettingName\n * @return {string}\n */\nexport function getMediaSettingsByName(screenSettingName) {\n  let screen = CONSTANTS.SCREENS[0];\n  CONSTANTS.SCREENS.forEach(_screen => {\n    if (_screen.name === screenSettingName) {\n      screen = _screen;\n    }\n  });\n  return screen;\n}\n\n/**\n * Возвращает брейкпоинт относительно текущего размера экрана\n */\nexport function getCurrentBreakpoint() {\n  const currentWidth = getWindowWidth();\n  const breakPoints = CONSTANTS.SCREENS;\n  const breakPointsSizes = breakPoints.map(item => ({\n    name: item.name,\n    size: Number(item.width.split(\"px\")[0])\n  }));\n  for (let breakpoint of breakPointsSizes) {\n    if (breakpoint.size < currentWidth) {\n      return breakpoint.name;\n    }\n  }\n}\n/**\n *@param {string} URLTemplate\n *@param {{} | null} object\n */\nexport function parseURLTemplate(URLTemplate = \"\", object = null) {\n  let url = URLTemplate;\n  let protocol = \"\";\n  if (!isEditor()) {\n    object = _.assign(\n      _.cloneDeep(currentRouterMatch.getProperty(\"params\")),\n      object\n    );\n  }\n  url = url.trim();\n  if (url.indexOf(\"{{\") !== -1) {\n    url = replaceContentWithData(url, object);\n  }\n  if (url.indexOf(\"https://\") === 0) {\n    protocol = \"https://\";\n    url = url.replace(\"https://\", \"\");\n  }\n  if (url.indexOf(\"http://\") === 0) {\n    protocol = \"http://\";\n    url = url.replace(\"http://\", \"\");\n  }\n  if (url.indexOf(\"mailto:\") === 0) {\n    protocol = \"mailto:\";\n    url = url.replace(\"mailto:\", \"\");\n  }\n  if (url.indexOf(\"tel:\") === 0) {\n    protocol = \"tel:\";\n    url = url.replace(\"tel:\", \"\");\n  }\n  // columnEditUrl = columnEditUrl.replace(':id', row.original.id);\n  let idTemplates = url.match(/:([\\s\\S]+?)(\\/|$)/g);\n  if (!idTemplates) {\n    return protocol + url;\n  }\n  idTemplates.forEach(idTemplate => {\n    let replace = object[idTemplate.replace(/:|\\//g, \"\")] || \"\";\n    idTemplate = idTemplate.replace(\"/\", \"\");\n    url = url.replace(new RegExp(idTemplate, \"g\"), replace);\n  });\n  return protocol + url;\n}\n\nexport function getWindowWidth() {\n  let window;\n  if (isEditor()) {\n    window = document.getElementById(\"editorWindow\").offsetWidth;\n  } else {\n    window = document.getElementById(\"front-app\").offsetWidth;\n  }\n  return window;\n}\n\nexport function renderAssetIcon(asset, props = null) {\n  if (asset) {\n    if (asset.url && asset.type === \"svg\") {\n      return <AltrpSVG {...props} url={asset.url} />;\n    }\n    switch (asset.assetType) {\n      case \"icon\": {\n        return iconsManager().renderIcon(asset.name);\n      }\n      case \"image\": {\n        return React.createElement(\"img\", { ...props, src: asset.url });\n      }\n      case \"media\": {\n        return React.createElement(\"img\", { ...props, src: asset.url });\n      }\n    }\n  }\n  return \"\";\n}\n\n/**\n * @param {object} asset\n * @param {object} props\n * @return {React.DetailedReactHTMLElement<React.InputHTMLAttributes<HTMLInputElement>, HTMLInputElement> | React.DetailedReactHTMLElement<React.HTMLAttributes<T>, HTMLElement> | React.ReactSVGElement | React.DOMElement<React.DOMAttributes<T>, Element> | React.FunctionComponentElement<{}> | React.CElement<{}, React.ClassicComponent<{}, React.ComponentState>> | React.CElement<{}, React.Component<P, React.ComponentState>> | React.ReactElement<{}> | string}\n * @throws Исключение если иконка не найдена\n * */\nexport function renderAsset(asset, props = null) {\n  if(_.isEmpty(asset)){\n    return  ''\n  }\n  if(asset.type === 'image' && asset.dataUrl){\n    return React.createElement(\"img\", {\n      ...props,\n      src: asset.dataUrl,\n    });\n  }\n  if (asset.url && asset.type === \"svg\") {\n    return <AltrpSVG {...props} url={asset.url} rawSVG={asset.rawSVG} />;\n  }\n  if (! isSSR() && asset instanceof File) {\n    let refImg = React.createRef();\n    let fr = new FileReader();\n    fr.readAsDataURL(asset);\n    fr.onload = () => {\n      if (refImg.current) {\n        refImg.current.src = fr.result;\n        refImg.current.alt = asset.name;\n      }\n    };\n    return React.createElement(\"img\", {\n      ...props,\n      src: asset.url,\n      ref: refImg\n    });\n  }\n  switch (asset.assetType) {\n    case \"icon\": {\n      return iconsManager().renderIcon(asset.name, props);\n    }\n    case \"image\": {\n      return React.createElement(\"img\", { ...props, src: asset.url });\n    }\n    case \"media\": {\n      return React.createElement(\"img\", { ...props, src: asset.url });\n    }\n    case \"mediaBackground\": {\n      return React.createElement(\"div\", {\n        ...props,\n        style: { backgroundImage: `url(${asset.url})` }\n      });\n    }\n    case undefined: {\n      return React.createElement(\"img\", {\n        ...props,\n        src: \"/img/nullImage.png\"\n      });\n    }\n  }\n  return \"\";\n}\n\n/**\n * Парсим данный из строки в объект, если значение - путь, то берем значение из context\n * (если в context нет свойства, то не записываем)\n * @param {string} string\n * @param {AltrpModel} context\n * @param {boolean} allowObject\n * @param {boolean} replaceRight - нужно ли подставлять в значение параметра данные или оставить сырой шаблон\n * @param {boolean} replace - нужно ли подставлять в значение параметра данные или оставить сырой шаблон\n * @return {{}}\n */\nexport function parseParamsFromString(\n  string,\n  context = {},\n  allowObject = false,\n  replaceRight = true,\n  replace = true,\n) {\n  if (!(context instanceof AltrpModel)) {\n    context = new AltrpModel(context);\n  }\n  const params = {};\n  const urlParams =\n    window.currentRouterMatch instanceof AltrpModel\n      ? window.currentRouterMatch.getProperty(\"params\")\n      : {};\n\n  if (!string) {\n    return params;\n  }\n  const lines = string.split(\"\\n\");\n  lines.forEach(line => {\n    let [left, right] = line.split(\"|\");\n    if (!left || !right) {\n      return;\n    }\n    left = left.trim();\n    right = right.trim();\n    if (replace && left.indexOf(\"{{\") !== -1) {\n      left = replaceContentWithData(left);\n    }\n    if (replace && right.match(/{{([\\s\\S]+?)(?=}})/g)) {\n      if (\n        context.getProperty(\n          right.match(/{{([\\s\\S]+?)(?=}})/g)[0].replace(\"{{\", \"\")\n        ) ||\n        getDataByPath(right.match(/{{([\\s\\S]+?)(?=}})/g)[0].replace(\"{{\", \"\"))\n      ) {\n        //todo ошибка в IOS\n        params[left] =\n          context.getProperty(\n            right.match(/{{([\\s\\S]+?)(?=}})/g)[0].replace(\"{{\", \"\")\n          ) ||\n          getDataByPath(\n            right.match(/{{([\\s\\S]+?)(?=}})/g)[0].replace(\"{{\", \"\")\n          ) ||\n          \"\";\n      } else {\n        replaceRight\n          ? (params[left] = urlParams[\n              right.match(/{{([\\s\\S]+?)(?=}})/g)[0].replace(\"{{\", \"\")\n            ]\n              ? urlParams[\n                  right.match(/{{([\\s\\S]+?)(?=}})/g)[0].replace(\"{{\", \"\")\n                ]\n              : \"\")\n          : (params[left] = right);\n      }\n    } else {\n      params[left] = right;\n    }\n    if (!allowObject && _.isObject(params[left])) {\n      delete params[left];\n    }\n  });\n  return params;\n}\n\n/**\n * Функция для проверки условий\n * @param {array} conditions\n * @param {boolean} AND - логичекое И или ИЛИ\n * @param {AltrpModel} model\n * @param {boolean} dataByPath - брать ли данные из getDataByPath\n * @return {boolean}\n */\nexport function conditionsChecker(\n  conditions = [],\n  AND = true,\n  model,\n  dataByPath = true\n) {\n  if (!conditions.length) {\n    return true;\n  }\n  let result = AND;\n  _.each(conditions, c => {\n    if (AND) {\n      result *= conditionChecker(c, model, dataByPath);\n    } else {\n      result += conditionChecker(c, model, dataByPath);\n    }\n  });\n  return !!result;\n}\n\n/**\n * Функция для проверки одного условия\n * @param c\n * @param {AltrpModel} model\n * @param {boolean} dataByPath - брать ли данный из getDataByPath\n * @return {boolean}\n */\nfunction conditionChecker(c, model, dataByPath = true) {\n  let result = 0;\n  const { operator } = c;\n  let { modelField: left, value } = c;\n  if (dataByPath) {\n    value = getDataByPath(value, \"\", model, true);\n    left = getDataByPath(left, \"\", model);\n    return altrpCompare(left, value, operator);\n  }\n  return altrpCompare(model.getProperty(left), value, operator);\n  switch (operator) {\n    case \"empty\": {\n      return !model.getProperty(modelField, \"\");\n    }\n    case \"not_empty\": {\n      return !!model.getProperty(modelField, \"\");\n    }\n    case \"==\": {\n      return _.isEqual(model.getProperty(modelField, \"\"), value);\n    }\n    case \"<>\": {\n      return !_.isEqual(model.getProperty(modelField, \"\"), value);\n    }\n    case \">\": {\n      return Number(model.getProperty(modelField, \"\")) > Number(value);\n    }\n    case \">=\": {\n      return Number(model.getProperty(modelField, \"\")) >= Number(value);\n    }\n    case \"<\": {\n      return Number(model.getProperty(modelField, \"\")) < Number(value);\n    }\n    case \"<=\": {\n      return Number(model.getProperty(modelField, \"\")) <= Number(value);\n    }\n  }\n  return result;\n}\n\n/**\n * Установить данные\n * @param {string} path\n * @param {*} value\n * @param {function | null} dispatch\n * @return {boolean}\n */\nexport function setDataByPath(path = \"\", value, dispatch = null) {\n  if (!path) {\n    return false;\n  }\n  if (path.indexOf(\",\") !== -1) {\n    let result = path\n      .split(\",\")\n      .map(path => setDataByPath(path, value, dispatch));\n    return true;\n  }\n  path = path.replace(\"{{\", \"\").replace(\"}}\", \"\");\n  path = path.trim();\n  switch (value) {\n    case \"true\":\n      value = true;\n      break;\n    case \"false\":\n      value = false;\n      break;\n    case \"null\":\n      value = null;\n      break;\n    case \"undefined\":\n      value = undefined;\n      break;\n  }\n\n  if (path.indexOf(\"altrppagestate.\") === 0) {\n    path = path.replace(\"altrppagestate.\", \"\");\n    if (!path) {\n      return false;\n    }\n    const oldValue = appStore.getState().altrpPageState.getProperty(path);\n    if (_.isEqual(oldValue, value)) {\n      return true;\n    }\n    if (_.isFunction(dispatch)) {\n      dispatch(changePageState(path, value));\n    } else {\n      appStore.dispatch(changePageState(path, value));\n    }\n    return true;\n  }\n  if (path.indexOf(\"altrpmeta.\") === 0) {\n    path = path.replace(\"altrpmeta.\", \"\");\n    if (!path) {\n      return false;\n    }\n    const oldValue = appStore.getState().altrpMeta.getProperty(path);\n    if (_.isEqual(oldValue, value)) {\n      return true;\n    }\n    if (_.isFunction(dispatch)) {\n      dispatch(changeAltrpMeta(path, value));\n    } else {\n      appStore.dispatch(changeAltrpMeta(path, value));\n    }\n    return true;\n  }\n  if (path.indexOf(\"altrpuser.local_storage.\") === 0) {\n    path = path.replace(\"altrpuser.\", \"\");\n    if (!path) {\n      return false;\n    }\n    const oldValue = appStore.getState().currentUser.getProperty(path);\n    if (_.isEqual(oldValue, value)) {\n      return true;\n    }\n    if (_.isFunction(dispatch)) {\n      dispatch(changeCurrentUserProperty(path, value));\n    } else {\n      appStore.dispatch(changeCurrentUserProperty(path, value));\n    }\n    return true;\n  }\n  if (path.indexOf(\"altrpforms.\") === 0) {\n    path = path.replace(\"altrpforms.\", \"\");\n    if (!path) {\n      return false;\n    }\n    const [formId, fieldName] = path.split(\".\");\n    const { formsStore } = appStore.getState();\n\n    const oldValue = _.get(formsStore, path);\n    if (_.isEqual(oldValue, value)) {\n      return true;\n    }\n    if (_.isFunction(dispatch)) {\n      dispatch(changeFormFieldValue(path, value));\n    } else {\n      appStore.dispatch(changeFormFieldValue(fieldName, value, formId, true));\n    }\n  } else\n  if (path.indexOf(\"altrpelements.\") === 0) {\n    const pathElements = path.split(\".\");\n    let [prefix, elementId, updateType, ...propName] = pathElements;\n    const component = getComponentByElementId(elementId);\n    if (!component) {\n      return true;\n    }\n    propName =  propName.join('.');\n    switch (updateType) {\n      case \"settings\": {\n        component.props.element.updateSetting(value, propName);\n        if(window['h-altrp']){\n          let settings = component.props.element.settings;\n          settings = mutate.set(settings, propName, value)\n          appStore.dispatch(addSettings(component.props.element.getId(), component.props.element.getName(), settings));\n        }\n        return true;\n      }\n      default: {\n        return true;\n      }\n    }\n  } else\n  if (path.indexOf(\"altrpareas.\") === 0) {\n    const pathElements = path.split(\".\");\n    const [prefix,  areaName,  updateType, propName] = pathElements;\n    let area = window.page_areas.find(area => area.id === areaName);\n    if(area && updateType === 'settings'){\n      if(! (area instanceof Area)){\n        area = Area.areaFactory(area);\n      }\n      area.setSetting(propName, value);\n    }\n  } else\n  if (path.indexOf(\"altrpstorage.\") === 0) {\n    path = path.replace(\"altrpstorage.\", \"\");\n    const currentStorage = getDataFromLocalStorage(\"altrpstorage\", {});\n    _.set(currentStorage, path, value);\n    saveDataToLocalStorage(\"altrpstorage\", currentStorage);\n    return true;\n  }\n  return false;\n}\n\n/**\n * Получить данные из окружения\n * @param {string} path\n * @param {*} _default\n * @param {{} | AltrpModel | null} context\n * @param {boolean} altrpCheck - проверять ли altrp\n * @return {*}\n */\nexport function getDataByPath(\n  path = \"\",\n  _default = null,\n  context = null,\n  altrpCheck = false\n) {\n  if (!path) {\n    return _default;\n  }\n  if (path.indexOf(\"{{\") !== -1) {\n    path = replaceContentWithData(path, context);\n  }\n  /**\n   * проверим путь\n   */\n  if (altrpCheck && path.trim().indexOf(\"altrp\") !== 0) {\n    return path;\n  }\n  path = path.trim();\n  let trueValue, falseValue;\n  if (path.indexOf(\"?\") !== -1 && path.indexOf(\":\") !== -1) {\n    let [_path, _right] = path.split(\"?\");\n    [trueValue, falseValue] = _right.split(\":\");\n    trueValue = trueValue.trim();\n    if (trueValue.indexOf(\".\") !== -1) {\n      trueValue = getDataByPath(trueValue, _default, context);\n    }\n\n    falseValue = falseValue.trim();\n    if (falseValue.indexOf(\".\") !== -1) {\n      falseValue = getDataByPath(falseValue, _default, context);\n    }\n    path = _path.trim();\n  }\n  /**\n   * @type {AltrpModel} currentModel\n   */\n  let {\n    currentModel,\n    currentDataStorage,\n    altrpresponses,\n    formsStore,\n    altrpPageState,\n    altrpPage,\n    currentUser,\n    altrpMeta\n  } = appStore.getState();\n  if (context) {\n    currentModel =\n      context instanceof AltrpModel ? context : new AltrpModel(context);\n  }\n  let urlParams =\n    window.currentRouterMatch instanceof AltrpModel\n      ? window.currentRouterMatch.getProperty(\"params\")\n      : {};\n\n  let queryData = queryString.parseUrl(window.location.href).query;\n\n  urlParams = _.assign(queryData, urlParams);\n\n  let value = _default;\n  if (!_.isString(path)) {\n    return value;\n  }\n  if (path.indexOf(\"altrpdata.\") === 0) {\n    path = path.replace(\"altrpdata.\", \"\");\n    value = currentDataStorage\n      ? currentDataStorage.getProperty(path, _default)\n      : \"\";\n  } else if (path.indexOf(\"altrpresponses.\") === 0) {\n    path = path.replace(\"altrpresponses.\", \"\");\n    value = altrpresponses ? altrpresponses.getProperty(path, _default) : \"\";\n  } else if (path.indexOf(\"altrpmeta.\") === 0) {\n    path = path.replace(\"altrpmeta.\", \"\");\n    value = altrpMeta ? altrpMeta.getProperty(path, _default) : \"\";\n  } else if (path.indexOf(\"altrppagestate.\") === 0) {\n    path = path.replace(\"altrppagestate.\", \"\");\n    value = altrpPageState ? altrpPageState.getProperty(path, _default) : \"\";\n  } else if (path.indexOf(\"altrpuser.\") === 0) {\n    path = path.replace(\"altrpuser.\", \"\");\n    value = currentUser ? currentUser.getProperty(path, _default) : \"\";\n  } else if (path === \"altrpuser\") {\n    value = currentUser.getData();\n  } else if (path === \"altrpmodel\") {\n    value = currentModel.getData();\n  } else if (path.indexOf(\"altrptime.\") === 0) {\n    value = getTimeValue(path.replace(\"altrptime.\", \"\"));\n  } else if (path.indexOf(\"altrpforms.\") === 0) {\n    value = _.get(formsStore, path.replace(\"altrpforms.\", \"\"), _default);\n  } else if (path.indexOf(\"altrppage.\") === 0) {\n    value = altrpPage\n      ? altrpPage.getProperty(path.replace(\"altrppage.\", \"\"), _default)\n      : \"\";\n  } else if (path.indexOf(\"altrpelements.\") === 0) {\n    const pathElements = path.split(\".\");\n    const [prefix, elementId, updateType, propName] = pathElements;\n    const component = getComponentByElementId(elementId);\n    if (!component) {\n      value = \"\";\n    } else {\n      switch (updateType) {\n        case \"settings\":\n          {\n            value = component.props.element.getSettings(propName);\n          }\n          break;\n        default: {\n          value = \"\";\n        }\n      }\n    }\n  } else if (path.indexOf(\"altrpstorage.\") === 0) {\n    path = path.replace(\"altrpstorage.\", \"\");\n    value = getDataFromLocalStorage(\"altrpstorage\", {});\n    value = _.get(value, path, _default);\n  } else if (path.indexOf(\"altrpareas.\") === 0) {\n    const pathElements = path.split(\".\");\n    const [prefix,  areaName,  updateType, propName] = pathElements;\n    let area = window.page_areas.find(area => area.id === areaName);\n    if(area && updateType === 'settings'){\n      if(! (area instanceof Area)){\n        area = Area.areaFactory(area);\n      }\n      value = area.getSetting(propName, _default);\n    }\n  } else {\n    value = currentModel.getProperty(path)\n      ? currentModel.getProperty(path)\n      : urlParams[path];\n    if (!value) {\n      value = _default;\n    }\n  }\n  if (trueValue || falseValue) {\n    value = value ? trueValue : falseValue;\n  }\n  return value;\n}\n\n/**\n * Извелкает путь из строки\n * @param {string} string\n * @return {string}\n */\nexport function extractPathFromString(string = \"\") {\n  let path = \"\";\n  if (_.isString(string)) {\n    // path = string.match(/(?<={{)([\\s\\S]+?)(?=}})/g)[0]\n    path = _.get(string.match(/{{([\\s\\S]+?)(?=}})/g), \"0\", \"\").replace(\n      \"{{\",\n      \"\"\n    );\n  }\n  return path;\n}\n/**\n * Возвращает новый объект из свояств объекта, в именах которых присутствует префикс prefix\n * @param {string} prefix - строка для поиска (например 'test')\n * @param {{}} object - если в объекте есть свойство test__test то вернет {test: test__test_value}\n * @return {{}}\n */\nexport function getObjectByPrefix(prefix = \"\", object = {}) {\n  let result = {};\n  if (!prefix) {\n    return result;\n  }\n  _.forEach(object, (value, key) => {\n    if (key.indexOf(`${prefix}__`, \"\") === 0) {\n      result[key.replace(`${prefix}__`, \"\")] = value;\n    }\n  });\n  return result;\n}\n\n/**\n * Возвращает объект из json-строки если возможно\n * @param {string} string\n * @param {*} _default\n * @return {*}\n */\nexport function mbParseJSON(string, _default = null) {\n  try {\n    return JSON.parse(string);\n  } catch (e) {\n    return _default === null ? string : _default;\n  }\n}\n\n/**\n * Функция для сравнения значений\n * @param leftValue\n * @param rightValue\n * @param operator\n * @return {boolean}\n */\nexport function altrpCompare(\n  leftValue = \"\",\n  rightValue = \"\",\n  operator = \"empty\"\n) {\n  switch (operator) {\n    case \"empty\": {\n      return _.isEmpty(leftValue);\n    }\n    case \"not_empty\": {\n      return !_.isEmpty(leftValue);\n    }\n    case \"null\": {\n      return !leftValue;\n    }\n    case \"not_null\": {\n      return !!leftValue;\n    }\n    case \"==\": {\n      if (!leftValue && !rightValue) {\n        return true;\n      }\n      if (!(_.isObject(leftValue) || _.isObject(rightValue))) {\n        return leftValue == rightValue;\n      } else {\n        return _.isEqual(leftValue, rightValue);\n      }\n    }\n    case \"===\": {\n      return _.isEqual(leftValue, rightValue);\n    }\n    case \"<>\": {\n      return !_.isEqual(leftValue, rightValue);\n    }\n    case \">\": {\n      return Number(leftValue) > Number(rightValue);\n    }\n    case \">=\": {\n      return Number(leftValue) >= Number(rightValue);\n    }\n    case \"<\": {\n      return Number(leftValue) < Number(rightValue);\n    }\n    case \"<=\": {\n      return Number(leftValue) <= Number(rightValue);\n    }\n    case \"in\": {\n      if (_.isString(rightValue)) {\n        return rightValue.indexOf(leftValue) !== -1;\n      }\n      if (!_.isArray(rightValue)) {\n        return false;\n      }\n      let result = false;\n      rightValue.forEach(item => {\n        if (!result) {\n          result = altrpCompare(leftValue, item, \"==\");\n        }\n      });\n      return result;\n    }\n    case \"not_in\": {\n      return !altrpCompare(leftValue, rightValue, \"in\");\n    }\n    case \"contain\": {\n      if (_.isString(leftValue)) {\n        return leftValue.indexOf(rightValue) !== -1;\n      }\n      if (!_.isArray(leftValue)) {\n        return false;\n      }\n      let result = false;\n      leftValue.forEach(item => {\n        if (!result) {\n          result = altrpCompare(rightValue, item, \"contain\");\n        }\n      });\n      return result;\n    }\n    case \"not_contain\": {\n      return !altrpCompare(leftValue, rightValue, \"contain\");\n    }\n  }\n}\n\nexport const CONDITIONS_OPTIONS = [\n  {\n    value: \"empty\",\n    label: \"Empty\"\n  },\n  {\n    value: \"not_empty\",\n    label: \"Not Empty\"\n  },\n  {\n    value: \"null\",\n    label: \"Null\"\n  },\n  {\n    value: \"not_null\",\n    label: \"Not Null\"\n  },\n  {\n    value: \"==\",\n    label: \"Equals\"\n  },\n  {\n    value: \"<>\",\n    label: \"Not Equals\"\n  },\n  {\n    value: \"between\",\n    label: \"Between\"\n  },\n  {\n    value: \">\",\n    label: \">\"\n  },\n  {\n    value: \">=\",\n    label: \">=\"\n  },\n  {\n    value: \"<\",\n    label: \"<\"\n  },\n  {\n    value: \"<=\",\n    label: \"<=\"\n  },\n  {\n    value: \"in\",\n    label: \"In\"\n  },\n  {\n    value: \"not_in\",\n    label: \"Not In\"\n  },\n  {\n    value: \"contain\",\n    label: \"Contain\"\n  },\n  {\n    value: \"not_contain\",\n    label: \"Not Contain\"\n  }\n];\n\nexport function isElementTopInViewport(top, scrollTop, clientHeight) {\n  return top > scrollTop && top < scrollTop + clientHeight;\n}\n\nexport function getTopPosition(element) {\n  let top = element.offsetTop;\n\n  while (element.offsetParent) {\n    element = element.offsetParent;\n    top += element.offsetTop;\n  }\n\n  return top;\n}\n\n/**\n * Получить какое-то время по шаблону `YYYY-MM-DD`\n * @param {string} path\n * @param {string | null} defaultValue\n */\nexport function getTimeValue(path, defaultValue = null) {\n  let value = defaultValue;\n\n  switch (path) {\n    case \"now\":\n      {\n        value = _.now();\n      }\n      break;\n    case \"month_start\":\n      {\n        value = startOfMonth(new Date());\n      }\n      break;\n    case \"prev_month_start\":\n      {\n        value = startOfMonth(new Date(), -1);\n      }\n      break;\n    case \"year_start\":\n      {\n        value = startOfYear(new Date());\n      }\n      break;\n    case \"prev_year_start\":\n      {\n        value = startOfYear(new Date(), -1);\n      }\n      break;\n    case \"prev_week_start\":\n      {\n        value = getPrevWeekStart();\n      }\n      break;\n    case \"next_week_start\":\n      {\n        value = getNextWeekStart();\n      }\n      break;\n    case \"week_start\":\n      {\n        value = getWeekStart();\n      }\n      break;\n  }\n  const {moment} = window.altrpHelpers;\n  value = moment(value).format(\"YYYY-MM-DD\");\n  return value;\n}\n\n/**\n * Получить начало месяца\n * @param {Date} date\n * @param {int} monthShift\n * @return {Date}\n */\nexport function startOfMonth(date, monthShift = 0) {\n  return new Date(date.getFullYear(), date.getMonth() + monthShift, 1);\n}\n/**\n * Получить начало месяца\n * @param {Date} date\n * @param {int} yearShift\n * @return {Date}\n */\nexport function startOfYear(date, yearShift = 0) {\n  return new Date(date.getFullYear() + yearShift, 0, 1);\n}\n/**\n * Получить начало месяца\n * @param {Date} date\n * @param {int} weekShift\n * @return {Date}\n */\nexport function startOfWeek(date, weekShift = 0) {\n  const {moment} = window.altrpHelpers;\n  return moment(\n    new Date(\n      date.getFullYear(),\n      date.getMonth(),\n      date.getDate() + weekShift * 7\n    )\n  ).firstDayOfWeek();\n}\n\n/**\n * Получить ссылку на состояние хранилища\n * @return {*}\n */\nexport function getCurrentStoreState() {\n  return appStore.getState();\n}\n\n/**\n * Скроллит к элементу\n * @param {{} | HTMLElement}scrollbars\n * @param {{}}element\n */\nexport function scrollToElement(scrollbars, element) {\n  let { container } = scrollbars;\n  if(scrollbars instanceof HTMLElement){\n    container = scrollbars;\n    let scroll = getOffsetTopInElement(element, scrollbars);\n    if(scroll){\n      scrollbars.scrollTop =scroll;\n    }\n\n  }\n  /**\n   * @member {HTMLElement} container\n   */\n  if (!container) {\n    return;\n  }\n  if (!_.isFunction(scrollbars.scrollTop)) {\n    return;\n  }\n\n  let parent = element.offsetParent;\n  let top = element.offsetTop;\n\n  while (parent !== container) {\n    if (! parent) {\n      /**\n       * ушли в самый корень ДОМ и контейнер не встретился\n       */\n      return;\n    }\n    top += parent.offsetTop;\n    parent = parent.offsetParent;\n  }\n  /**\n   * не получили каеое-либо значение\n   */\n  if (! top) {\n    return;\n  }\n  scrollbars.scrollTop(top);\n}\n\n/**\n * Вернет HTML элемент React компонента, у которого id = elementId\n * @param {string} elementId\n * @return {null | HTMLElement}\n */\nexport function getHTMLElementById(elementId = \"\") {\n  let HTMLElement = null;\n  if (!elementId || !elementId.trim()) {\n    return HTMLElement;\n  }\n  elementId = elementId.trim();\n  appStore.getState().elements.forEach(el => {\n    if (!el.elementWrapperRef.current) {\n      return;\n    }\n    if (!el.elementWrapperRef.current.id) {\n      return;\n    }\n    if (\n      el.elementWrapperRef.current.id\n        .toString()\n        .split(\" \")\n        .indexOf(elementId) !== -1\n    ) {\n      HTMLElement = el.elementWrapperRef.current;\n    }\n  });\n  return HTMLElement;\n}\n\n/**\n * Вернет HTML  React компонента, у которого props.element = element\n * @param {FrontElement} element\n * @return {null | HTMLElement}\n */\nexport function getWrapperHTMLElementByElement(element) {\n  if (!element) {\n    return null;\n  }\n  let HTMLElement = null;\n  appStore.getState().elements.forEach(el => {\n    if (element === el.props.element) {\n      HTMLElement = el.elementWrapperRef.current;\n    }\n  });\n  return HTMLElement;\n}\n/**\n * Вернет HTML  React компонент, у которого elementWrapperRef.current.id = elementId\n * @param {string} elementId\n * @return {null | HTMLElement}\n */\nexport function getComponentByElementId(elementId = \"\") {\n  let component = null;\n  if (!elementId || !elementId.trim()) {\n    return component;\n  }\n  elementId = elementId.trim();\n  appStore.getState().elements.forEach(el => {\n    if (!el.elementWrapperRef.current) {\n      return;\n    }\n    if (!el.elementWrapperRef.current.id) {\n      return;\n    }\n    if (\n      el.elementWrapperRef.current.id\n        .toString()\n        .split(\" \")\n        .indexOf(elementId) !== -1\n    ) {\n      component = el;\n    }\n  });\n  return component;\n}\n\n/**\n * Начало следующей недели\n * @return {moment.Moment}\n */\nfunction getNextWeekStart() {\n  const {moment} = window.altrpHelpers;\n  let today = moment();\n  let daystoMonday = 7 - (today.isoWeekday() - 1);\n  return today.add(daystoMonday, \"days\");\n}\n\n/**\n * Начало текущей недели\n * @return {moment.Moment}\n */\nfunction getWeekStart() {\n  const {moment} = window.altrpHelpers;\n  let today = moment();\n  let daystoMonday = today.isoWeekday() - 1;\n  return today.subtract(daystoMonday, \"days\");\n}\n\n/**\n * Конец Следующей недели\n * @return {moment.Moment}\n */\nfunction getNextWeekEnd() {\n  let nextMonday = getNextWeekStart();\n  return nextMonday.add(\"days\", 6);\n}\n\n/**\n * Начало предыдущей недели\n * @return {moment.Moment}\n */\nfunction getPrevWeekStart() {\n  const {moment} = window.altrpHelpers;\n  let today = moment();\n  let daystoLastMonday = today.isoWeekday() - 1 + 7;\n  return today.subtract(daystoLastMonday, \"days\");\n}\n\n/**\n * Конец предыдущей недели\n * @return {moment.Moment}\n */\nfunction getPrevWeekEnd() {\n  let lastMonday = getPrevWeekStart();\n  return lastMonday.add(\"days\", 6);\n}\n\n/**\n * Удаляет пустые свойства в объектах\n */\nexport function clearEmptyProps() {}\n\n/**\n * Заменяет в тексте конструкции типа {{altrpdata...}} на данные\n * @param content\n * @param {{} | null} modelContext\n */\n\nexport function replaceContentWithData(content = \"\", modelContext = null) {\n  if(window.SSR){\n    return  content;\n  }\n  let paths = _.isString(content) ? content.match(/{{([\\s\\S]+?)(?=}})/g) : null;\n  if (_.isArray(paths)) {\n    paths.forEach(path => {\n      path = path.replace(\"{{\", \"\");\n      let value = getDataByPath(path, \"\", modelContext);\n      if (value === 0) {\n        value = \"0\";\n      }\n      path = escapeRegExp(path);\n      content = content.replace(new RegExp(`{{${path}}}`, \"g\"), value || \"\");\n    });\n  }\n  return content;\n}\n\n/**\n * Вспомогательные функции для работы с данными виджетов\n */\nwindow.altrphelpers = {\n  /**\n   * Возвращает сумму полей в массиве объектов\n   * @param {string}fieldName\n   * @return {number}\n   */\n  sumFields: function sumFields(fieldName) {\n    let sum = 0;\n    if (!_.isObject(this.context)) {\n      return sum;\n    }\n    if (!_.isArray(this.context)) {\n      this.context = [this.context];\n    }\n    this.context.forEach(c => {\n      sum += Number(_.get(c, fieldName)) || 0;\n    });\n    return sum;\n  }\n};\n\n/**\n * Функция выводит определенный элемент на печать\n * @params {HTMLElement[]} elements\n * @params {null || HTMLElement} stylesTag\n */\nexport function printElements(elements, title = \"\") {\n  let myWindow = window.open(\"\", \"my div\", \"height=400,width=1200\");\n  myWindow.document.write(`<html><head><title>${title}</title></head>`);\n  myWindow.document.write(\"<body >\");\n  elements = _.isArray(elements) ? elements : [elements];\n  let headContent = '';\n  myWindow.document.write(\"</body></html>\");\n  let bodyContent = '';\n  elements.forEach(element => {\n    if(element instanceof HTMLHeadElement){\n      headContent = element.innerHTML;\n      return\n    }\n    bodyContent += element.outerHTML;\n  });\n  myWindow.document.close(); // necessary for IE >= 10\n  myWindow.document.head.innerHTML = headContent;\n  bodyContent = bodyContent\n    .replace(/<tr/g, '<div className=\"altrp-table-tr\"')\n    .replace(/<th/g, '<div')\n    .replace(/<\\/tr>/g, '</div>')\n    .replace(/<\\/th>/g, '</div>')\n  myWindow.document.body.innerHTML = bodyContent;\n  myWindow.focus(); // necessary for IE >= 10\n  delay(250).then(()=>{\n    myWindow.print();\n    myWindow.close();\n  })\n  return true;\n}\n\n/**\n * Функция конвертирует HTML в PDF\n * @params {HTMLElement[]} element\n * @params {string} filename\n */\nexport async function elementsToPdf(elements, filename = \"\") {\n  let html2pdf = (await import(/* webpackChunkName: 'html2pdf' */\"html2pdf.js\")).default;\n  elements = elements.body ? elements.body : elements;\n  if (!elements) {\n    return {\n      success: true\n    };\n  }\n  let myWindow = window.open(\"\", \"my div\", \"height=400,width=1440\");\n  myWindow.document.write(`<html><head><title></title></head>`);\n  myWindow.document.write(\"</head><body >\");\n  elements = _.isArray(elements) ? elements : [elements];\n  elements.forEach(element => {\n    myWindow.document.write(element.outerHTML);\n  });\n  myWindow.document.write(\"</body></html>\");\n  return new Promise((resolve, reject) => {\n    html2pdf()\n      .from(myWindow.document.body)\n      .save(filename);\n    myWindow.close();\n    resolve({ success: true });\n  });\n}\n\n/**\n * Забирает данные из HTML таблицы\n * @param {{}}HTMLElement\n */\nexport function dataFromTable(HTMLElement) {\n  const data = [];\n  const headers = [];\n  if (!(HTMLElement && HTMLElement.querySelectorAll)) {\n    return data;\n  }\n  let table = HTMLElement.querySelector(\".altrp-table\");\n  if (!table && HTMLElement.querySelector(\".altrp-table-tr\")) {\n    table = HTMLElement;\n  }\n  if (!table) {\n    return data;\n  }\n  const ths = table.querySelectorAll(\".altrp-table-th\");\n  _.each(ths, th => {\n    // if (th.innerText) {\n    headers.push(th.innerText || \"\");\n    // }\n  });\n  const rows = table.querySelectorAll(\".altrp-table-tbody .altrp-table-tr\");\n  _.each(rows, row => {\n    const cells = row.querySelectorAll(\".altrp-table-td\");\n    const part = {};\n    headers.forEach((header, idx) => {\n      if (!header) {\n        return;\n      }\n      part[header] = cells[idx].innerText || \"\";\n    });\n    data.push(part);\n  });\n  return data;\n}\n\n/**\n * Создать csv-файл из данных и скачать\n * @param {{}} data\n * @param {string} filename\n */\nexport async function dataToCSV(data = {}, filename) {\n  filename = filename || \"File\";\n  if (!data) {\n    return { success: false };\n  }\n  if (_.isObject() && !_.isArray(data)) {\n    data = [data];\n  }\n  if (!_.isArray(data)) {\n    return { success: false };\n  }\n\n  let headers = _.toPairs(data[0]).map(([name, value]) => name);\n  let csvContent =\n    // 'data:text/csv;charset=utf-8,'\n    \"\" +\n    headers.join(\";\") +\n    \"\\n\" +\n    data\n      .map(item => {\n        let line = \"\";\n        headers.forEach((h, idx) => {\n          let value = _.get(item, h) || \"\";\n          if (_.isObject(value)) {\n            value = JSON.stringify(value);\n          }\n\n          line +=\n            (_.isString(value) ? value.replace(/\\s/g, \" \") : value) +\n            (headers.length === idx + 1 ? \"\" : \";\");\n        });\n        return line;\n      })\n      .join(\"\\n\");\n  let blob = new Blob([csvContent], {\n    type: \"text/csv\",\n    charset: \"windows-1251\"\n    // charset: 'utf-8',\n  });\n  let link = document.createElement(\"a\");\n  link.setAttribute(\"href\", window.URL.createObjectURL(blob));\n  link.setAttribute(\"download\", filename + \".csv\");\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n  return { success: true };\n}\n\n/**\n * Генерация и загрузка XLS-файла\n * @param {Object data} Объект данных\n * @param {String} filename Имя файла\n */\nexport async function dataToXLS(data, filename = \"table\", templateName = \"\") {\n  const formData = new FormData();\n  formData.append(\"filename\", filename);\n  formData.append(\"data\", JSON.stringify(data));\n  formData.append(\"template\", templateName);\n\n  const response = await fetch(\"/api/export-excel\", {\n    method: \"POST\",\n    body: formData\n  });\n\n  return await response.blob();\n}\n\n/**\n * Генерация и загрузка XML-файла\n * @param {Object data} Объект данных\n * @param {String} filename Имя файла\n */\nexport async function dataToXML(data, filename = \"table\") {\n  const formData = new FormData();\n  formData.append(\"filename\", filename);\n  formData.append(\"data\", JSON.stringify(data));\n\n  const response = await fetch(\"/api/export-xml\", {\n    method: \"POST\",\n    body: formData\n  });\n\n  return await response.blob();\n}\n\n/**\n * Логиним пользователя\n * @param {{}} data\n * @param {string} formId\n * @return {Promise<{}>}\n */\nexport async function altrpLogin(data = {}, formId = \"login\") {\n  data.altrpLogin = true;\n  let res;\n  try {\n    res = await new Resource({ route: \"/login\" }).post(data);\n  } catch (error) {\n    let status = error.status;\n    if (error.res instanceof Promise) {\n      res = await error.res;\n    }\n    if (error instanceof Promise) {\n      res = await error;\n    }\n    res = mbParseJSON(res, {});\n    status && (res.__status = status);\n  }\n  appStore.dispatch(addResponseData(formId, res));\n  if (!(res.success || res._token)) {\n    return {\n      success: false\n    };\n  }\n  _token = res._token;\n\n  let currentUser = await new Resource({\n    route: \"/ajax/current-user\"\n  }).getAll();\n  currentUser = currentUser.data;\n  appStore.dispatch(changeCurrentUser(currentUser));\n  let routes = [];\n  try {\n    let routesData = await new Resource({\n      route: \"/ajax/routes\"\n    }).getAll();\n\n    for (let _data of routesData.pages) {\n      routes.push(Route.routeFabric(_data));\n    }\n    appStore.dispatch(changeAppRoutes(routes));\n  } catch (err) {\n    console.error(err);\n    return { success: false };\n  }\n  return { success: true };\n}\n\n/**\n * Выход\n * @return {Promise<{}>}\n */\nexport async function altrpLogout() {\n  let res = await new Resource({ route: \"/logout\" }).post();\n  if (!(res.success || res._token)) {\n    return {\n      success: false\n    };\n  }\n  _token = res._token;\n\n  let currentUser = await new Resource({\n    route: \"/ajax/current-user\"\n  }).getAll();\n  currentUser = currentUser.data;\n  appStore.dispatch(changeCurrentUser(currentUser));\n  let routes = [];\n  try {\n    let routesData = await new Resource({\n      route: \"/ajax/routes\"\n    }).getAll();\n\n    for (let _data of routesData.pages) {\n      routes.push(Route.routeFabric(_data));\n    }\n    appStore.dispatch(changeAppRoutes(routes));\n  } catch (err) {\n    console.error(err);\n    return { success: false };\n  }\n  return { success: true };\n}\n\nexport function cutString(string, maxLength = 80) {\n  if (string.length <= maxLength) return string;\n  return string.slice(0, maxLength) + \"...\";\n}\n\nexport function sortOptions(options, sortDirection) {\n  options.sort((a, b) =>\n    a.label.toLowerCase() > b.label.toLowerCase()\n      ? 1\n      : b.label.toLowerCase() > a.label.toLowerCase()\n      ? -1\n      : 0\n  );\n  return sortDirection === \"asc\" ? options : options.reverse();\n}\n/**\n * рекурсивно считает общую длину по пути\n * @param {{}} object\n * @param {string} path\n * @return {number}\n */\nexport function recurseCount(object = {}, path = \"\") {\n  let count = 0;\n  if (!path) {\n    return count;\n  }\n  let array = _.get(object, path, []);\n  if (!array.length) {\n    count++;\n    return count;\n  }\n  array.forEach(item => {\n    count += recurseCount(item, path);\n  });\n  return count;\n}\n\n/**\n * Вовращает AltrpModel, в котором храняться все источники данных на странице\n * @param {{}} model\n * @return {AltrpModel}\n */\nexport function getAppContext(model = null) {\n  const { currentModel } = appStore.getState();\n  if(model instanceof AltrpModel){\n    model = model.getData();\n  }\n  const currentModelData = model ? model : currentModel.getData();\n  const urlParams = _.cloneDeep(\n    window.currentRouterMatch instanceof AltrpModel\n      ? window.currentRouterMatch.getProperty(\"params\")\n      : {}\n  );\n  const context = new AltrpModel(_.assign(urlParams, currentModelData));\n  const {\n    altrpPageState,\n    altrpPage,\n    altrpMeta,\n    currentDataStorage,\n    currentUser,\n    altrpresponses,\n    formsStore\n  } = appStore.getState();\n\n  context.setProperty(\"altrpdata\", currentDataStorage);\n  context.setProperty(\"altrppagestate\", altrpPageState);\n  context.setProperty(\"altrpmeta\", altrpMeta);\n  context.setProperty(\"altrpuser\", currentUser);\n  context.setProperty(\"altrpresponses\", altrpresponses);\n  context.setProperty(\"altrpforms\", formsStore);\n  context.setProperty(\"altrppage\", altrpPage);\n  return context;\n}\n\n/**\n * Сохраняет состояние виджет в localStorage\n * Для виджетов ,которые могут сохранять состояния при смене страниц\n * @param {string} widgetId\n * @param {*} state\n * @return {boolean}\n */\nexport function storeWidgetState(widgetId, state = null) {\n  if (!widgetId) {\n    return false;\n  }\n  const path = `widget_state${widgetId}`;\n  return saveDataToLocalStorage(path, state);\n}\n/**\n * Забирает состояние из localStorage\n * Для виджетов ,которые могут сохранять состояния при смене страниц\n * @param {string} widgetId\n * @param {*} _default\n * @return {boolean}\n */\nexport function getWidgetState(widgetId, _default = null) {\n  if (!widgetId) {\n    return _default;\n  }\n  const path = `widget_state${widgetId}`;\n  return getDataFromLocalStorage(path, _default);\n}\n\n/**\n * Сохранить данные в localStorage\n * @param {string} name\n * @param {*} data\n * @return {boolean}\n */\nexport function saveDataToLocalStorage(name, data) {\n  if (!name) {\n    return false;\n  }\n  if (_.isObject(data)) {\n    data = JSON.stringify(data);\n  }\n  try {\n    localStorage.setItem(name, data);\n  } catch (e) {\n    return true;\n  }\n  return true;\n}\n/**\n * Сохранить данные в localStorage\n * @param {string} name\n * @param {*} _default\n * @return {*}\n */\nexport function getDataFromLocalStorage(name, _default = undefined) {\n  if (!name) {\n    return _default;\n  }\n  let value\n  try {\n    value = localStorage.getItem(name);\n    if (!value) {\n      return _default;\n    }\n    value = JSON.parse(value);\n  } catch (error) {\n  }\n  if (_.isString(value) && Number(value)) {\n    value = Number(value);\n  }\n  return value || _default;\n}\nexport function scrollbarWidth() {\n  // thanks too https://davidwalsh.name/detect-scrollbar-width\n  const scrollDiv = document.createElement(\"div\");\n  scrollDiv.setAttribute(\n    \"style\",\n    \"width: 100px; height: 100px; overflow: scroll; position:absolute; top:-9999px;\"\n  );\n  document.body.appendChild(scrollDiv);\n  const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n  document.body.removeChild(scrollDiv);\n  return scrollbarWidth;\n}\n\n/**\n * Добавляем свойство altrpIndex для всех эементов-объектов массива\n * для их идентификации внутри повторяющихся карточек\n * @param {[]} array\n */\nexport function setAltrpIndex(array = []) {\n  if (!_.isArray(array)) {\n    return;\n  }\n  array.forEach((item, idx) => {\n    if (!_.isObject(item)) {\n      return;\n    }\n    if (item instanceof AltrpModel) {\n      item.setProperty(\"altrpIndex\", idx);\n      return;\n    }\n    item.altrpIndex = idx;\n  });\n}\n\n/**\n *\n * @param {string} font\n * @return {*}\n */\nexport function renderFontLink(font) {\n  if (altrpFontsSet[font] !== GOOGLE_FONT) {\n    return null;\n  }\n  font = font.replace(/ /g, \"+\");\n  font +=\n    \":100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic\";\n  let fontUrl =\n    \"https://fonts.googleapis.com/css?family=\" + font + \"&subset=cyrillic\";\n  fontUrl = encodeURI(fontUrl);\n  return <link rel=\"stylesheet\" key={fontUrl} href={fontUrl} />;\n}\n\n/**\n * Включен ли режим тестирования\n */\nexport function isAltrpTestMode() {\n  return window.location.href.indexOf(\"altrp-test=true\") > 0;\n}\n\n/**\n * случайная строка\n * @return {string}\n */\nexport function altrpRandomId() {\n  return Math.random()\n    .toString(36)\n    .substr(2, 9);\n}\n\n/**\n * Кнопки для пагинации\n * @param pageIndex\n * @param pageCount\n * @param first_last_buttons_count\n * @param middle_buttons_count\n * @return {*[]}\n */\nexport function generateButtonsArray(\n  pageIndex,\n  pageCount,\n  first_last_buttons_count,\n  middle_buttons_count\n) {\n  const buttonsSum = first_last_buttons_count + middle_buttons_count;\n  const lastButtons = Array.from(\n    { length: first_last_buttons_count },\n    (_, i) => pageCount - i - 1\n  ).reverse();\n  const middleButtons = Array.from(\n    { length: middle_buttons_count },\n    (_, i) => pageIndex - Math.floor(middle_buttons_count / 2) + i\n  );\n\n  if (pageIndex + 1 < buttonsSum) {\n    return [...Array(buttonsSum).keys(), \"ellipsis\", ...lastButtons];\n  }\n  if (\n    pageIndex >=\n    pageCount -\n      first_last_buttons_count -\n      1 -\n      Math.floor(middle_buttons_count / 2)\n  ) {\n    return [\n      ...Array(first_last_buttons_count).keys(),\n      \"ellipsis\",\n      ...Array.from(\n        { length: first_last_buttons_count + middle_buttons_count },\n        (_, i) => pageCount - i - 1\n      ).reverse()\n    ];\n  }\n\n  return [\n    ...Array(first_last_buttons_count).keys(),\n    \"ellipsis\",\n    ...middleButtons,\n    \"ellipsis\",\n    ...lastButtons\n  ];\n}\n\n/**\n * Проверяем текст на соответствие маске\n * @param {string} value\n * @param {[]} mask\n * @return {boolean}\n */\nexport function isValueMatchMask(value, mask) {\n  if (!value || value.length !== mask.length) {\n    return false;\n  }\n  return (\n    value.length &&\n    value\n      .split(\"\")\n      .every((char, index) => char === mask[index] || char.match(mask[index]))\n  );\n}\n\n/**\n * Вернуть экземпляр конвертера необходимого типа (array - ArrayConverter и т. д.)\n * @return {DataConverter}\n */\nexport function getConverter(data) {\n  switch (data.data_type) {\n    case \"array\":\n      return new ArrayConverter(data);\n  }\n  return new DataConverter();\n}\n\n/**\n * Конвертируются данные\n * @param {{} | []} settings\n * @param {*} data\n */\nexport function convertData(settings, data) {\n  if (_.isArray(settings)) {\n    settings.forEach(item => {\n      const converter = getConverter(item);\n      data = converter.convertData(data);\n    });\n  }\n  if (settings.data_type) {\n    const converter = getConverter(settings);\n    data = converter.convertData(data);\n  }\n  return data;\n}\nexport function renderIcon(isHidden, icon, defaultIcon, className) {\n  if (isHidden) return null;\n\n  return (\n    <span className={className}>\n      {icon && icon.assetType ? renderAssetIcon(icon) : defaultIcon}\n    </span>\n  );\n  // if()\n}\n\n/**\n * Перенаправление на другую страницу по настройкам LinkController\n * @param {{}} linkSettings\n * @param {{}} e\n * @param {{}} context\n */\nexport function redirect(linkSettings, e, context = {}) {\n  if (_.get(linkSettings, \"toPrevPage\")) {\n    if(window.frontAppRouter){\n      frontAppRouter.history.goBack();\n    } else {\n      history.back();\n    }\n    return;\n  }\n  if (!_.get(linkSettings, \"url\")) {\n    return;\n  }\n  e.preventDefault();\n  e.stopPropagation();\n  let { url } = linkSettings;\n  url = replaceContentWithData(url, context);\n  if (linkSettings.openInNew) {\n    window.open(url, \"_blank\");\n    return;\n  }\n  if (linkSettings.tag === \"a\" || ! window.frontAppRouter) {\n    window.location.assign(url);\n  } else {\n    frontAppRouter.history.push(url);\n  }\n\n}\n\nexport function validateEmail(email) {\n  const re = /^(([^<>()[\\]\\\\.,;:\\s@']+(\\.[^<>()[\\]\\\\.,;:\\s@']+)*)|('.+'))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n  return re.test(String(email).toLowerCase());\n}\n\n/**\n * значение настройки в зависимости от разрешения можно использовать вне виджетов с объектом настроек\n * @param {{}} settings - объект настроек\n * @param {string} settingName\n * @param {string} elementState\n * @param {*} _default\n * @return {*}\n */\nexport function getResponsiveSetting(\n  settings,\n  settingName,\n  elementState = \"\",\n  _default = null\n) {\n  let  currentScreen\n  try{\n    currentScreen = window.parent.appStore.getState().currentScreen\n  } catch(e){\n    console.trace(e);\n    currentScreen = window.appStore.getState().currentScreen\n  }\n  let _settingName = `${settingName}_${elementState}_`;\n  if (currentScreen.name === CONSTANTS.DEFAULT_BREAKPOINT) {\n    let setting = settings[_settingName];\n\n    if (setting === undefined) {\n      if(elementState){\n        return undefined\n      }\n      setting = _.get(settings, settingName, _default);\n    }\n    return setting;\n  }\n  let suffix = currentScreen.name;\n  _settingName = `${settingName}_${elementState}_${suffix}`;\n  let setting = settings[_settingName];\n  if (setting === undefined) {\n    for (let screen of [...CONSTANTS.SCREENS].reverse()) {\n      if (\n        currentScreen.id < screen.id ||\n        screen.name === CONSTANTS.DEFAULT_BREAKPOINT\n      ) {\n        continue;\n      }\n\n      _settingName = `${settingName}_${elementState}_${screen.name}`;\n\n      if (settings[_settingName] !== undefined) {\n        setting = settings[_settingName];\n        break;\n      }\n    }\n  }\n\n\n\n  if (setting === undefined) {\n    if(elementState){\n      return undefined\n    }\n    setting = _.get(settings, settingName, _default);\n  }\n  return setting;\n}\n\n/**\n * Заменяет false, null, true в строке на соответствующие значения\n * @param {string} value\n * @return {*}\n */\nexport function valueReplacement(value) {\n  switch (value) {\n    case \"true\":\n      return true;\n    case \"false\":\n      return false;\n    case \"null\":\n      return null;\n  }\n  return value;\n}\n\n/**\n * Задержка и с интерфейсом промиса\n * @param ms\n * @return {Promise}\n */\nexport function delay(ms) {\n  if (_.isString(ms)) {\n    ms = Number(ms);\n  }\n  return new Promise((resolve, reject) => {\n    setTimeout(resolve, ms);\n  });\n}\n\n/**\n * Подготавливает URL для шаблона письма\n * @param {string} url\n * @param {{} | null} context\n * @return {string}\n */\nexport function prepareURLForEmail(url, context = null) {\n  if (!_.isString(url) || !url) {\n    return url;\n  }\n  url = url.trim();\n  if (url.indexOf(\"http\") !== 0) {\n    url = location.origin + url;\n  }\n  return parseURLTemplate(url, context);\n}\n\nexport function parseIDFromYoutubeURL(youtubeURL) {\n  const startIndex = youtubeURL.indexOf(\"v=\") + 2;\n  const endIndex = youtubeURL.indexOf(\"&\", startIndex);\n\n  return youtubeURL.substring(startIndex, endIndex);\n}\n\n/**\n *\n * @param {{}} context\n * @return {{}}\n */\nexport function prepareContext(context) {\n  context.altrpdata = appStore.getState().currentDataStorage.getData();\n  context.altrpmodel = appStore.getState().currentModel.getData();\n  context.altrpuser = appStore.getState().currentUser.getData();\n  context.altrppagestate = appStore.getState().altrpPageState.getData();\n  context.altrpresponses = appStore.getState().altrpresponses.getData();\n  context.altrpmeta = appStore.getState().altrpMeta.getData();\n  return context;\n}\n\n/**\n *\n * Определеят явлется ли строка валидным JSON\n * @param {string} JSONString\n * @return {boolean}\n */\nexport function isJSON(JSONString = \"\") {\n  try {\n    JSON.parse(JSONString);\n    return true;\n  } catch (error) {\n    return false;\n  }\n}\n\n/**\n * Парсит xml строку в объект\n * @param xml\n * @param arrayTags\n */\nfunction parseXml(xml, arrayTags) {\n  let dom = null;\n  if (window.DOMParser) dom = new DOMParser().parseFromString(xml, \"text/xml\");\n  else if (window.ActiveXObject) {\n    dom = new ActiveXObject(\"Microsoft.XMLDOM\");\n    dom.async = false;\n    if (!dom.loadXML(xml))\n      throw dom.parseError.reason + \" \" + dom.parseError.srcText;\n  } else throw new Error(\"cannot parse xml string!\");\n\n  function parseNode(xmlNode, result) {\n    if (xmlNode.nodeName === \"#text\") {\n      let v = xmlNode.nodeValue;\n      if (v.trim()) result[\"#text\"] = v;\n      return;\n    }\n\n    let jsonNode = {},\n      existing = result[xmlNode.nodeName];\n    if (existing) {\n      if (!Array.isArray(existing))\n        result[xmlNode.nodeName] = [existing, jsonNode];\n      else result[xmlNode.nodeName].push(jsonNode);\n    } else {\n      if (arrayTags && arrayTags.indexOf(xmlNode.nodeName) !== -1)\n        result[xmlNode.nodeName] = [jsonNode];\n      else result[xmlNode.nodeName] = jsonNode;\n    }\n\n    if (xmlNode.attributes)\n      for (let attribute of xmlNode.attributes)\n        jsonNode[attribute.nodeName] = attribute.nodeValue;\n\n    for (let node of xmlNode.childNodes) parseNode(node, jsonNode);\n  }\n\n  let result = {};\n  for (let node of dom.childNodes) parseNode(node, result);\n\n  return result;\n}\nfunction escapeRegExp(string) {\n  return string.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\"); // $& means the whole matched string\n}\n\n/**\n * Вернуть значение из строки\n * @param string\n */\nexport function parseStringValue(string) {\n  let value = string;\n\n  if (Number(value)) {\n    return Number(value);\n  }\n  switch (value) {\n    case \"true\": {\n      return true;\n    }\n    case \"false\": {\n      return false;\n    }\n    case \"null\": {\n      return null;\n    }\n    case \"undefined\": {\n      return undefined;\n    }\n    case \"0\": {\n      return 0;\n    }\n  }\n  return value;\n}\n\n/**\n *\n * @return {*[]}\n */\nexport function getBreadcrumbsItems(){\n  if(window['h-altrp'] && window.breadcrumbsItems){\n    return window.breadcrumbsItems;\n  }\n  let items = [];\n  if(isEditor(0)){\n    return items;\n  }\n  const currentId = window['h-altrp'] ? window.page_id : window.currentPageId\n  const {routes} = appStore.getState().appRoutes\n  let breadcrumbsClone = [];\n  let idCurrent = 0;\n  routes.forEach((route, idx) => {\n    if(currentId === route.id) {\n      idCurrent = idx\n    }\n  })\n\n  breadcrumbsClone.push(routes[idCurrent])\n\n  function getParent(parentId) {\n    routes.forEach(route => {\n      if(route.id === parentId) {\n        breadcrumbsClone.push(route)\n        if(route.parent_page_id) {\n          getParent(route.parent_page_id)\n        }\n      }\n    })\n  }\n\n  if(routes[idCurrent].parent_page_id) {\n    getParent(routes[idCurrent].parent_page_id)\n  }\n\n  items = breadcrumbsClone.reverse()\n  if(window['h-altrp']){\n    window.breadcrumbsItems = items;\n  }\n  return items;\n}\n","export const CHANGE_PAGE_STATE = 'CHANGE_PAGE_STATE';\r\nexport const CLEAR_PAGE_STATE = 'CLEAR_PAGE_STATE';\r\n\r\n/**\r\n *\r\n * @param {string}stateName\r\n * @param {*} stateValue\r\n * @return {{}} -\r\n *   {\r\n *     type: {string},\r\n *     stateValue: {},\r\n *     stateName: {string},\r\n *   }\r\n */\r\nexport function changePageState(stateName, stateValue = {}) {\r\n  return {\r\n    type: CHANGE_PAGE_STATE,\r\n    stateName,\r\n    stateValue\r\n  };\r\n}\r\n/**\r\n * Очищает состояние страницы\r\n */\r\nexport function clearPageState() {\r\n  return {\r\n    type: CLEAR_PAGE_STATE,\r\n  };\r\n}\r\n","export const CHANGE_CURRENT_USER = 'CHANGE_CURRENT_USER';\r\nexport const SET_NOTICE_FOR_USER = 'SET_NOTICE_FOR_USER';\r\nexport const SET_USERS_ONLINE = 'SET_USERS_ONLINE';\r\nexport const CHANGE_CURRENT_USER_PROPERTY = \"CHANGE_CURRENT_USER_PROPERTY\";\r\n\r\nexport function changeCurrentUser(user) {\r\n  return {\r\n    type: CHANGE_CURRENT_USER,\r\n    user: user || {}\r\n  };\r\n}\r\n\r\nexport function setUserNotice(notice){\r\n  return { type: SET_NOTICE_FOR_USER, notice }\r\n}\r\n\r\nexport function setUsersOnline(members){\r\n  return { type: SET_USERS_ONLINE, members }\r\n}\r\n\r\nexport function changeCurrentUserProperty(path, value) {\r\n  return {\r\n    type: CHANGE_CURRENT_USER_PROPERTY,\r\n    path: path || \"\",\r\n    value: value || \"\"\r\n  };\r\n}\r\n","export const ADD_RESPONSE_DATA = 'ADD_RESPONSE_DATA';\r\nexport const CLEAR_ALL_RESPONSE_DATA = 'CLEAR_ALL_RESPONSE_DATA';\r\n\r\n/**\r\n * Сохраняет ответ сервера при отправке формы в хранилище\r\n * @param {string}formId\r\n * @param {{}} data\r\n * @return {{}} -\r\n *   {\r\n *     type: {string},\r\n *     dataStorage: {object},\r\n *     dataStorageName: {string},\r\n *   }\r\n */\r\nexport function addResponseData(formId, data = {}) {\r\n  if(data.data) {\r\n    data = data.data;\r\n  }\r\n  return {\r\n    type: ADD_RESPONSE_DATA,\r\n    data,\r\n    formId\r\n  };\r\n}\r\n\r\n\r\n/**\r\n * Очищает хранилище\r\n * @return {{type: string}}\r\n */\r\nexport function clearAllResponseData(){\r\n  return {\r\n    type: CLEAR_ALL_RESPONSE_DATA,\r\n  };\r\n}\r\n\r\n","/**\n * Set a value by a dot path.\n * @param obj The object to evaluate.\n * @param prop The path to be set.\n * @param value The value to set.\n */\nfunction set(obj, prop, value) {\n\tprop = typeof prop === 'number' ? propToArray(prop.toString()) : typeof prop === 'string' ? propToArray(prop) : prop;\n\n\tconst setPropImmutableRec = (obj, prop, value, i) => {\n\t\tlet clone, head = prop[i];\n\n\t\tif (prop.length > i) {\n\t\t\tif (Array.isArray(obj)) {\n\t\t\t\thead = getArrayIndex(head, obj);\n\t\t\t\tclone = obj.slice();\n\t\t\t} else {\n\t\t\t\tclone = Object.assign({}, obj);\n\t\t\t}\n\t\t\tclone[head] = setPropImmutableRec(obj[head] !== undefined ? obj[head] : {}, prop, value, i + 1);\n\t\t\treturn clone;\n\t\t}\n\n\t\treturn typeof value === 'function' ? value(obj) : value;\n\t};\n\n\treturn setPropImmutableRec(obj, prop, value, 0);\n}\n\n/**\n * Get a value by a dot path.\n * @param obj The object to evaluate.\n * @param prop The path to value that should be returned.\n * @param [value] The default value that should be returned when the target doesn't exist.\n */\nfunction get(obj, prop, value) {\n\tprop = typeof prop === 'number' ? propToArray(prop.toString()) : typeof prop === 'string' ? propToArray(prop) : prop;\n\n\tfor (var i = 0; i < prop.length; i++) {\n\t\tif (obj === null || typeof obj !== 'object') {\n\t\t\treturn value;\n\t\t}\n\t\tlet head = prop[i];\n\t\tif (Array.isArray(obj) && head === '$end') {\n\t\t\thead = obj.length - 1;\n\t\t}\n\t\tobj = obj[head];\n\t}\n\n\tif (typeof obj === 'undefined') {\n\t\treturn value;\n\t}\n\n\treturn obj;\n}\n\n/**\n * Delete a property by a dot path.\n * If target container is an object, the property is deleted.\n * If target container is an array, the index is deleted.\n * If target container is undefined, nothing is deleted.\n * @param obj The object to evaluate.\n * @param prop The path to the property or index that should be deleted.\n */\nfunction _delete(obj, prop) {\n\tprop = typeof prop === 'number' ? propToArray(prop.toString()) : typeof prop === 'string' ? propToArray(prop) : prop;\n\n\tconst deletePropImmutableRec = (obj, prop, i) => {\n\t\tlet clone, head = prop[i];\n\n\t\tif (obj === null || typeof obj !== 'object' ||\n\t\t\t!Array.isArray(obj) && obj[head] === undefined) {\n\n\t\t\treturn obj;\n\t\t}\n\n\t\tif (prop.length - 1 > i) {\n\t\t\tif (Array.isArray(obj)) {\n\t\t\t\thead = getArrayIndex(head, obj);\n\t\t\t\tclone = obj.slice();\n\t\t\t} else {\n\t\t\t\tclone = Object.assign({}, obj);\n\t\t\t}\n\n\t\t\tclone[head] = deletePropImmutableRec(obj[head], prop, i + 1);\n\t\t\treturn clone;\n\t\t}\n\n\t\tif (Array.isArray(obj)) {\n\t\t\thead = getArrayIndex(head, obj);\n\t\t\tclone = [].concat(obj.slice(0, head), obj.slice(head + 1));\n\t\t} else {\n\t\t\tclone = Object.assign({}, obj);\n\t\t\tdelete clone[head];\n\t\t}\n\n\t\treturn clone;\n\t};\n\n\treturn deletePropImmutableRec(obj, prop, 0);\n}\n\n/**\n * Toggles a value.  The target value is evaluated using Boolean(currentValue).  The result will always be a JSON boolean.\n * Be careful with strings as target value, as \"true\" and \"false\" will toggle to false, but \"0\" will toggle to true.\n * Here is what Javascript considers false:  0, -0, null, false, NaN, undefined, and the empty string (\"\")\n * @param obj The object to evaluate.\n * @param prop The path to the value.\n */\nfunction toggle(obj, prop) {\n\tconst curVal = get(obj, prop);\n\treturn set(obj, prop, !Boolean(curVal));\n}\n\n/**\n * Merges a value.  The target value must be an object, array, null, or undefined.\n * If target is an object, Object.assign({}, target, param) is used.\n * If target an array, target.concat(param) is used.\n * If target is null or undefined, the value is simply set.\n * @param obj The object to evaluate.\n * @param prop The path to the value.\n * @param val The value to merge into the target value.\n */\nfunction merge(obj, prop, val) {\n\tconst curVal = get(obj, prop);\n\tif (typeof curVal === 'object') {\n\t\tif (Array.isArray(curVal)) {\n\t\t\treturn set(obj, prop, curVal.concat(val));\n\t\t} else if (curVal === null) {\n\t\t\treturn set(obj, prop, val);\n\t\t}\n\t\telse {\n\t\t\tlet merged = Object.assign({}, curVal, val);\n\t\t\treturn set(obj, prop, merged);\n\t\t}\n\t} else if (typeof curVal === 'undefined') {\n\t\treturn set(obj, prop, val);\n\t}\n\telse {\n\t\treturn obj;\n\t}\n}\n\nfunction getArrayIndex(head, obj) {\n\tif (head === '$end') {\n\t\thead = Math.max(obj.length - 1, 0);\n\t}\n\tif (!/^\\+?\\d+$/.test(head)) {\n\t\tthrow new Error(`Array index '${head}' has to be an integer`);\n\t}\n\treturn parseInt(head);\n}\n\nfunction propToArray(prop) {\n\treturn prop.split('.').reduce((ret, el, index, list) => {\n\t\tconst last = index > 0 && list[index - 1];\n\t\tif (last && /(?:^|[^\\\\])\\\\$/.test(last)) {\n\t\t\tconst prev = ret.pop();\n\t\t\tret.push(prev.slice(0, -1) + '.' + el);\n\t\t} else {\n\t\t\tret.push(el);\n\t\t}\n\t\treturn ret;\n\t}, []);\n}\n\nmodule.exports = {\n\tset,\n\tget,\n\tdelete: _delete,\n\ttoggle,\n\tmerge\n};\n"],"sourceRoot":""}