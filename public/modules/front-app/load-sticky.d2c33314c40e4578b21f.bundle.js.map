{"version":3,"sources":["webpack:///./resources/modules/front-app/src/js/functions/load-sticky.js"],"names":["loadSticky","document","querySelector","loadJQuery","frontAppContainer","getElementById","$","length","loadStickyJS","window","altrpLibs","Sticky","console","error","sticky","stickyContainer","stickyClass","addEventListener","update","loadStickyPlugin","each","$this","this","stickyOptions","data","topSpacing","bottomSpacing","attr","promise","Promise","res","rej","resolve","reject","jQueryStickyPluginScript","head","appendChild","createElement","innerHTML","setAttribute","onload","onerror","default"],"mappings":"iNACe,SAAgBA,IAA/B,+B,wCAAe,8FACTC,SAASC,cAAc,uDADd,iCAEgB,+BAFhB,uBAEJC,EAFI,EAEJA,WAFI,SAGLA,IAHK,UAILC,EAAoBH,SAASI,eAAe,cAC/CC,EAAE,oCAAoCC,OAL9B,kCAMHC,IANG,WAOJC,OAAOC,WAAeD,OAAOC,UAAUC,OAPnC,wBAQPC,QAAQC,MAAM,8BARP,2BAWLC,EAAS,IAAIL,OAAOC,UAAUC,OAAO,mCAAoC,CAC3EI,gBAAiB,gBACjBC,YAAa,sBAEfZ,EAAkBa,iBAAiB,UAAU,WAC3CH,EAAOI,YAhBA,YAmBRZ,EAAE,6DAA6DC,OAnBvD,kCAoBHY,IApBG,QAsBXb,EAAE,uDAAuDc,MAAK,WAC5D,IAAIC,EAAQf,EAAEgB,MACRC,EAAgB,GAItB,OAAOF,EAAMG,KAAK,iBAChB,IAAK,MACHD,EAAcE,WAAaJ,EAAMG,KAAK,yBAA2B,EACjEH,EAAMP,OAAOS,GACbnB,EAAkBa,iBAAiB,UAAU,WAC3CI,EAAMP,OAAO,aAEhB,MACD,IAAK,SACHS,EAAcG,cAAgBL,EAAMG,KAAK,yBAA2B,EAMxEH,EAAMM,KAAK,4BAA4B,MA3C9B,6C,sBAoDR,SAAeR,IAAtB,+B,wCAAO,6FAGCS,EAAU,IAAIC,SAAQ,SAACC,EAAKC,GAChCC,EAAUF,EACVG,EAASF,MAER9B,SAASC,cAAc,2CAPrB,wDAWCgC,EAA2BjC,SAASkC,KAAKC,YAAYnC,SAASoC,cAAc,WACxDpC,SAASkC,KAAKC,YAAYnC,SAASoC,cAAc,UACzDC,UAAlB,8CACAJ,EAAyBK,aAAa,MAAO,6BAE7CL,EAAyBM,OAAS,WAChCR,GAAWA,KAEbE,EAAyBO,QAAU,WACjCR,GAAUA,KApBP,kBAuBEL,GAvBF,6C,+BA8BQpB,I,uEAAf,iFACEC,OAAOC,UAAYD,OAAOC,WAAa,IACpCD,OAAOC,UAAUC,OAFtB,wDAKwBV,SAASkC,KAAKC,YAAYnC,SAASoC,cAAc,UACzDC,UAAd,iDANF,SAOmC,qCAPnC,OAOE7B,OAAOC,UAAUC,OAPnB,OAOwD+B,QAPxD,4C","file":"load-sticky.d2c33314c40e4578b21f.bundle.js","sourcesContent":["\nexport default async function  loadSticky() {\n  if (document.querySelector('[data-altrp-sticky]:not([data-altrp-sticky-loaded])')) {\n    const {loadJQuery} = await import('../helpers/plugins');\n    await loadJQuery();\n    const frontAppContainer = document.getElementById('front-app');\n    if($('[data-altrp-sticky=\"column_top\"]').length) {\n      await loadStickyJS()\n      if(! window.altrpLibs || ! window.altrpLibs.Sticky){\n        console.error('Не загрузилось \"sticky-js\"');\n        return\n      }\n      let sticky = new window.altrpLibs.Sticky('[data-altrp-sticky=\"column_top\"]', {\n        stickyContainer: '.altrp-column',\n        stickyClass: 'sticky-js-wrapper',\n      });\n      frontAppContainer.addEventListener('scroll', ()=>{\n        sticky.update()\n      })\n    }\n    if($('[data-altrp-sticky]:not([data-altrp-sticky=\"column_top\"])').length){\n      await loadStickyPlugin();\n    }\n    $('[data-altrp-sticky]:not([data-altrp-sticky-loaded])').each(function(){\n      let $this = $(this)\n      const stickyOptions = {\n\n      };\n\n      switch($this.data('altrp-sticky')){\n        case 'top':{\n          stickyOptions.topSpacing = $this.data('altrp-sticky-spacing') || 0\n          $this.sticky(stickyOptions)\n          frontAppContainer.addEventListener('scroll', ()=>{\n            $this.sticky('update')\n          })\n        }break;\n        case 'bottom':{\n          stickyOptions.bottomSpacing = $this.data('altrp-sticky-spacing') || 0\n        }break;\n        case 'column_top':{\n        }break;\n      }\n\n      $this.attr('data-altrp-sticky-loaded', true)\n    })\n  }\n}\n\n/**\n * Загружаем jQuery, если не заргужен\n * @return {Promise<void>}\n */\nexport async function loadStickyPlugin(){\n  let resolve, reject;\n\n  const promise = new Promise((res, rej) => {\n    resolve = res;\n    reject = rej;\n  });\n  if(document.querySelector('script[src=\"/plugins/jquery.sticky.js\"]')){\n    return;\n  }\n\n  const jQueryStickyPluginScript = document.head.appendChild(document.createElement('script'));\n  const stickyPluginStyle = document.head.appendChild(document.createElement('style'));\n  stickyPluginStyle.innerHTML = `.sticky-wrapper{width:100%;z-index: 10000;}`\n  jQueryStickyPluginScript.setAttribute('src', '/plugins/jquery.sticky.js');\n\n  jQueryStickyPluginScript.onload = () => {\n    resolve && resolve()\n  };\n  jQueryStickyPluginScript.onerror = () => {\n    reject && reject()\n  };\n\n  return promise;\n}\n\n/**\n *\n * @returns {Promise<void>}\n */\nasync function loadStickyJS(){\n  window.altrpLibs = window.altrpLibs || {};\n  if(window.altrpLibs.Sticky){\n    return\n  }\n  const stickyJSStyle = document.head.appendChild(document.createElement('style'));\n  stickyJSStyle.innerHTML = `.sticky-js-wrapper{width:100%;z-index: 10000;}`\n  window.altrpLibs.Sticky = (await import('sticky-js')).default;\n}\n"],"sourceRoot":""}